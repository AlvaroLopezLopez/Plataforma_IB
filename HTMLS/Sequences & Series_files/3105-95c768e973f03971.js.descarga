(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3105],{77458:function(e,n,t){"use strict";var i,a,r,o,s,l,d,c,u,m,p,x;t.d(n,{Ar:function(){return i},Do:function(){return h},G7:function(){return y},WF:function(){return v},aj:function(){return a},aq:function(){return b},km:function(){return k},lD:function(){return o},t2:function(){return r},zW:function(){return g}}),(d=i||(i={})).BootCampSection="BootCampSection",d.CaseStudyGroup="CaseStudyGroup",d.MockExamPaper="MockExamPaper",d.PredictionExamPaper="PredictionExamPaper",d.QuestionbankSubtopic="QuestionbankSubtopic",d.QuestionbankTopic="QuestionbankTopic",d.Quiz="Quiz",d.RevisionLadder="RevisionLadder",(c=a||(a={})).AllTime="ALL_TIME",c.Month="MONTH",(u=r||(r={})).Error="Error",u.InProgress="InProgress",u.Success="Success",(m=o||(o={})).CaseStudyPart="CaseStudyPart",m.Question="Question",m.QuestionPart="QuestionPart",(p=s||(s={})).Asc="asc",p.Desc="desc",(x=l||(l={})).CaseStudyExamMode="CaseStudyExamMode",x.CheckWithNewton="CheckWithNewton";let h={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FeedbackResponse"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"feedbackResponse"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"feedback"}},{kind:"Field",name:{kind:"Name",value:"grade"}},{kind:"Field",name:{kind:"Name",value:"entityId"}}]}}]}}]},g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"GenerateFeedbackResponseAsyncV2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"GenerateFeedbackResponseInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"generateFeedbackResponseAsyncV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]},k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"GenerateFeedbackAsync"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"GenerateFeedbackInputV3"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"generateFeedbackAsyncV3"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]},y={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CheckAsyncFeedbackState"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"checkAsyncFeedbackState"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"feedbackResponseId"}}]}}]}}]},b={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetFeedbackResponseUsesRemaining"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getFeedbackResponseUsesRemaining"}}]}}]},v={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetFeedbackResponseUsesRemainingV2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subjectId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getFeedbackResponseUsesRemainingV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"subjectId"},value:{kind:"Variable",name:{kind:"Name",value:"subjectId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"numUsesRemaining"}},{kind:"Field",name:{kind:"Name",value:"allocationType"}}]}}]}}]}},84217:function(e,n,t){"use strict";var i,a,r,o;t.d(n,{Ag:function(){return d},GI:function(){return a},Ml:function(){return u},XJ:function(){return s},ec:function(){return c},lA:function(){return l}}),(r=i||(i={})).Asc="Asc",r.Desc="Desc",(o=a||(a={})).StudentAssessmentQuestionPartAnswer="StudentAssessmentQuestionPartAnswer",o.UserCaseStudyPartAnswer="UserCaseStudyPartAnswer",o.UserQuestionPartAnswer="UserQuestionPartAnswer";let s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreateUserImage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UserImageCreateInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createUserImage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MutationCreateUserImageSuccess"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}}]}}]},l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetUserImageById"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userImage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"QueryUserImageSuccess"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isUploaded"}},{kind:"Field",name:{kind:"Name",value:"ownerId"}},{kind:"Field",name:{kind:"Name",value:"entityId"}},{kind:"Field",name:{kind:"Name",value:"entityType"}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[{kind:"Argument",name:{kind:"Name",value:"sign"},value:{kind:"BooleanValue",value:!0}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserImageUrlSuccess"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}}]}}]},d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetUserImageUploadUrl"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"contentType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userImage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"QueryUserImageSuccess"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isUploaded"}},{kind:"Field",name:{kind:"Name",value:"ownerId"}},{kind:"Field",name:{kind:"Name",value:"entityId"}},{kind:"Field",name:{kind:"Name",value:"entityType"}},{kind:"Field",name:{kind:"Name",value:"uploadUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"contentType"},value:{kind:"Variable",name:{kind:"Name",value:"contentType"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserImageUploadUrlSuccess"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}}]}}]},c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UploadedUserImage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uploadedUserImage"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MutationUploadedUserImageSuccess"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[{kind:"Argument",name:{kind:"Name",value:"sign"},value:{kind:"BooleanValue",value:!0}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserImageUrlSuccess"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}}]}}]},u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"SearchUserImagesByEntityIds"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UserImageSearchInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchUserImagesByEntityIds"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"QuerySearchUserImagesByEntityIdsSuccess"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isUploaded"}},{kind:"Field",name:{kind:"Name",value:"ownerId"}},{kind:"Field",name:{kind:"Name",value:"entityId"}},{kind:"Field",name:{kind:"Name",value:"entityType"}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[{kind:"Argument",name:{kind:"Name",value:"sign"},value:{kind:"BooleanValue",value:!0}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"UserImageUrlSuccess"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"}}]}}]}}]}}]}},97487:function(e,n,t){"use strict";t.d(n,{xZ:function(){return l},Rl:function(){return s},Oc:function(){return o},Kh:function(){return d}});var i=t(77458);let a={"\n  query FeedbackResponse($id: String!) {\n    feedbackResponse(id: $id) {\n      id\n      feedback\n      grade\n      entityId\n    }\n  }\n":i.Do,"\n  mutation GenerateFeedbackResponseAsyncV2($input: GenerateFeedbackResponseInput!) {\n    generateFeedbackResponseAsyncV2(input: $input) {\n      id\n    }\n  }\n":i.zW,"\n  mutation GenerateFeedbackAsync($input: GenerateFeedbackInputV3!){\n    generateFeedbackAsyncV3(input: $input) {\n      id\n    }\n  }\n":i.km,"\n  query CheckAsyncFeedbackState($id: String!) {\n    checkAsyncFeedbackState(id: $id) {\n      id\n      status\n      feedbackResponseId\n    }\n  }\n ":i.G7,"\n  query GetFeedbackResponseUsesRemaining {\n    getFeedbackResponseUsesRemaining\n  }\n":i.aq,"\n  query GetFeedbackResponseUsesRemainingV2($subjectId: String!) {\n    getFeedbackResponseUsesRemainingV2(subjectId: $subjectId)  {\n      numUsesRemaining\n      allocationType\n    }\n  }\n":i.WF};function r(e){var n;return null!==(n=a[e])&&void 0!==n?n:{}}let o=r("\n  query FeedbackResponse($id: String!) {\n    feedbackResponse(id: $id) {\n      id\n      feedback\n      grade\n      entityId\n    }\n  }\n");r("\n  mutation GenerateFeedbackResponseAsyncV2($input: GenerateFeedbackResponseInput!) {\n    generateFeedbackResponseAsyncV2(input: $input) {\n      id\n    }\n  }\n");let s=r("\n  mutation GenerateFeedbackAsync($input: GenerateFeedbackInputV3!){\n    generateFeedbackAsyncV3(input: $input) {\n      id\n    }\n  }\n"),l=r("\n  query CheckAsyncFeedbackState($id: String!) {\n    checkAsyncFeedbackState(id: $id) {\n      id\n      status\n      feedbackResponseId\n    }\n  }\n ");r("\n  query GetFeedbackResponseUsesRemaining {\n    getFeedbackResponseUsesRemaining\n  }\n");let d=r("\n  query GetFeedbackResponseUsesRemainingV2($subjectId: String!) {\n    getFeedbackResponseUsesRemainingV2(subjectId: $subjectId)  {\n      numUsesRemaining\n      allocationType\n    }\n  }\n")},10334:function(e,n,t){"use strict";t.d(n,{wm:function(){return o},wl:function(){return s},hf:function(){return l},R:function(){return c},Jt:function(){return d}});var i=t(84217);let a={"\n  mutation CreateUserImage($input: UserImageCreateInput!) {\n    createUserImage(input: $input) {\n      __typename\n      ... on MutationCreateUserImageSuccess {\n        data {\n          id\n        }  \n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n":i.XJ,"\n  query GetUserImageById($id: ID!) {\n    userImage(id: $id) {\n      __typename\n      ... on QueryUserImageSuccess {\n        data {\n          id\n          isUploaded\n          ownerId\n          entityId\n          entityType\n          url(sign: true) {\n            __typename\n            ... on UserImageUrlSuccess {\n              data\n            }\n            ... on Error {\n              message\n            }\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n":i.lA,"\n  query GetUserImageUploadUrl($id: ID!, $contentType: String!) {\n    userImage(id: $id) {\n      __typename\n      ... on QueryUserImageSuccess {\n        data {\n          id\n          isUploaded\n          ownerId\n          entityId\n          entityType\n          uploadUrl(contentType: $contentType) {\n            __typename\n            ... on UserImageUploadUrlSuccess {\n              data\n            }\n            ... on Error {\n              message\n            }\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n":i.Ag," \n  mutation UploadedUserImage($id: ID!) {\n    uploadedUserImage(input: $id) {\n      __typename\n      ... on MutationUploadedUserImageSuccess {\n        data {\n          id\n          url(sign: true) {\n            __typename\n            ... on UserImageUrlSuccess {\n              data\n            }\n            ... on Error {\n              message\n            }\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n":i.ec,"\n  query SearchUserImagesByEntityIds($input: UserImageSearchInput!) {\n    searchUserImagesByEntityIds(input: $input) {\n      __typename\n      ... on QuerySearchUserImagesByEntityIdsSuccess {\n        data {\n          data {\n            id\n            isUploaded\n            ownerId\n            entityId\n            entityType\n            url(sign: true) {\n              __typename\n              ... on UserImageUrlSuccess {\n                data\n              }\n              ... on Error {\n                message\n              }\n            }\n          }\n        }  \n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n":i.Ml};function r(e){var n;return null!==(n=a[e])&&void 0!==n?n:{}}let o=r("\n  mutation CreateUserImage($input: UserImageCreateInput!) {\n    createUserImage(input: $input) {\n      __typename\n      ... on MutationCreateUserImageSuccess {\n        data {\n          id\n        }  \n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"),s=r("\n  query GetUserImageById($id: ID!) {\n    userImage(id: $id) {\n      __typename\n      ... on QueryUserImageSuccess {\n        data {\n          id\n          isUploaded\n          ownerId\n          entityId\n          entityType\n          url(sign: true) {\n            __typename\n            ... on UserImageUrlSuccess {\n              data\n            }\n            ... on Error {\n              message\n            }\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"),l=r("\n  query GetUserImageUploadUrl($id: ID!, $contentType: String!) {\n    userImage(id: $id) {\n      __typename\n      ... on QueryUserImageSuccess {\n        data {\n          id\n          isUploaded\n          ownerId\n          entityId\n          entityType\n          uploadUrl(contentType: $contentType) {\n            __typename\n            ... on UserImageUploadUrlSuccess {\n              data\n            }\n            ... on Error {\n              message\n            }\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"),d=r(" \n  mutation UploadedUserImage($id: ID!) {\n    uploadedUserImage(input: $id) {\n      __typename\n      ... on MutationUploadedUserImageSuccess {\n        data {\n          id\n          url(sign: true) {\n            __typename\n            ... on UserImageUrlSuccess {\n              data\n            }\n            ... on Error {\n              message\n            }\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"),c=r("\n  query SearchUserImagesByEntityIds($input: UserImageSearchInput!) {\n    searchUserImagesByEntityIds(input: $input) {\n      __typename\n      ... on QuerySearchUserImagesByEntityIdsSuccess {\n        data {\n          data {\n            id\n            isUploaded\n            ownerId\n            entityId\n            entityType\n            url(sign: true) {\n              __typename\n              ... on UserImageUrlSuccess {\n                data\n              }\n              ... on Error {\n                message\n              }\n            }\n          }\n        }  \n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n")},78630:function(e,n,t){"use strict";t.d(n,{v:function(){return c}});var i=t(2784),a=t(1804),r=t(13727),o=t(77458),s=t(25619),l=t(97487),d=t(96802);function c(e){let{onError:n,onSuccess:t,beforeGeneration:c}=e,{api:u}=(0,s.Qy)(),[m]=(0,a.D)(l.Rl,{client:u.aitutor}),[p]=(0,r.t)(l.xZ,{client:u.aitutor,fetchPolicy:"network-only"}),[x]=(0,r.t)(l.Oc,{client:u.aitutor}),[h,g]=(0,i.useState)([]);return(0,i.useEffect)(()=>{h.forEach(async e=>{if(e.status===o.t2.InProgress)try{var i,a,r;let{data:s}=await p({variables:{id:e.id}}),l=null==s?void 0:null===(i=s.checkAsyncFeedbackState)||void 0===i?void 0:i.status;if(l===o.t2.InProgress){setTimeout(()=>{g(n=>n.map(n=>n.id===e.id?{...n,status:o.t2.InProgress}:n))},1e3);return}if(l===o.t2.Error){n(),g(n=>n.filter(n=>n.id!==e.id));return}if(l===o.t2.Success){let i=null==s?void 0:null===(a=s.checkAsyncFeedbackState)||void 0===a?void 0:a.feedbackResponseId;if(!i){n(),g(n=>n.filter(n=>n.id!==e.id));return}let o=await x({variables:{id:i}});if(!(null===(r=o.data)||void 0===r?void 0:r.feedbackResponse)){n(),g(n=>n.filter(n=>n.id!==e.id));return}t(o.data.feedbackResponse),g(n=>n.filter(n=>n.id!==e.id))}}catch(t){n(),g(n=>n.filter(n=>n.id!==e.id))}})},[h,p,x,n,t]),[async e=>{var t,i,a,r;null==c||c();try{let i=await m({variables:{input:e}});if(!(null===(t=i.data)||void 0===t?void 0:t.generateFeedbackAsyncV3)){n();return}let{id:a}=i.data.generateFeedbackAsyncV3;g(e=>[...e,{id:a,status:o.t2.InProgress}])}catch(t){d.kg.error("Failed to generate feedback",{error:t});let e=null==t?void 0:null===(r=t.networkError)||void 0===r?void 0:null===(a=r.result)||void 0===a?void 0:null===(i=a.errors[0])||void 0===i?void 0:i.message;"string"==typeof e&&e.includes("You have reached the maximum number of uses for this feature")?n(e):n()}}]}},15159:function(e,n,t){"use strict";t.d(n,{jy:function(){return a},ow:function(){return l},Vc:function(){return T},nd:function(){return Y},yL:function(){return V},Pz:function(){return G},kT:function(){return c},tS:function(){return u},Ei:function(){return d},oW:function(){return z},JW:function(){return b},Q9:function(){return v},IA:function(){return f},AG:function(){return k},sH:function(){return y},UY:function(){return M},rw:function(){return D},Rv:function(){return L},L1:function(){return R},Sr:function(){return P},ab:function(){return Q},iw:function(){return q},vt:function(){return B}}),(i=a||(a={})).Add="add",i.Remove="remove";var i,a,r=t(28573),o=t(25151),s=t(36023);let l=e=>{let n=e.encryptedData;try{e.useEncryption&&n&&(n=s.AES.decrypt(n,"".concat(e.ephemeralId,"-").concat(e.secondaryId||"anonymous","-").concat(e.suffix)).toString(s.enc.Utf8))}catch(t){t instanceof Error&&"Malformed UTF-8 data"!==t.message?o.logger.error(t.message,{error:t,type:e.suffix}):n=""}return n},d=e=>{var n,t;let{loginId:i}=(0,r.aC)();return{content:null!==(n=l({useEncryption:e.useEncryption,ephemeralId:e.requestId,encryptedData:e.encryptedContent,suffix:"content",secondaryId:i}))&&void 0!==n?n:"",markScheme:null!==(t=l({useEncryption:e.useEncryption,ephemeralId:e.requestId,encryptedData:e.encryptedMarkScheme,suffix:"mark_scheme",secondaryId:i}))&&void 0!==t?t:""}},c=e=>{let{loginId:n}=(0,r.aC)();return l({useEncryption:e.useEncryption,ephemeralId:e.requestId,encryptedData:e.encryptedContent,suffix:"content",secondaryId:n})},u=e=>{let{loginId:n}=(0,r.aC)();return l({useEncryption:e.useEncryption,ephemeralId:e.requestId,encryptedData:e.encryptedNotes,suffix:"notes",secondaryId:n})};var m=t(82066),p=t(25619),x=t(24502),h=t(96802);let g=h.kg.child({from:"useMutateQuestionState"}),k=e=>{let n=(0,m.useQueryClient)(),{api:t}=(0,p.Qy)();return(0,m.useMutation)({mutationFn:n=>{let{questionId:i,completionStatus:a}=n;return t.quizQuestionState.putQuizQuestionState({quiz_id:e,question_id:i,status:a})},onMutate:async t=>{let{questionId:i,completionStatus:a}=t,r=p.iP.quizQuestionState({withQuizIds:[e]});await n.cancelQueries(r);let o=n.getQueryData(r);return S(n,r,{question_id:i,status:a}),{previousState:o}},onError:(t,i,a)=>{let r=p.iP.quizQuestionState({withQuizIds:[e]});(null==a?void 0:a.previousState)&&n.setQueryData(r,a.previousState),x.A9.error("Something went wrong. Please try again later.")},onSuccess:t=>{S(n,p.iP.quizQuestionState({withQuizIds:[e]}),t.data)}})},y=e=>{let n=(0,m.useQueryClient)(),{api:t}=(0,p.Qy)();return(0,m.useMutation)({mutationFn:n=>{let{questionId:i,completionStatus:a}=n;return t.revisionLadderQuestionState.putRevisionLadderQuestionState({revision_ladder_id:e,question_id:i,status:a})},onMutate:async t=>{let{questionId:i,completionStatus:a}=t,r=p.iP.revisionLadderQuestionState({withRevisionLadderIds:[e]});return await j(n,r,{question_id:i,status:a})()},onError:(t,i,a)=>{C(n,p.iP.revisionLadderQuestionState({withRevisionLadderIds:[e]}),a)},onSuccess:t=>{S(n,p.iP.revisionLadderQuestionState({withRevisionLadderIds:[e]}),t.data)}})},b=e=>{let n=(0,m.useQueryClient)(),{api:t}=(0,p.Qy)();return(0,m.useMutation)({mutationFn:n=>{let{questionId:i,completionStatus:a}=n;return t.mockExamPaperQuestionState.putMockExamPaperQuestionState({mock_exam_paper_id:e,question_id:i,status:a})},onMutate:async t=>{let{questionId:i,completionStatus:a}=t,r=p.iP.mockExamPaperQuestionState({withMockExamPaperIds:[e]});return await j(n,r,{question_id:i,status:a})()},onError:(t,i,a)=>{C(n,p.iP.mockExamPaperQuestionState({withMockExamPaperIds:[e]}),a)},onSuccess:t=>{S(n,p.iP.mockExamPaperQuestionState({withMockExamPaperIds:[e]}),t.data)}})},v=e=>{let n=(0,m.useQueryClient)(),{api:t}=(0,p.Qy)();return(0,m.useMutation)({mutationFn:n=>{let{questionId:i,completionStatus:a}=n;return t.predictionExamPaperQuestionState.putPredictionExamPaperQuestionState({prediction_exam_paper_id:e,question_id:i,status:a})},onMutate:async t=>{let{questionId:i,completionStatus:a}=t,r=p.iP.predictionExamPaperQuestionState({withPredictionExamPaperIds:[e]});return await j(n,r,{question_id:i,status:a})()},onError:(t,i,a)=>{C(n,p.iP.predictionExamPaperQuestionState({withPredictionExamPaperIds:[e]}),a)},onSuccess:t=>{S(n,p.iP.predictionExamPaperQuestionState({withPredictionExamPaperIds:[e]}),t.data)}})},f=(e,n,t)=>{let i=(0,m.useQueryClient)(),{api:a}=(0,p.Qy)();return(0,m.useMutation)({mutationFn:i=>{let{questionId:r,completionStatus:o,subtopicId:s}=i;if(!s&&0===t.length)throw g.warn("Could not update question state. No subtopic_id provided. subject_id: ".concat(e,", topic_id: ").concat(n,", question_id: ").concat(r)),Error("Could not update question state. No subtopic_id provided. subject_id: ".concat(e,", topic_id: ").concat(n,", question_id: ").concat(r));return a.questionbankQuestionState.putQuestionbankQuestionState({subject_id:e,topic_id:n,subtopic_id:null!=s?s:t[0],question_id:r,status:o})},onMutate:async a=>{let{questionId:r,completionStatus:o}=a,s=p.iP.questionbankQuestionState({withSubjectIds:[e],withTopicIds:[n],withSubtopicIds:t});return await j(i,s,{question_id:r,status:o})()},onError:(a,r,o)=>{C(i,p.iP.questionbankQuestionState({withSubjectIds:[e],withTopicIds:[n],withSubtopicIds:t}),o)},onSuccess:a=>{S(i,p.iP.questionbankQuestionState({withSubjectIds:[e],withTopicIds:[n],withSubtopicIds:t}),a.data)}})},j=(e,n,t)=>async()=>{await e.cancelQueries(n);let i=e.getQueryData(n);return S(e,n,t),{previousState:i}},C=(e,n,t)=>{(null==t?void 0:t.previousState)&&e.setQueryData(n,t.previousState),x.A9.error("Something went wrong. Please try again later.")},S=(e,n,t)=>{let i=e.getQueryData(n);if(i){let a=[...i],r=a.findIndex(e=>e.question_id===t.question_id);-1!==r?a[r]={...a[r],status:t.status}:a.push(t),e.setQueryData(n,a)}};var w=t(9736),I=t(36234),Z=t(76635),E=t.n(Z),N=t(51379),F=t(9763);h.kg.child({from:"getQuestionsByContext"});let T=async(e,n,t,i,a,r)=>{let{data:{questions:o,imagesExpiresAt:s},headers:{"x-request-id":l}}=await e.questions.getQuestionsByContextBySubject(n.id,t,i,a),{data:{data:d}}=await e.papers.searchPapers({filter:{withSubjectIds:[n.id]},sort_by:{index:"asc"}}),c=n.topics.flatMap(e=>e.subtopics.map(e=>e.id)),u=E().uniqBy(o.flatMap(e=>e.papers),"paper_id");return{questions:o.map((e,t)=>{var i,a,o;let s=e.papers.map(e=>{let{paper_id:n}=e;return n}),l=d.filter(e=>s.includes(e.id)),u=null!==(a=null===(i=e.papers.find(e=>e.paper_id===r))||void 0===i?void 0:i.section)&&void 0!==a?a:null,m=e.subtopics.find(e=>c.includes(e.subtopic_id));return{index:t,...(0,Z.pick)(e,["id","reference","content","parts","images","status","type"]),markScheme:e.mark_scheme,maximumMark:e.maximum_mark,audioClips:e.audio_clips,subjectId:n.id,paperIds:l.map(e=>e.id),calculatorAllowed:l.reduce((e,n)=>e||n.calculator_allowed,null),formulaBooklet:(0,x.n2)(l),difficulty:m?{value:m.difficulty,difficultyLevel:(0,N.Z9)(m.difficulty)}:null,subtopicId:null!==(o=null==m?void 0:m.subtopic_id)&&void 0!==o?o:null,section:u,completionStatus:F.mT.Incomplete,toRevisit:!1}}),imagesExpiresAt:null!=s?s:"",requestId:null!=l?l:"",papers:d.filter(e=>u.some(n=>n.paper_id===e.id))}},R=(e,n,t,i,a,r)=>{var o,s;let{api:l}=(0,p.Qy)(),[d]=(0,w.CJ)("REFETCH_QUESTIONS"),{data:c,isLoading:u}=(0,m.useQuery)(p.iP.getQuestionsByContextBySubject(n,t,e.id),()=>T(l,e,n,t,i,a),{staleTime:1/0,refetchInterval:e=>_({data:e,shouldRefetchQuestions:d}),...r});return{data:{questions:null!==(o=null==c?void 0:c.questions)&&void 0!==o?o:[],papers:null!==(s=null==c?void 0:c.papers)&&void 0!==s?s:[],imagesExpiresAt:null==c?void 0:c.imagesExpiresAt,requestId:null==c?void 0:c.requestId},isLoading:u}},_=e=>{let{data:n,shouldRefetchQuestions:t}=e;return!!t&&null!=n&&!!n.imagesExpiresAt&&I.ou.fromISO(n.imagesExpiresAt).diffNow().as("milliseconds")},U=async(e,n,t)=>{let{data:{questions:i,imagesExpiresAt:a},headers:{"x-request-id":r}}=await e.questions.getQuestionsByFlag(t,!0),{data:{data:o}}=await e.papers.searchPapers({filter:{withSubjectIds:[n.id]}}),s=n.topics.flatMap(e=>e.subtopics.map(e=>e.id)),l=E().uniqBy(i.flatMap(e=>e.papers),"paper_id");return{questions:i.map((e,t)=>{var i,a,r;let l=e.papers.map(e=>{let{paper_id:n}=e;return n}),d=o.filter(e=>l.includes(e.id)),c=null!==(a=null===(i=e.papers.find(e=>{var n;return e.paper_id===(null==d?void 0:null===(n=d[0])||void 0===n?void 0:n.id)}))||void 0===i?void 0:i.section)&&void 0!==a?a:null,u=e.subtopics.find(e=>s.includes(e.subtopic_id));return{index:t,...(0,Z.pick)(e,["id","reference","content","parts","images","status","type"]),markScheme:e.mark_scheme,maximumMark:e.maximum_mark,audioClips:e.audio_clips,subjectId:n.id,paperIds:d.map(e=>e.id),calculatorAllowed:d.reduce((e,n)=>e||n.calculator_allowed,null),formulaBooklet:(0,x.n2)(d),difficulty:u?{value:u.difficulty,difficultyLevel:(0,N.Z9)(u.difficulty)}:null,subtopicId:null!==(r=null==u?void 0:u.subtopic_id)&&void 0!==r?r:null,section:c,completionStatus:F.mT.Incomplete,toRevisit:!1}}),requestId:r,imagesExpiresAt:a,papers:o.filter(e=>l.some(n=>n.paper_id===e.id))}},P=(e,n)=>{var t,i;let{api:a}=(0,p.Qy)(),[r]=(0,w.CJ)("REFETCH_QUESTIONS"),{data:o,isLoading:s}=(0,m.useQuery)(p.iP.getQuestionsByFlag(n),()=>U(a,e,n),{staleTime:1/0,refetchInterval:e=>_({data:e,shouldRefetchQuestions:r})});return{data:{questions:null!==(t=null==o?void 0:o.questions)&&void 0!==t?t:[],papers:null!==(i=null==o?void 0:o.papers)&&void 0!==i?i:[],imagesExpiresAt:null==o?void 0:o.imagesExpiresAt,requestId:null==o?void 0:o.requestId},isLoading:s}},M=()=>{let e=(0,m.useQueryClient)(),{api:n}=(0,p.Qy)(),{loginId:t}=(0,r.aC)();return(0,m.useMutation)({mutationFn:async e=>{var t,i;let{questionId:r,action:o}=e,{data:{data:s}}=await n.flags.searchFlags({filter:{query:"Revisit"}});return o===a.Add?await n.questionFlags.putQuestionFlag({question_id:r,flag_id:null===(t=s[0])||void 0===t?void 0:t.id}):await n.questionFlags.deleteQuestionFlag({question_id:r,flag_id:null===(i=s[0])||void 0===i?void 0:i.id}),{questionId:r,action:o}},onMutate:async n=>{let{questionId:i,action:a}=n,r=p.iP.userGoldAccess(t);await e.cancelQueries(r);let o=e.getQueryData(r);return A(e,r,{questionId:i,action:a}),{previousFlags:o}},onError:(n,i,a)=>{(null==a?void 0:a.previousFlags)&&e.setQueryData(p.iP.userGoldAccess(t),a.previousFlags),x.A9.error("Something went wrong. Please try again later.")},onSuccess:n=>{A(e,p.iP.userGoldAccess(t),n),e.invalidateQueries(p.iP.userGoldAccessSummary(t))}})},A=(e,n,t)=>{let i=e.getQueryData(n);if(i){let r=[...i],o=r.findIndex(e=>e===t.questionId);t.action===a.Add&&-1===o?r.push(t.questionId):t.action===a.Remove&&-1!==o&&r.splice(o,1),e.setQueryData(n,r)}},Q=e=>{let{api:n}=(0,p.Qy)(),{isSignedIn:t}=(0,r.aC)(),i={withQuizIds:e},{data:a,isLoading:o}=(0,m.useQuery)(p.iP.quizQuestionState(i),()=>n.quizQuestionState.searchQuizQuestionState({filter:i}).then(e=>e.data.data),{enabled:t&&e.length>0});return{data:null!=a?a:[],isLoading:o}},q=e=>{let{api:n}=(0,p.Qy)(),{isSignedIn:t}=(0,r.aC)(),i={withRevisionLadderIds:e},{data:a,isLoading:o}=(0,m.useQuery)(p.iP.revisionLadderQuestionState(i),()=>n.revisionLadderQuestionState.searchRevisionLadderQuestionState({filter:i}).then(e=>e.data.data),{enabled:t&&e.length>0});return{data:null!=a?a:[],isLoading:o}},z=e=>{let{api:n}=(0,p.Qy)(),{isSignedIn:t}=(0,r.aC)(),i={withMockExamPaperIds:e},{data:a,isLoading:o}=(0,m.useQuery)(p.iP.mockExamPaperQuestionState(i),()=>n.mockExamPaperQuestionState.searchMockExamPaperQuestionState({filter:i}).then(e=>e.data.data),{enabled:t&&e.length>0});return{data:null!=a?a:[],isLoading:o}},D=e=>{let{api:n}=(0,p.Qy)(),{isSignedIn:t}=(0,r.aC)(),i={withPredictionExamPaperIds:e},{data:a,isLoading:o}=(0,m.useQuery)(p.iP.predictionExamPaperQuestionState(i),()=>n.predictionExamPaperQuestionState.searchPredictionExamPaperQuestionState({filter:i}).then(e=>e.data.data),{enabled:t&&e.length>0});return{data:null!=a?a:[],isLoading:o}},L=(e,n,t)=>{let{api:i}=(0,p.Qy)(),{isSignedIn:a}=(0,r.aC)(),o={withSubjectIds:e,withTopicIds:n,withSubtopicIds:t},{data:s,isLoading:l}=(0,m.useQuery)(p.iP.questionbankQuestionState(o),()=>i.questionbankQuestionState.searchQuestionbankQuestionState({filter:o}).then(e=>e.data.data),{enabled:a&&e.length>0&&n.length>0&&t.length>0});return{data:null!=s?s:[],isLoading:l}},B=()=>{let{api:e}=(0,p.Qy)(),{isSignedIn:n,loginId:t}=(0,r.aC)(),{data:i,isLoading:a}=(0,m.useQuery)(p.iP.userGoldAccess(t),async()=>{let n=[],{data:{data:t}}=await e.flags.searchFlags({filter:{query:"Revisit"}});if(t[0]){var i;let{data:{data:a}}=await e.questionFlags.searchQuestionFlag({filter:{withFlagIds:[null===(i=t[0])||void 0===i?void 0:i.id]}});n=null==a?void 0:a.map(e=>e.question_id)}return n},{enabled:n});return{data:null!=i?i:[],isLoading:a}};t(87622),t(13888),t(3440),t(16760);var O=t(75652),W=t.n(O);let V=e=>W()(e.map(e=>e.type)).sort();var H=t(99792);let G=e=>{switch(e){case H.ce$.Mcq:return"Multiple Choice Questions";case H.ce$.Erq:return"Extended Response Questions";case H.ce$.Saq:return"Short Answer Questions";case H.ce$.Dbq:return"Data-based Questions";case H.ce$.Pbq:return"Practical-based Questions";case H.ce$.Cq:return"Comprehension Questions";case H.ce$.Rcq:return"Reading Comprehension Question";case H.ce$.Lcq:return"Listening Comprehension Question";case H.ce$.Sq:return"Speaking Question";case H.ce$.Wq:return"Writing Question";case H.ce$.Sbq:return"Source Based Question";default:return e}},$=e=>{var n;return{id:e.id,reference:e.reference,index:e.index,subject_id:e.subject_id,calculatorAllowed:e.calculator_allowed,formulaBooklet:null!==(n=e.formula_booklet)&&void 0!==n?n:null}},Y=e=>e.map($).sort((e,n)=>e.index-n.index)},57909:function(e,n,t){"use strict";t.d(n,{ob:function(){return eU},t:function(){return m},KX:function(){return f},Bo:function(){return el},Ns:function(){return q},HN:function(){return eu},vU:function(){return no},_W:function(){return nO},Wo:function(){return eK},sG:function(){return en}});var i,a,r=t(52322),o=t(2784),s=t(78502),l=t(59888),d=t(76385),c=t(15656),u=t(15883);let m=(0,o.memo)(function(e){let{difficultyLevel:n,value:t}=e,i=(0,s.Z)(),a={[c.Qg.Easy]:u.O.green.dark,[c.Qg.Medium]:u.O.orange.dark,[c.Qg.Hard]:u.O.red.dark}[n],o={[c.Qg.Easy]:u.O.green.light,[c.Qg.Medium]:u.O.orange.light,[c.Qg.Hard]:u.O.red.light}[n];return(0,r.jsxs)(l.Z,{className:"difficulty-bar",children:[(0,r.jsx)(d.Z,{variant:"p-sm-semibold",sx:{color:a,textTransform:"uppercase",fontSize:"0.75rem",mb:.5},children:n}),(0,r.jsx)(l.Z,{display:"flex",alignItems:"center",justifyContent:"flex-start",sx:{width:"100%",height:i.spacing(2),border:"none",borderRadius:i.spacing(7.5),background:o},children:(0,r.jsx)(l.Z,{sx:{borderRadius:"inherit",background:a,width:"".concat(t,"%"),height:"100%"}})})]})});var p=t(39097),x=t.n(p),h=t(71946),g=t(14313),k=t(94482),y=t(81014),b=t(51379);let v=e=>{let{numFlaggedQuestions:n,showText:t=!1,href:i}=e,a=(0,s.Z)();return n<=0?null:(0,r.jsx)(h.Z,{variant:"outline",size:t?"medium":"small",startIcon:(0,r.jsx)(k.dY,{}),LinkComponent:x(),href:i,sx:{minWidth:"auto",padding:t?void 0:a.spacing(1,1.5),pointerEvents:i?"initial":"none"},children:t?"".concat((0,b.RC)(n,"question")," to revisit"):n})},f=e=>(0,r.jsx)(g.Z,{theme:y.rS,children:(0,r.jsx)(v,{...e})});var j=t(96802),C=t(87622),S=t.n(C);let w=j.kg.child({from:"getImageUrl"}),I=new Map,Z=(e,n)=>{var t,i;let a="question:",r=null!==(i=null===(t=n[0])||void 0===t?void 0:t.expiresAt)&&void 0!==i?i:"no-expiry",o="".concat(e,"-").concat(r);if(e.startsWith(a)){let t=I.get(o);if(t)return t;let i=e.substring(a.length),r=n.find(e=>e.file_id===i);if(r)return I.set(o,r.url),r.url;w.warn("Question image not found: ".concat(e))}},E=(e,n)=>{var t,i;return null!==(i=null===(t=S()(n,"audio_id")[e])||void 0===t?void 0:t.playback_url)&&void 0!==i?i:void 0},N=(e,n,t)=>e.startsWith("question:")&&n.length?Z(e,n):t.length?E(e,t):void 0;var F=t(25237),T=t.n(F),R=t(99792);let _={"&>div":{fontSize:{xs:"10px",sm:"13px",md:"14px",xmd:"15px",lg:"16px",xl:"17px"},position:"relative",p:1}},U=e=>e.reduce((e,n)=>{if(!n.transcript)return e;let{status:t,content:i}=n.transcript;return t===R.GQR.Unpublished||(e[n.audio_id]=null!=i?i:""),e},{});var P=t(45455),M=t.n(P);let A=T()(()=>Promise.all([t.e(4620),t.e(5338),t.e(3271)]).then(t.bind(t,83271)).then(e=>e.MarkdownEx),{loadableGenerated:{webpack:()=>[83271]},ssr:!1}),Q={"& p:first-of-type":{mt:0},"&>*>*:last-of-type, &>*>*:last-of-type>*:last-of-type, &>*>*:last-of-type>*:last-of-type>*:last-of-type, &>*>*:last-of-type>*:last-of-type>*:last-of-type>*:last-of-type, &>*>*:last-of-type>*:last-of-type>*:last-of-type>*:last-of-type>*:last-of-type":{mb:0},"& .marks":{float:"none",position:"absolute",right:0},'div[data-note="rv-audio-player"] > div:first-child, span[data-note="rv-audio-player"] > div:first-child':{overflowX:"auto"}},q=e=>{var n,t;let{sx:i,images:a=[],audioClips:o=[],variant:s="ib",...d}=e,c=U(o);return(0,r.jsx)(l.Z,{sx:{...Q,...i},children:(0,r.jsx)(A,{...d,variant:s,onUrl:e=>N(e,a,o),transcriptMarkdownExProps:M()(c)?void 0:{containerSxProps:_,variant:"ib",contentMap:c}})},null!==(t=null==a?void 0:null===(n=a[0])||void 0===n?void 0:n.expiresAt)&&void 0!==t?t:"no-expiry")};var z=t(57542),D=t(9763),L=t(67614),B=t(81836),O=t(20614),W=t(44258),V=t(28562),H=t(32765),G=t(60467),$=t(90515),Y=t(84311),X=t(50131),K=t(15159),J=t(34758);let ee=e=>{let{questionId:n,parts:t,selectedPart:i,onSelect:a,contextEntityId:o,contextEntityType:c,subjectId:m}=e,p=(0,s.Z)();if(1===t.length){let e=t[0];return e.video_solution_id?(0,r.jsx)(z.pz,{title:"Question ".concat(e.name," Solution"),videoSolutionId:e.video_solution_id,entityType:R.lWU.QuestionPart,entityId:e.id,contextEntity:c,contextEntityId:o,subjectId:m}):(0,r.jsx)(B.Z,{p:3,textAlign:"center",children:(0,r.jsx)(J.Z,{sx:{boxShadow:"none",p:3,borderRadius:4,backgroundColor:u.O.pink.light},children:(0,r.jsx)(d.Z,{variant:"p-md-semibold",color:u.O.pink.dark,children:"Video solution not available"})})})}return(0,r.jsxs)(B.Z,{flex:1,children:[(0,r.jsx)(B.Z,{direction:"row",spacing:1,p:{xs:1,md:3},pb:"0 !important",sx:{"&>.MuiBox-root>.MuiBox-root":{border:"1px solid ".concat(p.colors.common.primary[300]),backgroundColor:p.palette.common.white},"&>.MuiBox-root>.MuiBox-root p":{color:p.colors.common.primary[600],fontWeight:600},"&>.MuiBox-root.selected>.MuiBox-root":{backgroundColor:p.colors.common.primary[600],borderColor:p.colors.common.primary[600]},"&>.MuiBox-root.selected>.MuiBox-root p":{color:p.palette.common.white}},children:t.map(e=>(0,r.jsx)(z.xd,{"data-analytics-on":"click","data-analytics-name":"clickOnSolution","data-analytics-attrs":"questionId:".concat(n,",solution:").concat(e.name),selected:e.name==(null==i?void 0:i.name),label:"".concat(e.name),onClick:()=>a(e)},e.id))}),(0,r.jsx)(l.Z,{sx:{justifyContent:"center",alignItems:"center",display:i?"block":"flex",p:{xs:1,md:3}},children:i&&i.video_solution_id?(0,r.jsx)(z.pz,{title:"Question ".concat(i.name," Solution"),videoSolutionId:i.video_solution_id,entityType:R.lWU.QuestionPart,entityId:i.id,contextEntity:c,contextEntityId:o,subjectId:m}):(0,r.jsx)(l.Z,{sx:{position:"relative",pb:"56.25%",height:"100%",width:"100%"},children:(0,r.jsx)(d.Z,{variant:"p-sm-rg",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center"},children:"Please select a question part to view solution"})})})]})},en=e=>(0,r.jsx)(g.Z,{theme:y.rS,children:(0,r.jsx)(ee,{...e})});var et=t(96577),ei=t.n(et),ea=t(60218),er=t(71055),eo=t(57187),es=t(57493);let el=e=>{let n=(0,s.Z)(),[t,i]=(0,o.useState)(!0);return(0,r.jsx)(l.Z,{sx:{overflow:"hidden",height:"100%"},children:(0,r.jsxs)(ea.ZP,{container:!0,sx:{height:"100%",position:"relative"},children:[(0,r.jsx)(O.Z,{title:"Click to ".concat(t?"retract":"expand"),children:(0,r.jsx)(l.Z,{onClick:()=>i(!t),sx:{position:"absolute",width:{xs:"100%",md:"1.125rem"},height:{xs:"1.125rem",md:"100%"},backgroundColor:n.palette.grey[300],top:{xs:t?"40%":n.spacing(6),md:0},left:{xs:0,md:t?"50%":n.spacing(6)},transform:{xs:t?"translateY(-50%)":void 0,md:t?"translateX(-50%)":void 0},cursor:"pointer","@media (hover: hover)":{"&:hover":{backgroundColor:n.palette.grey[400]}},zIndex:99},children:(0,r.jsx)(er.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:{xs:"translate(-50%, -50%) ".concat(t?"rotate(270deg)":"rotate(90deg)"),md:"translate(-50%, -50%) ".concat(t?"rotate(180deg)":"")},fontSize:"1rem"}})})}),(0,r.jsx)(ea.ZP,{item:!0,xs:12,md:6,sx:{position:t?"relative":"absolute",overflowY:"auto",height:{xs:t?"40%":"100%",md:"100%"},width:"100%",backdropFilter:t?void 0:"blur(64px)",WebkitBackdropFilter:t?void 0:"blur(64px)",backgroundColor:t?void 0:"rgba(222, 222, 222, 0.3)",...eo.e},children:(0,r.jsx)(q,{sx:{p:2,"&>div":{fontSize:{xs:"10px",sm:"13px",md:"10px",xmd:"11px",lg:"12px",xl:"14px"},position:"relative",pr:"20px"}},value:e.content,variant:"ib",images:e.images,audioClips:e.audioClips})}),(0,r.jsxs)(ea.ZP,{item:!0,xs:12,md:t?6:12,mt:{xs:t?1:8,md:0},pb:{xs:t?0:8,md:0},ml:{md:t?0:8},sx:{backgroundColor:n.palette.common.white,overflowY:"auto",zIndex:10,height:{xs:t?"60%":"100%",md:"100%"},...eo.e},children:[(0,r.jsx)(l.Z,{sx:{float:"right",p:.5},children:(0,r.jsx)(ei(),{src:es.uj,alt:"logo",width:32,height:36})}),(0,r.jsx)(q,{sx:{p:2,"&>div":{fontSize:t?{xs:"10px",sm:"13px",md:"10px",xmd:"11px",lg:"12px",xl:"14px"}:{xs:"14px",sm:"16px",md:"16px",xmd:"16px",lg:"18px",xl:"20px"},position:"relative",pr:"20px"}},value:e.markScheme,variant:"ib",images:e.images,audioClips:e.audioClips})]})]})})},ed=e=>{let{children:n,icon:t,onClick:i,sx:a,className:o}=e,l=(0,s.Z)();return(0,r.jsxs)(B.Z,{direction:"row",spacing:.75,sx:{alignItems:"center",cursor:"pointer",color:l.palette.grey[500],fill:l.palette.grey[500],"&:hover":{color:l.palette.grey[700],fill:l.palette.grey[700]},...a},onClick:i,className:o,children:[t,(0,r.jsx)(d.Z,{variant:"p-sm-semibold",sx:{fontSize:{xs:"0.65rem",sm:"0.8rem"}},color:"inherit",children:n})]})},ec=e=>{let{goldAccess:n,toRevisit:t,onClick:i,hovered:a=!1,analyticsAttrs:o=""}=e,l=(0,s.Z)(),d={fontSize:"1.1rem",width:"13px"},c=(0,r.jsx)(X.U6,{sx:{...d,".a":{fill:l.palette.common.white}}});return n&&(c=t?a?(0,r.jsx)(X.go,{sx:{...d,".a":{fill:l.palette.common.white}}}):(0,r.jsx)(X.U6,{sx:{...d,".a":{fill:l.palette.common.white}}}):a?(0,r.jsx)(X.U6,{sx:{...d,".a":{fill:l.palette.common.white}}}):(0,r.jsx)(X.U6,{sx:{...d,".a":{fill:u.O.purple.dark}}})),(0,r.jsx)(ed,{icon:c,onClick:i,className:"revisit","data-analytics-on":"click","data-analytics-name":"toggleQuestionRevisit","data-analytics-attrs":o,sx:{color:n?a||t?"".concat(l.palette.common.white," !important"):u.O.purple.dark:"".concat(l.palette.common.white," !important"),backgroundColor:n?a||t?"".concat(u.O.purple.dark," !important"):l.palette.common.white:"".concat(l.palette.gold[500]," !important"),border:n?"1px solid ".concat(u.O.purple.dark," !important"):"none"},children:"Revisit"})},eu=e=>{var n;let{id:t,index:i,parts:a,reference:p,content:x,markScheme:h,subjectId:g,calculatorAllowed:k,formulaBooklet:y,images:b,difficulty:v,completionStatus:f,toRevisit:j,onDoneClick:C,onRevisitClick:S,goldAccess:w,showHeader:I=!0,showSolutions:Z=!0,showMarkScheme:E=!0,gateSolutions:N=!1,contextEntityId:F,contextEntityType:T,canSeeVideoSolutions:R,audioClips:_}=e,{user:U}=(0,L.v$)(),P=(0,s.Z)(),[M,A]=(0,o.useState)(),[Q,J]=(0,o.useState)(null),[ee,et]=(0,o.useState)(!1),[ei,ea]=(0,o.useState)(!1),er=a.filter(e=>e.video_solution_id),eo=()=>{null==C||C(t,f===D.mT.Incomplete?D.mT.Complete:D.mT.Incomplete)},es=()=>{let e=K.jy.Add;j&&(e=K.jy.Remove),null==S||S(t,e)},eu="Question ".concat(i+1).concat((null==U?void 0:U.type)===D.FW.Admin?" (".concat(p,")"):""),em="questionId:".concat(t,",questionRef:").concat(p),ep={question:{props:{analyticsName:"question",analyticsAttrs:em,open:"question"===Q,title:eu,disableMobileDrawer:!0,containerStyle:{maxWidth:P.spacing(180)}},children:(0,r.jsx)(q,{sx:{"&>div":{fontSize:{xs:"12px",sm:"14px",md:"16px",lg:"18px",xl:"20px"},position:"relative",pr:P.spacing(10)},width:"100%",overflow:"auto",p:{xs:2,sm:3,md:2}},value:x,variant:"ib",images:b,audioClips:_})},markScheme:{props:{analyticsName:"markScheme",analyticsAttrs:em,open:"markScheme"===Q,title:eu,scrollable:!1,containerStyle:{maxWidth:P.spacing(180),width:{xs:"100%",md:"95%",xl:"95%"},height:{xs:"90%"},display:"flex",flexDirection:"column"}},children:(0,r.jsx)(el,{images:b,markScheme:h,content:x,audioClips:_})},formulaBooklet:{props:{analyticsName:"formulaBooklet",analyticsAttrs:em,open:"formulaBooklet"===Q,title:eu,scrollable:!1,containerStyle:{display:"flex",flexDirection:"column",width:{xs:"100%",md:"95%",xl:"95%"},height:{xs:"90%"}}},children:(0,r.jsx)(z.Xu,{url:null!==(n=null==y?void 0:y.url)&&void 0!==n?n:"",downloadFilename:null==y?void 0:y.filename})},solution:{props:{analyticsName:"solution",analyticsAttrs:em,open:"solution"===Q,title:eu,containerStyle:{width:{xs:"100%",md:"90%",xl:"60%"}}},children:(0,r.jsx)(en,{questionId:t,subjectId:g,questionIndex:i,parts:er,selectedPart:M,onSelect:A,contextEntityId:F,contextEntityType:T})},feedback:{props:{analyticsName:"feedback",analyticsAttrs:em,open:"feedback"===Q,containerStyle:{width:{xs:"100%",md:"90%",xl:"60%"},height:{xs:"90%"}}},children:(0,r.jsx)(Y.Zc,{reference:p,subjectId:g,user:U})}};return(0,r.jsxs)(l.Z,{id:t,className:"question-container",sx:{"& .mark-scheme, & .formula-booklet, & .video,  & .newton, & .revisit, & .complete":{borderRadius:"50px",padding:"6px 14px",textAlign:"center",justifyContent:"center",border:"none"},"& .mark-scheme svg, & .formula-booklet svg, & .video svg,  & .newton svg, & .complete svg":{fontSize:"1.1rem"},"& .mark-scheme":{backgroundColor:u.O.blue.light,color:"".concat(u.O.blue.dark," !important")},"& .formula-booklet":{backgroundColor:u.O.purple.light,color:"".concat(u.O.purple.dark," !important")},"& .complete":{border:"1px solid ".concat(u.O.green.dark," !important"),color:"".concat(u.O.green.dark," !important")},"& .complete:hover, & .complete-active":{backgroundColor:u.O.green.dark,color:"".concat(P.palette.common.white," !important")},"& .newton":{backgroundColor:u.O.pink.light,color:"".concat(u.O.pink.dark," !important"),px:{xs:2,xmd:.25}},"& .video":{backgroundColor:u.O.orange.light,color:"".concat(u.O.orange.dark," !important")},"& .question-actions":{mt:{xs:1.5,xmd:0}},"& .calculator-icon":{borderRadius:"50px",background:u.O.blue.light,p:"6px 14px"},"& .calculator-icon .MuiTypography-root":{lineHeight:1.5,color:u.O.blue.dark},"& .calculator-icon-mobile":{background:u.O.blue.light,cursor:"default",color:u.O.blue.dark},"& .calculator-icon-mobile svg":{width:"20px",height:"20px",stroke:u.O.blue.dark}},children:[I&&(0,r.jsxs)(B.Z,{direction:"row",justifyContent:"space-between",sx:{mb:1.5},children:[(0,r.jsxs)(l.Z,{display:"flex",alignItems:"center",children:[(0,r.jsxs)(d.Z,{variant:"h5-semibold",mr:1.25,children:["Question ",i+1]}),null!==k&&(0,r.jsx)(z.Md,{isAllowed:k,mobileBreakpoint:"xmd"})]}),(0,r.jsxs)(B.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,r.jsx)(O.Z,{title:"Give us feedback on this question",children:(0,r.jsx)(W.Z,{onClick:()=>J("feedback"),sx:{padding:0,height:"20px",":hover":{background:"none"}},children:(0,r.jsx)(X.NA,{sx:{fontSize:"40px"}})})}),(0,r.jsx)(l.Z,{display:{xs:"block",xmd:"none"},width:P.spacing(16),children:v&&(0,r.jsx)(m,{...v})})]})]}),(0,r.jsx)(l.Z,{className:"question-content",sx:{background:"#fff",borderRadius:4,p:1},children:(0,r.jsxs)(B.Z,{direction:"row",justifyContent:"space-between",children:[(0,r.jsxs)(l.Z,{width:"100%",position:"relative",overflow:"hidden",children:[(0,r.jsx)(W.Z,{onClick:()=>J("question"),sx:{position:"absolute",top:0,right:0,zIndex:99},"data-analytics-on":"click","data-analytics-name":"clickQuestionFullscreen","data-analytics-attrs":em,children:(0,r.jsx)(V.Z,{})}),(0,r.jsx)(q,{sx:{"&>div":{fontSize:{xs:"10px",sm:"13px",md:"14px",xmd:"15px",lg:"16px",xl:"17px"},position:"relative",pr:"20px"},overflow:"hidden",p:{xs:2,sm:3,md:2}},value:x,variant:"ib",images:b,audioClips:_})]}),(0,r.jsxs)(l.Z,{display:{xs:"none",xmd:"block"},flex:"0 0 ".concat(P.spacing(28)),p:2,className:"question-actions",children:[(0,r.jsx)(l.Z,{pb:4,children:v&&(0,r.jsx)(m,{...v})}),(0,r.jsxs)(B.Z,{spacing:1,children:[y&&(0,r.jsx)(ed,{icon:(0,r.jsx)(H.Z,{}),onClick:()=>J("formulaBooklet"),"data-analytics-on":"click","data-analytics-name":"clickFormulaBooklet","data-analytics-attrs":em,className:"formula-booklet",children:"Formula Booklet"}),E&&(0,r.jsx)(ed,{icon:(0,r.jsx)(H.Z,{}),onClick:()=>J("markScheme"),"data-analytics-on":"click","data-analytics-name":"clickMarkScheme","data-analytics-attrs":em,className:"mark-scheme",children:"Mark Scheme"})]}),er.length>0&&Z&&(0,r.jsx)(B.Z,{spacing:1,mt:2,children:er.map(e=>(0,r.jsx)(ed,{icon:(0,r.jsx)(G.Z,{}),onClick:()=>{N&&!(w||R)?ea(!0):(J("solution"),A(e))},"data-analytics-on":"click","data-analytics-name":"clickSolutions","data-analytics-attrs":em,sx:{color:N&&!w?P.palette.gold[500]:P.palette.grey[500]},className:"video",children:1===er.length?"Video":"Video (".concat(e.name,")")},e.id))}),(S||C&&U)&&(0,r.jsxs)(B.Z,{spacing:1,mt:2.5,children:[S&&(0,r.jsx)(l.Z,{onMouseEnter:()=>et(!0),onMouseLeave:()=>et(!1),children:(0,r.jsx)(ec,{goldAccess:w,toRevisit:j,hovered:ee,onClick:()=>{w?es():ea(!0)}})}),C&&U&&(0,r.jsx)(ed,{icon:(0,r.jsx)($.Z,{}),onClick:eo,"data-analytics-on":"click","data-analytics-name":"toggleQuestionCompletion","data-analytics-attrs":em,className:"complete ".concat(f===D.mT.Complete&&"complete-active"),children:"Mark as complete"})]})]})]})}),(0,r.jsxs)(B.Z,{display:{xs:"flex",xmd:"none"},direction:"row",columnGap:2,rowGap:1,justifyContent:"center",flexWrap:"wrap",mt:1,className:"question-actions",children:[y&&(0,r.jsx)(ed,{icon:(0,r.jsx)(H.Z,{fontSize:"small"}),onClick:()=>J("formulaBooklet"),"data-analytics-on":"click","data-analytics-name":"clickFormulaBooklet","data-analytics-attrs":em,className:"formula-booklet",children:"Formula Booklet"}),E&&(0,r.jsx)(ed,{icon:(0,r.jsx)(H.Z,{fontSize:"small"}),onClick:()=>J("markScheme"),"data-analytics-on":"click","data-analytics-name":"clickMarkScheme","data-analytics-attrs":em,className:"mark-scheme",children:"Mark Scheme"}),er.length>0&&Z&&(0,r.jsx)(ed,{icon:(0,r.jsx)(G.Z,{fontSize:"small"}),onClick:()=>{N&&!w?ea(!0):(J("solution"),A(void 0))},sx:{color:N&&!w?P.palette.gold[500]:P.palette.grey[500]},"data-analytics-on":"click","data-analytics-name":"clickSolutions","data-analytics-attrs":em,className:"video",children:"Solutions"}),S&&(0,r.jsx)(ec,{goldAccess:w,toRevisit:j,onClick:()=>{w?es():ea(!0)}}),C&&U&&(0,r.jsx)(ed,{icon:(0,r.jsx)($.Z,{fontSize:"small"}),onClick:eo,"data-analytics-on":"click","data-analytics-name":"toggleQuestionCompletion","data-analytics-attrs":em,className:"complete ".concat(f===D.mT.Complete&&"complete-active"),children:"Mark complete"})]}),Q&&(0,r.jsx)(z.u_,{onClose:()=>{J(null)},...ep[Q].props,children:ep[Q].children}),ei&&(0,r.jsx)(z.nb,{contentAccess:{isAccessible:!1,reason:c.KG.RequiresPaid},showTeacherPage:!1,onClose:()=>ea(!1)})]})};var em=t(88896),ep=t(12667),ex=t(68696),eh=t(55288),eg=t(36670),ek=t(99370),ey=t(15631),eb=t(24502),ev=t(77458),ef=t(97487),ej=t(39794),eC=t.n(ej),eS=t(25619),ew=t(82066),eI=t(78630),eZ=t(6804),eE=t(84217);function eN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something went wrong, please try again later.";eb.A9.error(e)}let eF=e=>{let{images:n,content:t,parts:i,subjectId:a,contextEntityId:s,accessContextType:d,audioClips:u}=e,{api:m}=(0,eS.Qy)(),[p,x]=(0,o.useState)(0),[h,g]=(0,o.useState)({}),[k,y]=(0,o.useState)(!0),[b,v]=(0,o.useState)(!1),[f,j]=(0,o.useState)({isAccessible:!1,reason:c.KG.RequiresFree}),[C,S]=(0,o.useState)({}),[w,I]=(0,o.useState)(!1),{data:Z,refetch:E}=(0,ew.useQuery)(eS.iP.newtonUsesRemainingForSubject(a),async()=>{let{data:{getFeedbackResponseUsesRemainingV2:e}}=await m.aitutor.query({query:ef.Kh,variables:{subjectId:a}});return e}),{numUsesRemaining:N,allocationType:F}=null!=Z?Z:{},T=(0,o.useCallback)(e=>{j(e),v(!0)},[]);(0,o.useLayoutEffect)(()=>{y(M()(h)||eC()(h,e=>"<p></p>"===e))},[h]);let R=(0,o.useCallback)(()=>{y(!1),I(!1)},[]),_=(0,o.useCallback)(e=>{eN(e),R()},[R]),U=(0,o.useCallback)(e=>{S(n=>({...n,[e.entityId]:e.feedback})),R(),E()},[R,E]),[P]=(0,eI.v)({onError:_,onSuccess:U}),A=()=>{if("number"==typeof N&&N<=0){F===ev.aj.AllTime?T({isAccessible:!1,reason:c.KG.RequiresPaid}):eN("You have used up all your Newton AI feedback uses for the month. Please contact us for more information");return}y(!0),I(!0),S({});let e=(0,eZ.Z)();h&&Object.keys(h).map(n=>{var t;P({query:null!==(t=h[n])&&void 0!==t?t:"",subjectId:a,entityId:n,entityType:ev.lD.QuestionPart,contextEntityId:s,contextType:d,transactionId:e})})};return(0,r.jsxs)(r.Fragment,{children:[b&&(0,r.jsx)(z.nb,{onClose:()=>{v(!1)},contentAccess:f,showTeacherPage:!1}),(0,r.jsx)(l.Z,{display:{xs:"none",md:"block"},height:"100%",overflow:"hidden",children:(0,r.jsxs)(ea.ZP,{container:!0,height:"100%",overflow:"auto",flexWrap:"nowrap",children:[(0,r.jsx)(ea.ZP,{item:!0,md:6,children:(0,r.jsx)(eT,{images:n,content:t,audioClips:u})}),(0,r.jsx)(em.Z,{orientation:"vertical",flexItem:!0,sx:{mr:"-1px"}}),(0,r.jsx)(ea.ZP,{item:!0,md:6,p:2,children:(0,r.jsx)(eR,{usesRemaining:N,parts:i,userAnswers:h,setUserAnswers:g,isSubmitDisabled:k,isFeedbackLoading:w,handleSubmit:A,feedback:C})})]})}),(0,r.jsxs)(l.Z,{display:{xs:"block",md:"none"},children:[(0,r.jsxs)(ep.Z,{value:p,onChange:(e,n)=>x(n),variant:"fullWidth",children:[(0,r.jsx)(ex.Z,{label:"Question"}),(0,r.jsx)(ex.Z,{label:"Newton AI"})]}),0===p&&(0,r.jsx)(eT,{images:n,content:t}),1===p&&(0,r.jsx)(l.Z,{p:2,children:(0,r.jsx)(eR,{usesRemaining:N,parts:i,userAnswers:h,setUserAnswers:g,isSubmitDisabled:k,isFeedbackLoading:w,handleSubmit:A,feedback:C})})]})]})},eT=e=>{let{images:n,content:t,audioClips:i}=e;return(0,r.jsx)(q,{sx:{"&>div":{fontSize:{xs:"12px",sm:"13px",md:"14px",xmd:"15px",lg:"16px",xl:"17px"},position:"relative",pr:"20px"},overflow:"auto",p:2},value:t,variant:"ib",images:n,audioClips:i})},eR=e=>{let{usesRemaining:n,parts:t,userAnswers:i,setUserAnswers:a,isSubmitDisabled:o,isFeedbackLoading:l,handleSubmit:c,feedback:u}=e,m=(0,s.Z)(),p=(e,n)=>{let t={...i};t[e]=n,a(t)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(B.Z,{direction:"row",alignItems:"center",pb:1,children:[(0,r.jsx)(d.Z,{variant:"p-sm-semibold",flex:"1",children:"Enter your answer below:"}),(0,r.jsxs)(B.Z,{spacing:.5,direction:"row",alignItems:"center",children:[(0,r.jsxs)(d.Z,{variant:"p-xs-rg",color:"text.secondary",children:["Uses left: ",null!=n?n:"-"]}),(0,r.jsx)(O.Z,{title:"Your RV Gold membership comes with 200 free uses of RV Newton AI",arrow:!0,children:(0,r.jsx)(eg.Z,{fontSize:"small",sx:{fill:m.palette.gold[500]}})})]})]}),(0,r.jsx)(d.Z,{variant:"p-sm-rg",gutterBottom:!0,color:"text.secondary",children:"Attempt your answer here and check it with RV Newton AI"}),(0,r.jsx)(B.Z,{spacing:2,children:t.map(e=>{var n,t,a;return(0,r.jsxs)(B.Z,{children:[(0,r.jsxs)(B.Z,{spacing:1,mt:1,children:[e.name&&""!==e.name&&(0,r.jsx)(d.Z,{variant:"p-md-md",children:e.name}),(0,r.jsx)(ey.H4,{editorKey:e.id,entityId:e.id,entityType:eE.GI.UserQuestionPartAnswer,content:null!==(t=i[e.id])&&void 0!==t?t:"<p></p>",updateContent:n=>p(e.id,n),sx:{fontSize:m.typography["p-sm-rg"].fontSize},editable:!l,questionImageUrl:e.image?null===(n=e.image)||void 0===n?void 0:n.url:void 0})]}),!M()(u)&&u[e.id]&&""!==u[e.id]&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(B.Z,{spacing:.5,mt:3,sx:{backgroundColor:m.palette.warning[100],borderRadius:2,p:1},children:[(0,r.jsx)(d.Z,{variant:"p-xs-rg",textAlign:"center",children:"This response is AI generated. Accuracy is not guaranteed."}),(0,r.jsx)(d.Z,{variant:"p-xs-rg",textAlign:"center",children:(0,r.jsx)(x(),{href:"https://docs.google.com/forms/d/e/1FAIpQLSeiKNObUZibTnRDljXsvnyC4oorgP3sr-VEIwF0D6A6SkUO8g/viewform",target:"_blank",children:"Give us feedback on Newton AI"})})]}),(0,r.jsx)(B.Z,{spacing:2,mt:2,children:(0,r.jsx)(e_,{content:null!==(a=u[e.id])&&void 0!==a?a:""},"feedback-".concat(e.id))})]})]},e.id)})}),(0,r.jsx)(z.zx,{variant:"ghost-md",onClick:c,startIcon:l?void 0:(0,r.jsx)(X.JY,{sx:{mr:.5}}),disabled:o,fullWidth:!0,sx:{my:2,borderRadius:2,color:m.palette.indigo[500]},children:(0,r.jsx)(z.aN,{isLoading:l,size:20,sx:{margin:"auto",mt:.5,color:m.palette.indigo[200]},children:"Check with RV Newton"})})]})},e_=e=>{let{key:n,content:t}=e,i=(0,s.Z)();return(0,r.jsxs)(B.Z,{spacing:{xs:2,lg:2.5},direction:"row",position:"relative",children:[(0,r.jsx)(eh.Z,{src:ek.HT.src,alt:"RV Newton AI",sx:{width:{xs:30,lg:40},height:{xs:30,lg:40}}}),(0,r.jsxs)(B.Z,{sx:{backgroundColor:i.palette.background.default,width:"100%",borderRadius:1.5,"&:before":{content:'""',position:"absolute",borderRadius:1,borderTop:"16px solid ".concat(i.palette.background.default),borderLeft:"20px solid transparent",borderBottom:"16px solid transparent",marginLeft:"-16px"}},children:[(0,r.jsx)(d.Z,{variant:"p-sm-semibold",p:i.spacing(1,0,0,2),zIndex:1,children:"Newton AI"}),(0,r.jsx)(ey.H4,{editorKey:n,editable:!1,content:t,sx:{fontSize:12}})]})]})},eU=e=>{let{isAllowed:n,mobileBreakpoint:t="md",desktopBoxSxProps:i={},typographySxProps:a={},IconSxProps:o={},mobileBoxSxProps:c={}}=e,u=(0,s.Z)(),m=n?k.Xk:k.tY;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{display:"flex",alignItems:"center",justifyContent:"center",py:.5,px:1,sx:{borderRadius:u.spacing(.5),bgcolor:"#E1F0FC",display:"none",height:"24px",...i,...!1!==t?{[u.breakpoints.up(t)]:{display:"flex"}}:{}},children:(0,r.jsx)(d.Z,{textAlign:"center",variant:"p-xs-semibold",textTransform:"uppercase",color:"#579BE3",fontSize:"0.6875rem",lineHeight:"1rem",sx:a,children:n?"calculator":"no calculator"})}),(0,r.jsx)(l.Z,{sx:{display:"flex",color:n?"#579BE3":u.palette.grey[500],svg:{color:"inherit"},...c,...!1!==t?{[u.breakpoints.up(t)]:{display:"none"}}:{}},children:(0,r.jsx)(m,{width:"20",height:"20",fontSize:"small",sx:o})})]})};var eP=t(12053),eM=t(74324),eA=t(6918),eQ=t(66374),eq=t(91735),ez=t(68192),eD=t(76480);let eL=e=>{let{onClick:n}=e;return(0,r.jsx)(O.Z,{title:"Give us feedback on this question",children:(0,r.jsx)(W.Z,{onClick:n,sx:{padding:0,height:"20px",width:"44px",":hover":{background:"none"}},children:(0,r.jsx)(X.Wt,{sx:{fontSize:"44px"}})})})},eB=e=>{let{onClick:n,analyticsAttrs:t}=e;return(0,r.jsx)(W.Z,{onClick:n,"data-analytics-on":"click","data-analytics-name":"clickQuestionFullscreen","data-analytics-attrs":t,sx:{mr:-1},children:(0,r.jsx)(eD.Z,{fontSize:"small"})})};(i=a||(a={})).Revisit="Revisit",i.Complete="Complete";let eO={Revisit:{activeIconElm:(0,r.jsx)(eq.Z,{}),inactiveIconElm:(0,r.jsx)(eQ.Z,{}),label:"Revisit",tooltip:"Revisit",activeColor:"#032254"},Complete:{activeIconElm:(0,r.jsx)(eA.Z,{}),inactiveIconElm:(0,r.jsx)(eM.Z,{}),label:"Complete",activeColor:ez.h1.success[500],tooltip:"Mark as Complete"}},eW=e=>{let{isActive:n,typeName:t,sx:i,...a}=e,{activeIconElm:o,inactiveIconElm:s,label:l,activeColor:c,tooltip:u}=eO[t],m=n?c:"#596D8E";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{sx:{display:{xs:"flex",xmd:"none"},flexBasis:"92px",color:m,"& svg":{fontSize:"16px"},...null!=i?i:{}},...a,size:"small",startIcon:n?o:s,children:(0,r.jsx)(d.Z,{variant:"p-xs-semibold",lineHeight:"1rem",textTransform:"capitalize",color:m,children:l})}),(0,r.jsx)(O.Z,{title:u,enterDelay:500,arrow:!0,TransitionComponent:eP.Z,TransitionProps:{timeout:600},placement:"top",componentsProps:{tooltip:{sx:{backgroundColor:"#032254",".MuiTooltip-arrow":{color:"#032254"}}}},children:(0,r.jsx)(W.Z,{sx:{display:{xmd:"flex",xs:"none"},color:m,"& svg":{fontSize:"20px"},width:"32px"},...a,children:n?o:s})})]})},eV=e=>{let{label:n,bgColor:t,sx:i,typographyVariant:a,count:o,...s}=e;return(0,r.jsxs)(h.Z,{sx:{justifyContent:"flex-start",p:1.5,color:"#596D8E",borderRadius:"8px",path:{fill:"#596D8E"},"&& svg":{fontSize:"16px"},"&:hover":{color:"#032254",bgcolor:t,path:{fill:"#032254"}},bgcolor:t,...null!=i?i:{}},...s,children:[(0,r.jsx)(d.Z,{variant:null!=a?a:"p-sm-semibold",lineHeight:"1.25rem",textTransform:"capitalize",children:n}),!!o&&(0,r.jsx)(B.Z,{width:"20px",height:"20px",borderRadius:"100%",justifyContent:"center",bgcolor:"#fff",ml:"auto",fontWeight:400,children:(0,r.jsx)(d.Z,{variant:"p-xs-rg",lineHeight:"1rem",children:o})})]})},eH=e=>{let{children:n}=e;return(0,r.jsx)(J.Z,{elevation:0,sx:{display:"flex",borderRadius:"16px",boxSizing:"border-box",p:0,flexDirection:{xs:"column",xmd:"row"}},children:n})},eG=e=>{let{children:n}=e;return(0,r.jsx)(B.Z,{flexDirection:"row",height:"48px",justifyContent:"space-between",alignItems:"center",px:{xs:2,sm:2,md:2,lg:3},py:1.5,children:n})},e$=e=>{let{children:n}=e;return(0,r.jsx)(B.Z,{flexBasis:{xmd:"232px"},boxSizing:"border-box",px:2,py:{xmd:3,md:2,sm:2,xs:2},gap:3,children:n})},eY=e=>{let{sx:n}=e;return(0,r.jsx)(em.Z,{sx:{borderColor:"#F4F4F4",borderWidth:"0 0 2px 0",flexGrow:0,...null!=n?n:{}}})},eX=e=>{let{sx:n}=e;return(0,r.jsx)(em.Z,{orientation:"vertical",flexItem:!0,sx:{borderColor:"#F4F4F4",borderWidth:"0 2px 0 0",flexGrow:0,...null!=n?n:{}}})},eK=(0,o.memo)(function(e){var n;let{id:t,index:i,parts:u,reference:m,content:p,markScheme:x,subjectId:g,calculatorAllowed:k,formulaBooklet:y,images:b,difficulty:v,completionStatus:f,toRevisit:j,onDoneClick:C,onRevisitClick:S,goldAccess:w,allowNewton:I=!0,showHeader:Z=!0,showSolutions:E=!0,gateSolutions:N=!1,contextEntityId:F,contextEntityType:T,canSeeVideoSolutions:R,accessContextType:_,audioClips:U}=e,{user:P}=(0,L.v$)(),M=(0,s.Z)(),{content:A,markScheme:Q}=(0,K.Ei)({useEncryption:e.useEncryption,requestId:e.useEncryption?e.ephemeralId:"",encryptedContent:p,encryptedMarkScheme:x}),[O,W]=(0,o.useState)(),[V,H]=(0,o.useState)(null),[G,$]=(0,o.useState)(!1),[J,ee]=(0,o.useState)(c.KG.RequiresPaid),et=u.filter(e=>e.video_solution_id),ei=w||(null==P?void 0:P.type)===D.FW.Admin,ea=()=>{null==C||C(t,f===D.mT.Incomplete?D.mT.Complete:D.mT.Incomplete)},er=()=>{let e=K.jy.Add;j&&(e=K.jy.Remove),null==S||S(t,e)},eo="Question ".concat(i+1).concat((null==P?void 0:P.type)===D.FW.Admin?" (".concat(m,")"):""),es="questionId:".concat(t,",questionRef:").concat(m),ed={question:{props:{analyticsName:"question",analyticsAttrs:es,open:"question"===V,title:eo,disableMobileDrawer:!0,containerStyle:{maxWidth:M.spacing(180)}},children:(0,r.jsx)(q,{sx:{"&>div":{fontSize:{xs:"12px",sm:"14px",md:"16px",lg:"18px",xl:"20px"},position:"relative",pr:{xs:2,md:10}},width:"100%",maxWidth:"100vw",overflow:"auto",p:{xs:2,sm:3,md:2}},value:A,variant:"ib",images:b,audioClips:U})},markScheme:{props:{analyticsName:"markScheme",analyticsAttrs:es,open:"markScheme"===V,title:eo,scrollable:!1,containerStyle:{maxWidth:M.spacing(180),width:{xs:"100%",md:"95%",xl:"95%"},height:{xs:"90%"},display:"flex",flexDirection:"column"}},children:(0,r.jsx)(el,{images:b,markScheme:Q,content:A,audioClips:U})},formulaBooklet:{props:{analyticsName:"formulaBooklet",analyticsAttrs:es,open:"formulaBooklet"===V,title:eo,scrollable:!1,containerStyle:{display:"flex",flexDirection:"column",width:{xs:"100%",md:"95%",xl:"95%"},height:{xs:"90%"}}},children:(0,r.jsx)(z.Xu,{url:null!==(n=null==y?void 0:y.url)&&void 0!==n?n:"",downloadFilename:null==y?void 0:y.filename})},solution:{props:{analyticsName:"solution",analyticsAttrs:es,open:"solution"===V,title:eo,containerStyle:{width:{xs:"100%",md:"90%",xl:"60%"}}},children:(0,r.jsx)(en,{questionId:t,subjectId:g,questionIndex:i,parts:et,selectedPart:O,onSelect:W,contextEntityId:F,contextEntityType:T})},feedback:{props:{analyticsName:"feedback",analyticsAttrs:es,open:"feedback"===V,containerStyle:{width:{xs:"100%",md:"90%",xl:"60%"},height:{xs:"90%"}}},children:(0,r.jsx)(Y.Zc,{reference:m,subjectId:g,user:P})},ai:{props:{analyticsName:"ai",analyticsAttrs:es,open:"ai"===V,title:eo,containerStyle:{display:"flex",flexDirection:"column",width:{xs:"100%",md:"90%",xl:"80%"},height:{xs:"90%"}}},children:(0,r.jsx)(eF,{contextEntityId:F,accessContextType:_,images:b,content:A,parts:u,subjectId:g,audioClips:U})}};return(0,r.jsxs)(l.Z,{id:t,children:[Z&&(0,r.jsxs)(B.Z,{direction:"row",justifyContent:"space-between",sx:{mb:1.5,px:1},children:[(0,r.jsx)(l.Z,{display:"flex",alignItems:"center",children:(0,r.jsxs)(d.Z,{variant:"h5-bold",children:["Question ",i+1]})}),(0,r.jsx)(eL,{onClick:()=>H("feedback")})]}),(0,r.jsxs)(eH,{children:[(0,r.jsxs)(B.Z,{flexBasis:{xmd:"920px"},boxSizing:"border-box",flexDirection:"column",children:[(0,r.jsxs)(eG,{children:[(0,r.jsx)(l.Z,{children:null!==k&&(0,r.jsx)(eU,{isAllowed:k,mobileBreakpoint:"xmd"})}),v&&(0,r.jsx)(Y.Sv,{...v,sx:{mr:2}}),(0,r.jsx)(eB,{analyticsAttrs:es,onClick:()=>{H("question")}})]}),(0,r.jsx)(eY,{}),(0,r.jsx)(q,{sx:{"&>div":{fontSize:{xs:"10px",sm:"13px",md:"14px",xmd:"15px",lg:"16px",xl:"17px"},position:"relative"},overflow:"hidden",py:3,px:{xs:2,sm:2,md:2,lg:3}},value:A,variant:"ib",images:b,audioClips:U})]}),(0,r.jsx)(eX,{sx:{display:{md:"none",xmd:"flex"}}}),(0,r.jsx)(eY,{sx:{display:{lg:"none",xl:"none"},mt:5}}),(0,r.jsxs)(e$,{children:[(0,r.jsxs)(B.Z,{flexDirection:"row",justifyContent:{xmd:"space-around",md:"center",sm:"center",xs:"center"},height:"32px",children:[!!S&&(0,r.jsx)(eW,{typeName:a.Revisit,isActive:!!j,onClick:()=>{w?er():($(!0),ee(c.KG.RequiresPaid))},"data-analytics-on":"click","data-analytics-name":"toggleQuestionRevisit","data-analytics-attrs":es,sx:{flexBasis:"80px",mr:.5}}),!!S&&!!C&&(0,r.jsx)(eX,{sx:{borderColor:"#E8E8E8",borderWidth:"0 1px 0 0"}}),!!C&&(0,r.jsx)(eW,{typeName:a.Complete,isActive:f===D.mT.Complete,onClick:()=>{P?ea():($(!0),ee(c.KG.RequiresFree))},"data-analytics-on":"click","data-analytics-name":"toggleQuestionCompletion","data-analytics-attrs":es,sx:{ml:1}})]}),(0,r.jsxs)(B.Z,{gap:1,children:[(0,r.jsx)(eV,{bgColor:"#D4EAF8",startIcon:(0,r.jsx)(X.hu,{}),label:"Mark Scheme",onClick:()=>H("markScheme"),"data-analytics-on":"click","data-analytics-name":"clickMarkScheme","data-analytics-attrs":es}),et.length>0&&E&&(0,r.jsx)(eV,{bgColor:"rgba(212, 234, 248, 0.5)",startIcon:(0,r.jsx)(X.Np,{}),label:"Video Solutions",count:et.length,onClick:()=>{N&&!(w||R)?($(!0),ee(c.KG.RequiresPaid)):(H("solution"),W(et[0]))},"data-analytics-on":"click","data-analytics-name":"clickSolutions","data-analytics-attrs":es}),I&&(0,r.jsx)(eV,{bgColor:"#F4F4F4",startIcon:(0,r.jsx)(X.QM,{}),label:"Newton AI",onClick:()=>{if(!ei){$(!0),ee(c.KG.RequiresPaid);return}H("ai")},"data-analytics-on":"click","data-analytics-name":"clickRVNewton","data-analytics-attrs":es}),y&&(0,r.jsx)(h.Z,{sx:{p:1.5,color:"#596D8E","&:hover":{color:"#032254",span:{borderColor:"#032254"},bgcolor:"transparent"}},onClick:()=>H("formulaBooklet"),"data-analytics-on":"click","data-analytics-name":"clickFormulaBooklet","data-analytics-attrs":es,children:(0,r.jsx)(d.Z,{variant:"p-sm-rg",lineHeight:"1.25rem",textTransform:"capitalize",children:(0,r.jsx)("span",{style:{borderColor:"#596D8E",borderWidth:"0 0 1px 0",borderStyle:"solid"},children:"Formula Booklet"})})})]})]})]}),V&&(0,r.jsx)(z.u_,{onClose:()=>{H(null)},...ed[V].props,children:ed[V].children}),G&&J&&(0,r.jsx)(z.nb,{contentAccess:{isAccessible:!1,reason:J},showTeacherPage:!1,onClose:()=>{$(!1),ee(null)}})]})});var eJ=t(3440),e0=t.n(eJ),e4=t(16760),e1=t.n(e4),e5=t(52519),e2=t(78315),e3=t(16962),e6=t(76635),e8=t.n(e6),e7=t(11228),e9=t(1676),ne=t(47591),nn=t(27676),nt=t(86404),ni=t(92771),na=t(95406);let nr=e=>{let{color:n,revisit:t=!1}=e;return(0,r.jsx)(l.Z,{sx:{position:"absolute",bottom:0,right:0,width:e=>e.spacing(2.25),height:e=>e.spacing(2.25),borderRadius:"50%",background:"inherit"},children:t?(0,r.jsx)(X.CC,{htmlColor:n,fontSize:"small"}):(0,r.jsx)(X.g4,{htmlColor:n,fontSize:"small"})})},no=e=>{let{id:n,label:t,onClick:i,difficultyLevel:a,completed:o=!1,revisit:u=!1,htmlColor:m,selected:p,labelColor:x,backgroundColor:h}=e,g=(0,s.Z)(),k=null!=m?m:g.palette.success.main;return a&&(k=({[c.Qg.Easy]:g.palette.success.main,[c.Qg.Medium]:g.palette.warning.main,[c.Qg.Hard]:g.palette.error.main})[a]),(0,r.jsxs)(l.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",onClick:()=>i(n),"data-analytics-on":"click","data-analytics-name":"clickQuestionAnchor","data-analytics-attrs":"questionId:".concat(n),sx:{height:g.spacing(6.25),width:g.spacing(6.25),cursor:"pointer",border:"2px solid",borderColor:k,borderRadius:"50%",background:h||(p?k:"#fff"),position:"relative"},children:[(0,r.jsx)(d.Z,{variant:"p-sm-bold",sx:{margin:"auto"},color:null!=x?x:void 0,children:t}),o&&(0,r.jsx)(nr,{color:k}),u&&(0,r.jsx)(nr,{color:k,revisit:!0})]})};var ns=t(86732),nl=t(3931),nd=t(41859);let nc=e=>{let{label:n,headerBackgroundColor:t,children:i,onClose:a,...o}=e,l=(0,s.Z)();return(0,r.jsxs)(ns.ZP,{disableRestoreFocus:!0,anchor:"bottom",sx:{["& .".concat(nl.Z.paper)]:{borderTopLeftRadius:l.spacing(4),borderTopRightRadius:l.spacing(4),boxShadow:"inset 0px -0.5px 0px rgba(170, 170, 170, 0.6);",overflowY:"hidden",pb:4}},onClose:a,...o,children:[(0,r.jsxs)(B.Z,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",p:l.spacing(2,3,1,3),bgcolor:t,children:[(0,r.jsx)(d.Z,{variant:"p-md-semibold",color:"black",children:n}),(0,r.jsx)(W.Z,{onClick:()=>null==a?void 0:a({},"backdropClick"),children:(0,r.jsx)(nd.Z,{fontSize:"small",sx:{color:l.palette.common.black}})})]}),(0,r.jsx)(B.Z,{p:2,sx:{overflowY:"auto",scrollbarWidth:"thin",maxHeight:"70vh"},children:i})]})};var nu=t(44781),nm=t(59564),np=t(49536),nx=t(15794);let nh=(0,nu.ZP)(nm.Z,{shouldForwardProp:e=>"headerHighlightColor"!==e})(e=>{let{theme:n,headerHighlightColor:t}=e;return{"& .MuiToggleButtonGroup-grouped:not(:first-of-type)":{marginLeft:0},"> .MuiToggleButton-root":{backgroundColor:n.palette.common.white,borderColor:t,color:n.palette.common.black,"&.Mui-selected":{backgroundColor:t,color:n.palette.getContrastText(t),"&:hover":{backgroundColor:(0,ne._j)(t,.2)}}}}}),ng=(0,nu.ZP)(np.Z)({textTransform:"none"}),nk=(0,nu.ZP)(nx.Z,{shouldForwardProp:e=>"headerHighlightColor"!==e})(e=>{let{theme:n,headerHighlightColor:t}=e;return{backgroundColor:n.palette.common.white,"& .MuiOutlinedInput-notchedOutline":{borderColor:t},"& .MuiSelect-select":{paddingTop:8,paddingBottom:8,...n.typography["p-sm-semibold"],color:n.palette.common.black}}}),ny=(0,nu.ZP)(e9.Z,{shouldForwardProp:e=>!["headerColor","headerHighlightColor"].includes(e.toString())})(e=>{let{theme:n,headerColor:t,headerHighlightColor:i}=e;return{padding:n.spacing(2),"&.Mui-selected":{backgroundColor:i,color:n.palette.getContrastText(i),"&:hover, &:focus":{backgroundColor:(0,ne._j)(i,.2),color:n.palette.getContrastText(i)}},"&:hover":{backgroundColor:t[50],color:n.palette.getContrastText(t[50])}}}),nb=e=>{let{filtersState:n,onFilterChange:t,mockExamPaperProps:i,papers:a,types:c,anchorProps:u,hideJumpTo:m=!1,hideCompletenessFilter:p=!1,bottomPanel:x}=e,h=(0,s.Z)(),[g,k]=(0,o.useState)(null),[y,b]=(0,o.useState)(!1),[v,f]=(0,o.useState)(!1),j=null==i?void 0:i.mockExamPapers.find(e=>e.id===i.selectedMockExamPaperId);return u?(0,r.jsxs)(B.Z,{spacing:6,mt:j||x?-3:0,alignItems:"flex-start",children:[j&&(0,r.jsx)(nC,{mockExamPaper:j}),x,(0,r.jsxs)(B.Z,{direction:"row",pb:3,children:[(0,r.jsxs)(B.Z,{display:{xs:"none",md:"flex"},direction:"row",gap:3,flexWrap:"wrap",zIndex:1,children:[i&&(0,r.jsxs)(B.Z,{spacing:1,children:[(0,r.jsx)(d.Z,{variant:"p-sm-semibold",color:h.palette.common.black,children:"Paper"}),(0,r.jsx)(nj,{...i})]}),(0,r.jsx)(nf,{filtersState:n,onChange:t,papers:a,hideCompletenessFilter:p,types:c}),!m&&(0,r.jsx)(nv,{onClick:e=>k(e.currentTarget),Icon:nn.Z,sx:{alignSelf:"flex-end",zIndex:1},children:"Jump to"})]}),(0,r.jsxs)(B.Z,{display:{xs:"flex",md:"none"},direction:{xs:"column",sm:"row"},gap:1,width:"100%",children:[i&&(0,r.jsx)(nj,{...i,sx:{width:{sm:150},zIndex:1}}),(0,r.jsxs)(B.Z,{direction:"row",gap:1,zIndex:1,children:[(0,r.jsx)(nv,{onClick:()=>b(!0),Icon:nt.Z,sx:{width:{xs:140,sm:150}},children:"Filters"}),!m&&(0,r.jsx)(nv,{onClick:()=>f(!0),Icon:nn.Z,sx:{width:{xs:140,sm:150}},children:"Jump to"})]})]}),(0,r.jsx)(nc,{label:"Filters",headerBackgroundColor:h.palette.grey[50],open:y,onClose:()=>b(!1),children:(0,r.jsx)(B.Z,{spacing:3,children:(0,r.jsx)(nf,{filtersState:n,onChange:t,papers:a,types:c,hideCompletenessFilter:p})})}),(0,r.jsx)(nc,{label:"Jump to",headerBackgroundColor:h.palette.grey[50],open:v,onClose:()=>f(!1),children:(0,r.jsx)(l.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:u.map(e=>(0,r.jsx)(no,{...e,onClick:()=>{e.onClick(e.id),f(!1)}},e.id))})}),(0,r.jsx)(e7.ZP,{anchorEl:g,open:!!g,onClose:()=>k(null),anchorOrigin:{vertical:42,horizontal:"left"},PaperProps:{sx:{borderRadius:2,boxShadow:1,border:"1px solid ".concat(h.palette.grey[200]),maxHeight:400}},children:(0,r.jsx)(l.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:.5,p:2},children:u.map(e=>(0,r.jsx)(no,{...e,onClick:()=>{e.onClick(e.id),k(null)}},e.id))})})]})]}):null},nv=e=>{let{children:n,Icon:t,sx:i,...a}=e,{highlightColor:o}=(0,na.oI)(),l=(0,s.Z)();return(0,r.jsx)(h.Z,{variant:"white-md",sx:{height:36,px:4,border:"none",color:l.palette.common.black,...i},startIcon:(0,r.jsx)(t,{sx:{color:o}}),...a,children:n})},nf=e=>{let{filtersState:n,onChange:t,papers:i,hideCompletenessFilter:a,types:o}=e,{highlightColor:u}=(0,na.oI)(),m=(0,s.Z)(),p=(null!=i?i:[]).map(e=>({value:e.id,label:e.reference})),x=o.map(e=>({value:e,label:(0,K.Pz)(e)})),h=Object.entries(c.Qg).map(e=>{let[n,t]=e;return{label:e8().capitalize(n),value:t}});return(0,r.jsxs)(r.Fragment,{children:[o&&o.length>1&&(0,r.jsxs)(B.Z,{spacing:1,children:[(0,r.jsx)(d.Z,{variant:"p-sm-semibold",color:m.palette.common.black,children:"Question Type"}),(0,r.jsxs)(z.Ph,{labelId:"question-type-label",multiple:!0,value:n.types,displayEmpty:!0,onChange:e=>{let i=e.target.value;if(i.includes("All")||(0,e6.intersection)(i,o).length===o.length){t({...n,types:[]});return}t({...n,types:i})},label:"Type",size:"small",sx:{backgroundColor:m.palette.common.white},renderValue:e=>0===e.length?(0,r.jsx)(d.Z,{variant:"p-sm-semibold",children:"All"}):(0,r.jsx)(l.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.length>2?(0,r.jsxs)(d.Z,{variant:"p-sm-semibold",children:[e.length," selected"]}):e.map(e=>(0,r.jsx)(d.Z,{variant:"p-sm-semibold",children:e},e))}),children:[(0,r.jsx)(e9.Z,{value:"All",children:"All"}),x.map(e=>(0,r.jsx)(e9.Z,{value:e.value,children:e.label},e.value))]})]}),i&&i.length>0&&(0,r.jsxs)(B.Z,{spacing:1,children:[(0,r.jsx)(d.Z,{variant:"p-sm-semibold",color:m.palette.common.black,children:"Paper"}),(0,r.jsx)(z.NU,{options:p,defaultOptions:n.papers,onSelect:e=>t({...n,papers:e}),sx:{height:36},selectedColor:u})]}),(0,r.jsxs)(B.Z,{spacing:1,children:[(0,r.jsx)(d.Z,{variant:"p-sm-semibold",color:m.palette.common.black,children:"Difficulty"}),(0,r.jsx)(z.NU,{options:h,defaultOptions:n.difficulty,onSelect:e=>t({...n,difficulty:e}),sx:{height:36},selectedColor:u})]}),!a&&(0,r.jsxs)(B.Z,{spacing:1,children:[(0,r.jsx)(d.Z,{variant:"p-sm-semibold",color:m.palette.common.black,children:"View"}),(0,r.jsxs)(nh,{exclusive:!0,sx:{backgroundColor:m.palette.common.white,height:36,borderRadius:m.spacing(6.25),"& .MuiButtonBase-root":{border:"none !important",p:m.spacing(1,1.5),background:"transparent"},"& .Mui-selected":{background:u},"& .MuiToggleButtonGroup-grouped:not(:first-of-type)":{borderLeft:"1px solid ".concat((0,ne.$n)(u,.8)," !important")},"& .MuiToggleButtonGroup-grouped:first-of-type":{borderTopLeftRadius:m.spacing(6.25),borderBottomLeftRadius:m.spacing(6.25)},"& .MuiToggleButtonGroup-grouped:last-of-type":{borderTopRightRadius:m.spacing(6.25),borderBottomRightRadius:m.spacing(6.25)}},onChange:(e,i)=>{t({...n,status:"all"===i?[]:[i]})},value:n.status,headerHighlightColor:u,children:[(0,r.jsx)(ng,{value:"all",selected:0===n.status.length,children:"All"}),(0,r.jsx)(ng,{value:D.mT.Complete,children:"Complete"}),(0,r.jsx)(ng,{value:D.mT.Incomplete,children:"Incomplete"})]})]})]})},nj=e=>{let{mockExamPapers:n,selectedMockExamPaperId:t,onMockExamPaperChange:i,sx:a}=e,{color:o,highlightColor:l}=(0,na.oI)(),c=(0,s.Z)(),u=e=>{let t=n.findIndex(n=>n.id===e);i(n[t])};return(0,r.jsx)(nk,{onChange:e=>u(e.target.value),value:t,size:"small",headerHighlightColor:l,renderValue:e=>{var t,i;return null!==(i=null===(t=n.find(n=>n.id===e))||void 0===t?void 0:t.name)&&void 0!==i?i:""},sx:{...a,outline:"none",borderRadius:c.spacing(6.25),border:"none","& fieldset":{border:"none"}},MenuProps:{anchorOrigin:{horizontal:"right",vertical:42},transformOrigin:{horizontal:"right",vertical:"top"},MenuListProps:{sx:{py:0}}},children:n.map(e=>(0,r.jsx)(ny,{value:e.id,headerColor:o,headerHighlightColor:l,children:(0,r.jsxs)(B.Z,{spacing:1,children:[(0,r.jsx)(d.Z,{variant:"p-sm-semibold",color:n=>e.id===t?n.palette.common.white:n.palette.common.black,children:e.name}),(0,r.jsxs)(B.Z,{direction:"row",spacing:1,children:[(0,r.jsxs)(B.Z,{direction:"row",spacing:.5,children:[(0,r.jsx)(ni.Z,{fontSize:"small"}),(0,r.jsx)(d.Z,{variant:"p-sm-semibold",color:"inherit",children:e.num_questions_to_answer||e.questions.length})]}),(0,r.jsxs)(B.Z,{direction:"row",spacing:.5,children:[(0,r.jsx)(X.wG,{fontSize:"small"}),(0,r.jsx)(d.Z,{variant:"p-sm-semibold",color:"inherit",children:(0,b.RC)(e.duration,"min")})]}),(0,r.jsxs)(B.Z,{direction:"row",spacing:.5,children:[(0,r.jsx)(X.hA,{fontSize:"small"}),(0,r.jsx)(d.Z,{variant:"p-sm-semibold",color:"inherit",children:e.total_marks||e.maximum_mark})]})]})]})},e.id))})},nC=e=>{let{mockExamPaper:n,sx:t}=e;return(0,r.jsx)(l.Z,{sx:t,children:(0,r.jsxs)(B.Z,{spacing:1,children:[(0,r.jsx)(d.Z,{variant:"p-md-semibold",textTransform:"uppercase",children:n.name}),(0,r.jsxs)(B.Z,{direction:"row",spacing:2,children:[(0,r.jsxs)(B.Z,{direction:"row",spacing:.5,children:[(0,r.jsx)(ni.Z,{fontSize:"small"}),(0,r.jsx)(d.Z,{variant:"p-sm-semibold",children:(0,b.RC)(n.num_questions_to_answer||n.questions.length,"Question")})]}),(0,r.jsxs)(B.Z,{direction:"row",spacing:.5,children:[(0,r.jsx)(X.wG,{fontSize:"small"}),(0,r.jsx)(d.Z,{variant:"p-sm-semibold",children:(0,b.RC)(n.duration,"min")})]}),(0,r.jsxs)(B.Z,{direction:"row",spacing:.5,children:[(0,r.jsx)(X.hA,{fontSize:"small"}),(0,r.jsx)(d.Z,{variant:"p-sm-semibold",children:(0,b.RC)(n.total_marks||n.maximum_mark,"mark")})]})]})]})})};var nS=t(17625),nw=t(30898),nI=t.n(nw),nZ=t(14204),nE=t(34175);let nN=e=>{let{options:n,value:t,onChange:i}=e,a=(0,s.Z)(),o=n.map(e=>({value:e,label:(0,K.Pz)(e)}));return(0,r.jsx)(nx.Z,{labelId:"question-type-label",multiple:!0,value:t,displayEmpty:!0,onChange:e=>{let t=e.target.value;if(t.includes("All")||nI()(t,n).length===n.length){i([]);return}i(t)},label:"Type",size:"small",sx:{width:{xs:"100%",md:"8rem"},backgroundColor:a.palette.common.white,borderRadius:2,"& .MuiOutlinedInput-notchedOutline":{border:"none"}},MenuProps:{anchorOrigin:{vertical:48,horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},sx:{".MuiPaper-root":{borderRadius:2,boxShadow:1,border:"1px solid ".concat(a.colors.ui.border)},".MuiList-root":{padding:0},".MuiMenuItem-root":{padding:1.5,"&.Mui-selected":{backgroundColor:"transparent","&:hover":{backgroundColor:a.colors.ui.bg_light}},"&:hover":{backgroundColor:a.colors.ui.bg_light}}}},renderValue:e=>{let n=0===e.length||e.length===o.length?"All":1===e.length?e[0]:"".concat(e[0],", +").concat(e.length-1);return(0,r.jsx)(d.Z,{variant:"p-md-rg",children:n})},children:o.map(e=>(0,r.jsxs)(e9.Z,{value:e.value,children:[(0,r.jsx)(nZ.Z,{size:"small",checked:t.includes(e.value),sx:{p:0,pr:1}}),(0,r.jsx)(nE.Z,{primary:e.label,primaryTypographyProps:{variant:"p-sm-rg"}})]},e.value))})};var nF=t(6640);let nT=e=>{let{options:n,...t}=e,i=(0,s.Z)(),{value:a,exclusive:o}=t;return(0,r.jsxs)(nm.Z,{...t,onChange:(e,n)=>{var i,a,r;o?"all"===n?null===(i=t.onChange)||void 0===i||i.call(t,e,null):null===(a=t.onChange)||void 0===a||a.call(t,e,n):null===(r=t.onChange)||void 0===r||r.call(t,e,n)},sx:{borderRadius:2,backgroundColor:i.palette.common.white,width:{xs:"100%",sm:"initial"},...t.sx},children:[o&&(0,r.jsx)(np.Z,{value:"all",sx:{p:i.spacing(1.25,2),border:"none",borderRadius:2,"&:hover":{backgroundColor:i.colors.ui.bg_light},"&.Mui-selected":{backgroundColor:"transparent","&:hover":{backgroundColor:i.colors.ui.bg_light}}},selected:"all"===a,children:(0,r.jsxs)(B.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,r.jsx)(nF.Z,{sx:{p:0,pointerEvents:"none"},size:"small",checked:"all"===a}),(0,r.jsx)(d.Z,{variant:"p-sm-rg",color:i.colors.textIcon.primary,textTransform:"none",children:"All"})]})}),n.map(e=>(0,r.jsx)(np.Z,{value:e.value,sx:{p:i.spacing(1.25,2),border:"none",borderRadius:2,"&:hover":{backgroundColor:i.colors.ui.bg_light},"&.Mui-selected":{backgroundColor:"transparent","&:hover":{backgroundColor:i.colors.ui.bg_light}}},children:(0,r.jsxs)(B.Z,{direction:"row",spacing:1,alignItems:"center",children:[o?(0,r.jsx)(nF.Z,{sx:{p:0,pointerEvents:"none"},size:"small",checked:a===e.value}):(0,r.jsx)(nZ.Z,{sx:{p:0,pointerEvents:"none"},size:"small",checked:a.includes(e.value)}),(0,r.jsx)(d.Z,{variant:"p-sm-rg",color:i.colors.textIcon.primary,textTransform:"none",children:e.label})]})},e.value))]})},nR=e=>{var n,t;let{filtersState:i,onFilterChange:a,papers:o,types:l,hideCompletenessFilter:u=!1}=e,m=(0,s.Z)();return(0,r.jsxs)(B.Z,{direction:{xs:"column",sm:"row"},gap:2,alignItems:"flex-start",flexWrap:"wrap",children:[l.length>1&&(0,r.jsxs)(B.Z,{spacing:1,children:[(0,r.jsx)(d.Z,{variant:"p-sm-rg",color:m.colors.textIcon.sub,children:"Question Type"}),(0,r.jsx)(nN,{options:l,value:i.types,onChange:e=>a({...i,types:e})})]}),o&&o.length>0&&(0,r.jsxs)(B.Z,{spacing:1,children:[(0,r.jsx)(d.Z,{variant:"p-sm-rg",color:m.colors.textIcon.sub,children:"Paper"}),(0,r.jsx)(nT,{value:i.papers,onChange:(e,n)=>a({...i,papers:n}),options:null!==(n=null==o?void 0:o.map(e=>({value:e.id,label:e.reference})))&&void 0!==n?n:[]})]}),(0,r.jsxs)(B.Z,{spacing:1,children:[(0,r.jsx)(d.Z,{variant:"p-sm-rg",color:m.colors.textIcon.sub,children:"Difficulty"}),(0,r.jsx)(nT,{value:i.difficulty,onChange:(e,n)=>a({...i,difficulty:n}),options:Object.entries(c.Qg).map(e=>{let[n,t]=e;return{value:t,label:n}})})]}),!u&&(0,r.jsxs)(B.Z,{spacing:1,children:[(0,r.jsx)(d.Z,{variant:"p-sm-rg",color:m.colors.textIcon.sub,children:"View"}),(0,r.jsx)(nT,{value:null!==(t=i.status[0])&&void 0!==t?t:"all",onChange:(e,n)=>a({...i,status:n?[n]:[]}),options:[{value:D.mT.Complete,label:"Complete"},{value:D.mT.Incomplete,label:"Incomplete"}],exclusive:!0})]})]})},n_=e=>{let{color:n,revisit:t=!1}=e,i=t?X.CC:k.kv;return(0,r.jsx)(i,{sx:{position:"absolute",backgroundColor:"inherit",right:0,bottom:0,fontSize:"0.875rem",borderRadius:"50%"},fill:n})},nU=e=>{let{id:n,label:t,onClick:i,difficultyLevel:a,completed:o,revisit:u=!1,htmlColor:m,selected:p,labelColor:x,backgroundColor:h}=e,g=(0,s.Z)(),k=null!=m?m:g.colors.common.success[300];return a&&(k=({[c.Qg.Easy]:g.colors.common.success[300],[c.Qg.Medium]:g.colors.common.warning[300],[c.Qg.Hard]:g.colors.common.brick[300]})[a]),(0,r.jsxs)(l.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",onClick:()=>i(n),"data-analytics-on":"click","data-analytics-name":"clickQuestionAnchor","data-analytics-attrs":"questionId:".concat(n),sx:{height:"3rem",width:"3rem",cursor:"pointer",border:"1px solid",borderColor:k,borderRadius:"50%",background:h||(p?k:"#fff"),position:"relative"},children:[(0,r.jsx)(d.Z,{variant:"p-sm-bold",sx:{margin:"auto"},color:null!=x?x:void 0,children:t}),o&&(0,r.jsx)(n_,{color:g.colors.common.success[500]}),u&&(0,r.jsx)(n_,{color:k,revisit:!0})]})},nP=e=>{let{color:n}=(0,na.jS)();return(0,r.jsx)(g.Z,{theme:y.rS,children:(0,r.jsx)(l.Z,{sx:{backgroundColor:n[100]},children:(0,r.jsx)(e5.Z,{maxWidth:"xl",children:(0,r.jsx)(nM,{...e})})})})},nM=e=>{let{filtersState:n,onFilterChange:t,types:i,papers:a,anchorProps:d,hideCompletenessFilter:c=!1,hideJumpTo:u=!1}=e,m=(0,s.Z)(),[p,x]=(0,o.useState)(null),[g,y]=(0,o.useState)(!0),[b,v]=(0,o.useState)(!1),[f,j]=(0,o.useState)(!1);return d?(0,r.jsxs)(B.Z,{alignItems:{xs:"stretch",md:"flex-start"},children:[(0,r.jsx)(e7.ZP,{anchorEl:p,open:!!p,onClose:()=>x(null),anchorOrigin:{vertical:42,horizontal:"right"},transformOrigin:{horizontal:"right",vertical:"top"},slotProps:{paper:{sx:{borderRadius:4,boxShadow:1,maxHeight:"25rem"}}},children:(0,r.jsx)(l.Z,{sx:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:1,p:3},children:d.map(e=>(0,r.jsx)(nU,{...e,onClick:()=>{e.onClick(e.id),x(null)}},e.id))})}),(0,r.jsxs)(B.Z,{display:{xs:"none",sm:"flex"},width:"100%",children:[(0,r.jsxs)(B.Z,{direction:"row",spacing:4,alignItems:"center",justifyContent:"space-between",py:2.5,children:[(0,r.jsx)(h.Z,{variant:"inverse",startIcon:(0,r.jsx)(k.k1,{}),endIcon:(0,r.jsx)(k.pO,{sx:{transform:g?"rotate(180deg)":void 0}}),onClick:()=>y(!g),children:"Filters"}),!u&&(0,r.jsx)(h.Z,{variant:"ghost",startIcon:(0,r.jsx)(k.gu,{}),onClick:e=>x(e.currentTarget),children:"Go to Question"})]}),(0,r.jsx)(nS.Z,{in:g,sx:{"& > .MuiCollapse-wrapper":{pt:2,pb:3.5}},children:(0,r.jsx)(nR,{filtersState:n,onFilterChange:t,papers:a,types:i,hideCompletenessFilter:c})})]}),(0,r.jsxs)(B.Z,{display:{xs:"flex",sm:"none"},direction:{xs:"column",sm:"row"},sx:{width:"100dvw",mx:-2},children:[(0,r.jsxs)(B.Z,{direction:"row",zIndex:1,children:[(0,r.jsx)(B.Z,{alignItems:"center",justifyContent:"center",sx:{backgroundColor:m.palette.common.white,border:"1px solid ".concat(m.colors.ui.bg_light)},py:1,width:u?"100%":"50%",children:(0,r.jsx)(h.Z,{variant:"ghost",startIcon:(0,r.jsx)(k.k1,{}),onClick:()=>v(!0),fullWidth:!0,sx:{py:1},children:"Filters"})}),!u&&(0,r.jsx)(B.Z,{alignItems:"center",justifyContent:"center",py:1,width:"50%",sx:{border:"1px solid ".concat(m.colors.ui.bg_light)},children:(0,r.jsx)(h.Z,{variant:"ghost",startIcon:(0,r.jsx)(k.gu,{}),onClick:()=>j(!0),fullWidth:!0,children:"Jump to"})})]}),(0,r.jsx)(nc,{label:"Filters",headerBackgroundColor:m.colors.ui.bg_light,open:b,onClose:()=>v(!1),PaperProps:{sx:{backgroundColor:m.colors.ui.bg_light}},children:(0,r.jsx)(nR,{filtersState:n,onFilterChange:t,papers:a,types:i,hideCompletenessFilter:c})}),(0,r.jsx)(nc,{label:"Go to Question",headerBackgroundColor:m.colors.ui.bg_light,open:f,onClose:()=>j(!1),PaperProps:{sx:{backgroundColor:m.colors.ui.bg_light}},children:(0,r.jsx)(B.Z,{direction:"row",gap:1,flexWrap:"wrap",justifyContent:"center",children:d.map(e=>(0,r.jsx)(nU,{...e,onClick:()=>{e.onClick(e.id),j(!1)}},e.id))})})]})]}):null};var nA=t(9736),nQ=t(80934),nq=t(76163),nz=t(76978);let nD=e=>{var n;let{mockExamPapers:t,selectedMockExamPaperId:i,basePath:a}=e,l=(0,s.Z)(),[c,u]=(0,o.useState)(null),m=t.find(e=>e.id===i);return m?(0,r.jsxs)(B.Z,{spacing:2,direction:{xs:"column",lg:"row"},alignItems:{xs:"flex-start",lg:"center"},children:[(0,r.jsx)(h.Z,{variant:"solid",color:"primary",size:"small",endIcon:(0,r.jsx)(k.pO,{}),onClick:e=>u(e.currentTarget),children:m.name}),(0,r.jsx)(nQ.Z,{anchorEl:c,open:!!c,onClose:()=>u(null),anchorOrigin:{vertical:42,horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},slotProps:{paper:{sx:{borderRadius:2,"& .MuiList-root":{padding:0}}}},children:t.map(e=>{var n;return(0,r.jsx)(nz.g,{href:e.id!==i?"".concat(a,"/").concat(e.slug):void 0,children:(0,r.jsx)(e9.Z,{selected:e.id===i,onClick:()=>u(null),sx:{minWidth:"20rem",px:2,py:1.25},children:(0,r.jsxs)(ea.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(ea.ZP,{item:!0,xs:3,children:(0,r.jsx)(d.Z,{variant:"p-sm-rg",color:l.colors.textIcon.primary,children:e.name})}),(0,r.jsx)(ea.ZP,{item:!0,xs:8,justifyItems:"flex-start",children:(0,r.jsx)(B.Z,{spacing:2,direction:"row",children:(0,r.jsxs)(B.Z,{spacing:1.5,direction:"row",alignItems:"center",children:[(0,r.jsxs)(B.Z,{spacing:.5,direction:"row",alignItems:"center",children:[(0,r.jsx)(k.UO,{sx:{fontSize:"1rem"},fill:l.colors.textIcon.disabled}),(0,r.jsx)(d.Z,{variant:"p-sm-rg",color:l.colors.textIcon.placeholder,children:e.questions.length})]}),(0,r.jsxs)(B.Z,{spacing:.5,direction:"row",alignItems:"center",children:[(0,r.jsx)(k.T3,{sx:{fontSize:"1rem"},fill:l.colors.textIcon.disabled}),(0,r.jsx)(d.Z,{variant:"p-sm-rg",color:l.colors.textIcon.placeholder,children:(0,b.RC)(e.duration,"min")})]}),(0,r.jsxs)(B.Z,{spacing:.5,direction:"row",alignItems:"center",children:[(0,r.jsx)(k.rE,{sx:{fontSize:"1rem"},fill:l.colors.textIcon.disabled}),(0,r.jsx)(d.Z,{variant:"p-sm-rg",color:l.colors.textIcon.placeholder,children:null!==(n=e.total_marks||e.maximum_mark)&&void 0!==n?n:0})]})]})})}),(0,r.jsx)(ea.ZP,{item:!0,xs:1,children:e.id===i&&(0,r.jsx)(nq.Z,{sx:{fontSize:"1rem"}})})]})},e.id)},e.id)})}),(0,r.jsxs)(B.Z,{gap:1,direction:"row",alignItems:"center",flexWrap:"wrap",children:[(0,r.jsx)(nL,{Icon:k.UO,children:(0,b.RC)(m.num_questions_to_answer||m.questions.length,"question")}),(0,r.jsx)(nL,{Icon:k.T3,children:(0,b.RC)(m.duration,"min")}),(0,r.jsx)(nL,{Icon:k.rE,children:(0,b.RC)(null!==(n=m.total_marks||m.maximum_mark)&&void 0!==n?n:0,"mark")})]})]}):null},nL=e=>{let{Icon:n,children:t}=e,i=(0,s.Z)(),{color:a}=(0,na.jS)();return(0,r.jsxs)(B.Z,{spacing:.5,direction:"row",alignItems:"center",justifyContent:"center",sx:{borderRadius:2,border:"1px solid ".concat(a[200]),px:1,py:.75},children:[(0,r.jsx)(n,{sx:{fontSize:"1.25rem"},fill:a[300]}),(0,r.jsx)(d.Z,{variant:"p-sm-rg",color:i.colors.textIcon.primary,children:t})]})},nB=j.kg.child({from:"QuestionListPage"}),nO=e=>{let{color:n}=(0,na.jS)(),[t]=(0,nA.CJ)("NEW_QUESTIONS_PAGE_DESIGN"),[i,a]=(0,o.useState)({difficulty:[],status:[],papers:[],types:[]}),[s,l]=(0,o.useState)({}),{filteredData:c}=(0,e2.mN)({data:e.questions,filters:{completionStatus:i.status,type:i.types,"difficulty.difficultyLevel":i.difficulty,paperIds:i.papers}}),u=(0,K.nd)(e.papers),m=(0,K.yL)(e.questions),{onQuestionComplete:p}=e,x=(0,o.useCallback)((e,n)=>{try{null==p||p(e,n)}catch(e){eb.A9.error("Something went wrong. Please try again."),nB.error("Failed to complete question",{error:e})}},[p]),{onQuestionRevisit:h}=e,k=(0,o.useCallback)((e,n)=>{try{null==h||h(e,n)}catch(e){eb.A9.error("Something went wrong. Please try again."),nB.error("Failed to revisit question",{error:e})}},[h]),b=e=>{let n=document.getElementById(e),t=null==n?void 0:n.getBoundingClientRect().top;t&&window.scrollTo({top:t+window.pageYOffset-120,behavior:"smooth"})};(0,o.useEffect)(()=>{e.subject&&l(e.subject.topics.reduce((e,n)=>({...e,[n.name]:!1}),{}))},[e.subject]);let v=e=>()=>{l(n=>({...n,[e]:!n[e]}))},j=[],C=S()(c,"id");e.questionsByTopic&&(j=e.questionsByTopic.map(e=>({...e,questions:e.questions.filter(e=>{var n;return null===(n=c.map(e=>e.id))||void 0===n?void 0:n.includes(e.id)})})));let w=(0,r.jsx)(t?nP:nb,{filtersState:i,onFilterChange:a,anchorProps:c.map(e=>{var n;return{id:e.id,index:e.index,label:(e.index+1).toString(),completed:e.completionStatus===D.mT.Complete,difficultyLevel:null===(n=e.difficulty)||void 0===n?void 0:n.difficultyLevel,onClick:b}}),papers:u,types:m,...e.ToolbarProps,bottomPanel:e.questionsByTopic&&(0,r.jsx)(f,{numFlaggedQuestions:e.questionsByTopic.flatMap(e=>e.questions).length,showText:!0})});return(0,r.jsxs)(r.Fragment,{children:[t?(0,r.jsx)(e3.cQ,{title:e.subtitle,secondTitleLine:e.title,description:!e.MockExamPaperBarProps&&e.description,FeatureIcon:e.FeatureIcon,showSubjectGroupIcon:!1,extra:(e.MockExamPaperBarProps||e.questionsByTopic)&&(0,r.jsxs)(r.Fragment,{children:[e.MockExamPaperBarProps&&(0,r.jsx)(g.Z,{theme:y.rS,children:(0,r.jsxs)(B.Z,{direction:{xs:"column-reverse",lg:"row"},justifyContent:"space-between",pt:{xs:2,lg:3},mb:-2,sx:{width:"100%",borderTop:{lg:"1px solid ".concat(n[100])}},spacing:{xs:3,lg:6},children:[e.description&&(0,r.jsx)(d.Z,{variant:"p-md-rg",color:e=>e.colors.textIcon.primary,children:e.description}),(0,r.jsx)(nD,{...e.MockExamPaperBarProps})]})}),e.questionsByTopic&&(0,r.jsx)(f,{numFlaggedQuestions:e.questionsByTopic.flatMap(e=>e.questions).length,showText:!0})]})}):(0,r.jsx)(e3.mr,{title:e.title,subtitle:e.subtitle,description:e.description,extra:w}),t&&w,(0,r.jsx)(e5.Z,{maxWidth:"xl",sx:{mt:6,pb:12},children:e.contentAccess.isAccessible?e.questionsByTopic&&j?j.map((n,t)=>(0,r.jsx)(B.Z,{id:n.id,children:(0,r.jsx)(z.lL,{name:n.name,index:t,toggleExpand:v(n.name),expandState:s,desktopStyles:{display:{xs:"none"}},mobileStyles:{display:{xs:"block"}},sidePanel:(0,r.jsx)(B.Z,{justifyContent:"center",children:(0,r.jsx)(f,{numFlaggedQuestions:n.questions.length})}),children:(0,r.jsx)(B.Z,{mt:4,mb:8,spacing:8,children:n.questions.length>0?n.questions.map((t,i)=>(0,r.jsx)(eK,{useEncryption:!0,ephemeralId:e.requestId,...C[t.id],index:i,onDoneClick:e.onQuestionComplete?x:void 0,onRevisitClick:k,goldAccess:e.goldAccess,contextEntityId:n.id,contextEntityType:e.contextEntityType,accessContextType:e.accessContextType},t.id)):"No flagged questions"})})},n.id)):(0,r.jsx)(B.Z,{spacing:8,children:(null==c?void 0:c.length)>0?e.sections?e1()(e0()(c,"section"),(n,t)=>{var i,a;return(0,r.jsxs)(B.Z,{spacing:4,children:[(0,r.jsx)(g.Z,{theme:y.rS,children:(0,r.jsxs)(B.Z,{spacing:2,children:[(0,r.jsx)(em.Z,{sx:{borderColor:e=>e.colors.ui.border_dark},children:(0,r.jsxs)(d.Z,{variant:"h3-bold",px:2,color:e=>e.colors.textIcon.placeholder,children:["Section ",t]})}),(0,r.jsx)(d.Z,{variant:"p-md-rg",textAlign:"center",color:e=>e.colors.textIcon.placeholder,children:null===(a=e.sections)||void 0===a?void 0:null===(i=a.find(e=>e.name===t))||void 0===i?void 0:i.description})]})}),(0,r.jsx)(B.Z,{spacing:8,children:n.map(n=>(0,r.jsx)(eK,{useEncryption:!0,ephemeralId:e.requestId,...n,onDoneClick:e.onQuestionComplete?x:void 0,onRevisitClick:e.onQuestionRevisit?k:void 0,goldAccess:e.goldAccess,contextEntityId:e.contextEntityId,contextEntityType:e.contextEntityType,accessContextType:e.accessContextType},n.id))})]},t)}):null==c?void 0:c.map(n=>(0,r.jsx)(eK,{useEncryption:!0,ephemeralId:e.requestId,...n,onDoneClick:e.onQuestionComplete?x:void 0,onRevisitClick:e.onQuestionRevisit?k:void 0,goldAccess:e.goldAccess,contextEntityId:e.contextEntityId,contextEntityType:e.contextEntityType,accessContextType:e.accessContextType},n.id)):(0,r.jsx)(d.Z,{variant:"p-lg-rg",children:"No results found"})}):(0,r.jsx)(z.nb,{showTeacherPage:!1,contentAccess:e.contentAccess})})]})}},15631:function(e,n,t){"use strict";t.d(n,{mH:function(){return w},P3:function(){return eN},H4:function(){return e4}});var i,a,r,o,s,l,d,c,u=t(52322),m=t(2784),p=t(39097),x=t.n(p),h=t(50131),g=t(15883),k=t(78502),y=t(81836),b=t(76385),v=t(80934),f=t(1676),j=t(23951),C=t(57542),S=t(53058);let w=e=>{let{buttonStyle:n}=e,{mathEditorCheatsheetUrl:t,mathEditorVideoUrl:i}=(0,S.JR)(),a=(0,k.Z)(),[r,o]=(0,m.useState)(null);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(C.zx,{variant:"white-sm",sx:{...g.$.lightPurple,p:a.spacing(.75,1.5),whiteSpace:"nowrap",height:"auto",textAlign:"center",...n||{}},endIcon:(0,u.jsx)(j.Z,{fontSize:"small"}),onClick:e=>o(e.currentTarget),children:(0,u.jsxs)(y.Z,{direction:"row",alignItems:"center",spacing:.75,children:[(0,u.jsx)(h.NE,{fontSize:"small"}),(0,u.jsx)(b.Z,{variant:"p-xs-md",mb:"0 !important",children:"help"})]})}),(0,u.jsxs)(v.Z,{anchorEl:r,open:!!r,onClose:()=>o(null),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiPaper-root":{backgroundColor:"#f5f5fc",borderRadius:4},"& .MuiTypography-root":{fontSize:"0.8rem"}},children:[(0,u.jsx)(f.Z,{dense:!0,children:(0,u.jsx)(x(),{target:"_blank",href:i,style:{textDecoration:"none"},children:"How to use the editor"})}),(0,u.jsx)(f.Z,{dense:!0,children:(0,u.jsx)(x(),{target:"_blank",href:t,style:{textDecoration:"none"},children:"Math Input Cheatsheet"})})]})]})};var I=t(94482),Z=t(81014),E=t(55388),N=t(51284),F=t(59888),T=t(20614),R=t(44258),_=t(14313),U=t(96577),P=t.n(U),M=t(37243),A=t(37706),Q=t(41859),q=t(84124),z=t(52519),D=t(45606),L=t(34758),B=t(55263),O=t(70271),W=t(55248),V=t(38879),H=t(56719),G=t(62676),$=t(58362);(i=s||(s={}))[i.Small=0]="Small",i[i.Medium=1]="Medium",i[i.Large=2]="Large";let Y=e=>{let{closeCallback:n,disableEraser:t,isEraserEnabled:i,enableEraser:a,clear:r,undo:o,redo:s,canUndo:l,canRedo:d,children:c,title:p}=e,x=(0,k.Z)(),g=(0,m.useRef)(null),[v,f]=(0,m.useState)(0);return(0,D.O)(g,n),(0,u.jsxs)(L.Z,{sx:{position:"fixed",zIndex:9999,background:"#CBCFD6",bottom:0,left:0,width:"100vw",height:0===v?"35vh":1===v?"50vh":"70vh",filter:"drop-shadow(0px -8px 10px ".concat(x.palette.grey[300],")"),overflow:"scroll"},ref:g,children:[(0,u.jsx)(y.Z,{sx:{position:"sticky",top:0,left:0,width:"100%",zIndex:1e3,py:.5,background:"#CBCFD6"},children:(0,u.jsxs)(z.Z,{maxWidth:"xl",children:[(0,u.jsx)(y.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:(0,u.jsx)(y.Z,{direction:"row",alignItems:"center",spacing:1})}),(0,u.jsxs)(y.Z,{justifyContent:"space-between",alignItems:"center",direction:"row",children:[(0,u.jsxs)(y.Z,{direction:"row",children:[(0,u.jsx)(R.Z,{onClick:t,disabled:!i,children:(0,u.jsx)(W.Z,{fontSize:"small"})}),(0,u.jsx)(R.Z,{onClick:a,disabled:i,children:(0,u.jsx)(h.$q,{height:20,width:20,sx:{height:20,width:20},fill:i?x.palette.grey[400]:x.palette.grey[600]})}),(0,u.jsx)(R.Z,{onClick:r,children:(0,u.jsx)(V.Z,{fontSize:"small"})}),(0,u.jsx)(R.Z,{onClick:o,disabled:!l,children:(0,u.jsx)(B.Z,{fontSize:"small"})}),(0,u.jsx)(R.Z,{onClick:s,disabled:!d,children:(0,u.jsx)(O.Z,{fontSize:"small"})})]}),(0,u.jsx)(y.Z,{flexGrow:"1",display:{xs:"none",md:"flex"},children:(0,u.jsx)(b.Z,{variant:"p-sm-semibold",textAlign:"center",children:"Write your math equation below".concat(p?" for ".concat(p):"")})}),(0,u.jsxs)(y.Z,{direction:"row",alignItems:"center",children:[0!==v&&(0,u.jsx)(T.Z,{title:"Shrink editor to smallest size",children:(0,u.jsx)(R.Z,{onClick:()=>{f(0)},children:(0,u.jsx)($.Z,{fontSize:"small"})})}),1!==v&&(0,u.jsx)(T.Z,{title:0===v?"Expand Editor":"Shrink Editor",children:(0,u.jsx)(R.Z,{onClick:()=>{f(1)},children:(0,u.jsx)(H.Z,{fontSize:"small"})})}),2!==v&&(0,u.jsx)(T.Z,{title:"Expand Editor to biggest size",children:(0,u.jsx)(R.Z,{onClick:()=>{f(2)},children:(0,u.jsx)(G.Z,{fontSize:"small"})})}),(0,u.jsx)(T.Z,{title:"Save and Close",children:(0,u.jsx)(R.Z,{onClick:n,children:(0,u.jsx)(Q.Z,{fontSize:"small"})})})]})]})]})}),c]})},X=e=>{let{children:n}=e,t=(0,k.Z)();return(0,u.jsxs)(y.Z,{my:2,sx:{backgroundColor:"white",background:"repeating-linear-gradient(white, white 25px, #9198e5 26px, #9198e5 27px)",position:"relative",backgroundPositionY:"49px",borderRadius:t.spacing(1),overflow:"hidden"},children:[(0,u.jsx)(y.Z,{sx:{top:0,left:0,width:"100%",height:"50px",position:"absolute",background:"linear-gradient(white, white 48px, #9198e5 49px, #9198e5 50px)"}}),(0,u.jsx)(y.Z,{sx:{top:0,left:0,width:"49px",height:"100%",borderRight:"2px solid pink",position:"absolute"}}),(0,u.jsx)(y.Z,{sx:{top:0,right:0,width:"49px",height:"100%",borderLeft:"2px solid pink",position:"absolute"}}),n]})},K=e=>{let{initialJiix:n,updateAttributes:t,hideEditor:i,title:a}=e,{myScriptHost:r,myScriptHmacKey:o,myScriptApplicationKey:s}=(0,S.JR)(),l=(0,k.Z)(),d=(0,m.useRef)(null),[c,p]=(0,m.useState)(null),[x,h]=(0,m.useState)(!1),[g,y]=(0,m.useState)(!1),[b,v]=(0,m.useState)(!1),f=(0,m.useCallback)(()=>{i(),v(!1),h(!1),y(!1)},[i]);return(0,m.useEffect)(()=>{var e,i;let a=q.z2(d.current,{recognitionParams:{type:"MATH",protocol:"WEBSOCKET",apiVersion:"V4",server:{scheme:"https",host:r,applicationKey:s,hmacKey:o},iink:{math:{mimeTypes:["application/x-latex","application/vnd.myscript.jiix","application/mathml+xml"]},export:{jiix:{strokes:!0}}}}});return n&&(null==a||a.import_(n,"application/vnd.myscript.jiix")),window.addEventListener("resize",()=>{null==a||a.resize()}),null===(e=d.current)||void 0===e||e.addEventListener("exported",e=>{let n=e.detail.exports;if(n&&n["application/x-latex"]&&n["application/vnd.myscript.jiix"]){var i;t({latex:(i=n["application/x-latex"]).includes("\\\\")?("\\begin{align*}"+i+"\\end{align*}").replace("\\begin{aligned}","").replace("\\end{aligned}","").replace(RegExp("(align.{1})","g"),"aligned"):i.replace(RegExp("(align.{1})","g"),"aligned"),jiix:n["application/vnd.myscript.jiix"]})}else t({latex:"",jiix:""})}),null===(i=d.current)||void 0===i||i.addEventListener("changed",e=>{h(e.detail.canUndo),y(e.detail.canRedo)}),p(a),()=>{window.removeEventListener("resize",()=>{null==a||a.resize()}),null==a||a.close()}},[]),(0,u.jsx)(Y,{closeCallback:f,disableEraser:()=>{null==c||c.disableEraser(),v(!1)},isEraserEnabled:b,enableEraser:()=>{null==c||c.enableEraser(),v(!0)},clear:()=>{null==c||c.clear()},undo:()=>{null==c||c.undo()},redo:()=>{null==c||c.redo()},canUndo:x,canRedo:g,title:a,children:(0,u.jsx)(z.Z,{maxWidth:"xl",sx:{px:{xs:l.spacing(6),md:l.spacing(8),xl:l.spacing(2)}},children:(0,u.jsx)(X,{children:(0,u.jsx)("div",{style:{minWidth:"100px",minHeight:"100vh",width:"100%",touchAction:"none",zIndex:999},ref:d})})})})};var J=t(12195);let ee=e=>{let{children:n,deleteNode:t,...i}=e,a=(0,k.Z)();return(0,u.jsxs)(F.Z,{...i,ref:i.innerRef,sx:{borderRadius:3,border:"1px dashed ".concat(a.colors.subjectGroup.science[200]),p:a.spacing(4,2),position:"relative",my:2,...i.sx},children:[t&&(0,u.jsx)(R.Z,{sx:{position:"absolute",top:a.spacing(1),right:a.spacing(1),background:"rgba(255, 255, 255, 0.5)",zIndex:999,p:1,"&:hover":{background:"rgba(255, 255, 255, 0.8)"}},onClick:()=>{t()},children:(0,u.jsx)(J.Z,{sx:{color:a.colors.textIcon.primary,width:16,height:16}})}),n]})},en=e=>{let{latex:n,jiix:t,initialOpenState:i}=e.node.attrs,[a,r]=(0,m.useState)(i&&e.extension.options.editable||!1),o=(0,m.useCallback)(()=>{r(!1),e.editor.setEditable(!0)},[e.editor]);return(0,u.jsxs)(E.T5,{children:[(0,u.jsx)(ee,{sx:{py:1,pl:2,pr:1},children:e.extension.options.editable?(0,u.jsxs)(y.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,u.jsx)(F.Z,{marginTop:"5px",children:(0,u.jsx)(b.Z,{variant:"p-sm-rg",color:"text.secondary",children:!(null==n?void 0:n.toString())&&"Handwrite Math"})}),!!(null==n?void 0:n.toString())&&(0,u.jsx)(F.Z,{children:(0,u.jsx)(A.BlockMath,{math:n.toString()})}),(0,u.jsxs)(F.Z,{children:[(0,u.jsx)(T.Z,{arrow:!0,title:a?"Close":"Edit",children:(0,u.jsx)(R.Z,{onClick:n=>{n.preventDefault(),r(!0),e.editor.setEditable(!1),e.editor.commands.blur()},children:a?(0,u.jsx)(Q.Z,{}):(0,u.jsx)(I.z6,{})})}),(0,u.jsx)(T.Z,{arrow:!0,title:"Delete",children:(0,u.jsx)(R.Z,{onClick:()=>{e.deleteNode()},children:(0,u.jsx)(I.rF,{})})})]})]}):(null==n?void 0:n.toString())&&(0,u.jsx)(F.Z,{children:(0,u.jsx)(A.BlockMath,{math:null==n?void 0:n.toString()})})}),e.extension.options.editable&&a&&(0,u.jsx)(K,{initialJiix:t,hideEditor:o,updateAttributes:e.updateAttributes,title:e.extension.options.title})]})},et=M.NB.create({name:"myScript",group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:()=>({latex:{default:"",renderHTML:e=>({latex:e.latex})},jiix:{default:"",renderHTML:e=>({jiix:e.jiix})},initialOpenState:{default:!1,renderHTML:()=>({})}}),addNodeView:()=>(0,E.fW)(en),addOptions:()=>({editable:!0}),addKeyboardShortcuts(){return{"Mod-k":()=>this.editor.chain().addMyScript().run()}},renderHTML(e){let{HTMLAttributes:n}=e;return["span",(0,M.P1)({"data-type":this.name},this.options.HTMLAttributes,n)]},parseHTML(){return[{tag:'span[data-type="'.concat(this.name,'"]')}]},addCommands(){return{addMyScript:()=>e=>{let{chain:n,editor:t}=e;return t.isEditable&&t.setEditable(!1),n().blur().insertContent({type:this.name,attrs:{latex:"",jiix:"",initialOpenState:!0}}).run()}}}});var ei=t(24424),ea=t(82066),er=t(10334),eo=t(25619),es=t(96802),el=t(24502),ed=t(41372),ec=t(53801);let eu=e=>{let{spacing:n=2,backgroundColor:t,sx:i}=e,a=(0,k.Z)();return(0,u.jsxs)(y.Z,{spacing:n,direction:"row",justifyContent:"center",alignItems:"center",sx:i,children:[(0,u.jsx)(ec.Z,{variant:"rounded",width:a.spacing(1),height:a.spacing(1),sx:{backgroundColor:t}}),(0,u.jsx)(ec.Z,{variant:"rounded",width:a.spacing(1),height:a.spacing(1),sx:{backgroundColor:t}}),(0,u.jsx)(ec.Z,{variant:"rounded",width:a.spacing(1),height:a.spacing(1),sx:{backgroundColor:t}})]})};var em=t(74424),ep=t(71946),ex=t(25200),eh=t(38268),eg=t(82435),ek=t(7392),ey=t(72523);let eb=e=>(0,u.jsx)(ey.Z,{width:"80",height:"80",viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,u.jsxs)("g",{id:"Group 4764",children:[(0,u.jsx)("rect",{id:"Rectangle 10",width:"80",height:"80",rx:"40",fill:"#E8E8E8"}),(0,u.jsx)("path",{id:"solve 1 (Traced)",fillRule:"evenodd",clipRule:"evenodd",d:"M57.9879 17.124C57.2302 17.407 56.5268 18.0687 55.1388 19.8042C54.6145 20.4599 51.3764 24.2546 50.8609 24.8173C50.8055 24.8779 50.6742 24.8298 50.528 24.6956C50.0071 24.2172 49.1477 23.8836 48.3137 23.8361C47.6411 23.7976 47.1238 23.8758 45.061 24.3271C42.1262 24.9693 41.2464 25.1343 37.0092 25.8385C31.251 26.7954 26.1367 27.8541 25.3315 28.2557C24.3905 28.7253 23.6558 29.5718 23.3135 30.5811C23.1662 31.0155 23.1317 31.8971 23.0822 36.4989C23.0503 39.4728 22.9857 42.0532 22.9388 42.2331C22.8919 42.413 22.3517 43.2537 21.7384 44.1014C20.1115 46.3499 18.5742 48.6792 17.2055 50.9694C16.0426 52.9153 16 53.0081 16 53.6005C16 53.9383 16.0954 54.5241 16.2121 54.9022C16.8026 56.8162 18.2192 57.5664 22.1055 58.0238L22.7187 58.0959V58.8162C22.7187 60.2071 23.3366 61.4161 24.4285 62.1622C25.5541 62.931 24.5984 62.8917 41.3913 62.86L56.4721 62.8315L57.1653 62.4997C58.0429 62.0794 58.6997 61.4213 59.1249 60.5361L59.4582 59.8421L59.4914 56.1616L59.5245 52.4812L60.0913 51.8864C60.7703 51.1737 61.0483 50.6583 61.2309 49.7732C61.4495 48.7133 61.2882 48.1304 59.8962 44.9492C59.2154 43.3934 58.6584 42.078 58.6584 42.0262C58.6584 41.9744 59.4802 40.4925 60.4847 38.7332C61.4892 36.9738 62.3805 35.3106 62.4655 35.037C62.8054 33.9427 62.4225 32.5233 61.5246 31.5482C60.8652 30.8319 60.0574 30.46 58.7068 30.2509C58.0896 30.1553 57.5983 30.0378 57.6149 29.9897C57.6561 29.8708 61.7069 25.1666 62.6967 24.0881C64.2394 22.4075 64.3851 21.3429 63.2792 19.8347C62.7681 19.1376 61.172 17.812 60.3338 17.3885C59.5537 16.9942 58.618 16.8888 57.9879 17.124ZM55.3825 22.3838C56.4117 22.9059 57.4112 23.6353 58.4173 24.5982C58.9672 25.1244 59.4627 25.6403 59.5185 25.7445C59.6022 25.9012 58.9092 26.7581 55.4966 30.717C53.2289 33.3479 51.0628 35.8507 50.6831 36.2789L49.9926 37.0575L49.7244 36.6526C49.5769 36.4299 49.2232 35.9752 48.9383 35.6422C48.6535 35.3092 48.4204 35.0077 48.4204 34.9723C48.4204 34.9367 50.0641 33.0056 52.073 30.6807C55.1354 27.1367 55.7256 26.4016 55.7256 26.1309C55.7256 25.7502 55.4879 25.5647 55.1289 25.6651C54.9684 25.71 53.4989 27.3335 51.2041 30.001L47.5358 34.2651L47.223 34.0017C47.0511 33.8568 46.5783 33.5441 46.1724 33.3068C45.7664 33.0694 45.4343 32.8514 45.4343 32.8223C45.4343 32.7186 54.6446 22.1016 54.7345 22.1016C54.785 22.1016 55.0765 22.2287 55.3825 22.3838ZM48.9472 25.0353C49.4093 25.1986 50.0205 25.5842 50.0195 25.7121C50.0193 25.7521 48.6285 27.3944 46.929 29.3615C44.7672 31.8637 43.8222 33.0342 43.7833 33.2583C43.6844 33.8267 43.3287 39.3392 43.3818 39.4802C43.5177 39.8416 43.8095 39.8162 46.8334 39.1794C48.4981 38.8289 49.962 38.5063 50.0866 38.4625C50.2112 38.4188 51.1139 37.4581 52.0927 36.3277C53.0715 35.1973 53.9106 34.2725 53.9573 34.2725C54.0994 34.2725 60.0762 48.0592 60.1847 48.637C60.3689 49.6179 59.8925 50.7451 59.0086 51.4201C58.4429 51.8519 59.1758 51.6835 44.3975 54.7804C36.2372 56.4905 32.0028 57.3332 31.5699 57.3332C30.4634 57.3332 29.5401 56.7694 29.0708 55.8074C28.8628 55.3806 28.2661 52.5852 26.5057 43.7899C25.2441 37.486 24.2117 32.0992 24.2117 31.8191C24.2117 31.5391 24.2847 31.1031 24.3738 30.8502C24.7301 29.839 25.4442 29.2582 26.7202 28.9418C28.4348 28.5164 34.0641 27.4291 37.5425 26.8514C41.1515 26.2518 44.4915 25.6132 46.4474 25.1486C47.7085 24.8492 48.3391 24.8205 48.9472 25.0353ZM33.9305 30.81C30.3896 31.5372 27.4261 32.1873 27.3451 32.2545C27.1478 32.4185 27.1584 32.83 27.3654 33.0372C27.4576 33.1294 27.5655 33.205 27.6053 33.2052C27.8657 33.2065 40.528 30.5965 40.7418 30.4975C41.2261 30.2734 41.0691 29.4495 40.5476 29.478C40.4491 29.4834 37.4714 30.0828 33.9305 30.81ZM58.1785 31.2752C58.8823 31.3866 59.5971 31.5316 59.7668 31.5973C60.9113 32.0399 61.7406 33.5586 61.44 34.6608C61.293 35.1996 58.2108 40.5921 58.0718 40.5536C57.9836 40.5291 55.0609 34.0011 54.8638 33.3884C54.8205 33.2539 55.0722 32.8867 55.7233 32.134C56.2296 31.5486 56.7012 31.0703 56.7713 31.0711C56.8413 31.0718 57.4746 31.1636 58.1785 31.2752ZM34.8763 35.0394C29.6969 36.0995 28.6059 36.3532 28.4509 36.534C28.2161 36.8079 28.2177 36.8607 28.4695 37.17L28.6748 37.422L35.2148 36.1055C38.812 35.3815 41.8629 34.7198 41.9949 34.6351C42.257 34.4669 42.295 34.2642 42.1245 33.9452C42.0403 33.7876 41.9076 33.7416 41.5646 33.7507C41.3174 33.7572 38.3077 34.3372 34.8763 35.0394ZM45.5942 34.232C46.6532 34.8705 47.5276 35.6297 48.2609 36.5472C48.6429 37.0252 48.94 37.4626 48.9213 37.5192C48.9024 37.5758 48.3662 37.7337 47.7297 37.8701L46.5725 38.1182L45.7634 37.3491C45.3185 36.9261 44.8883 36.5216 44.8077 36.4501C44.6903 36.346 44.6764 36.0726 44.7382 35.0828C44.7806 34.4023 44.8467 33.8456 44.8849 33.8458C44.9231 33.8459 45.2423 34.0197 45.5942 34.232ZM33.4445 39.7136C29.1973 40.5877 29.0267 40.6454 29.1846 41.1532C29.2718 41.433 29.4206 41.5287 29.7717 41.5308C29.9264 41.5316 31.822 41.1715 33.9842 40.7306C37.987 39.9142 38.1823 39.8519 38.1823 39.3933C38.1823 39.1794 37.8503 38.8599 37.6407 38.8722C37.5574 38.8771 35.669 39.2557 33.4445 39.7136ZM52.3429 40.3962C51.1526 40.66 50.8847 40.844 51.0405 41.2905C51.1183 41.5128 51.2239 41.5937 51.4684 41.6177C51.8675 41.657 53.725 41.2612 53.9263 41.094C54.1469 40.9107 54.1094 40.3852 53.8663 40.255C53.6086 40.1169 53.5988 40.1178 52.3429 40.3962ZM47.9085 40.4861C47.8381 40.5566 47.7806 40.7127 47.7806 40.8331C47.7807 40.9534 48.2247 42.2958 48.7671 43.8162C49.8396 46.822 49.9407 46.9918 50.4882 46.7075C50.6547 46.621 50.8935 46.55 51.0187 46.5498C51.144 46.5496 51.4001 46.4556 51.5878 46.341C52.5855 45.7321 52.5048 44.0824 51.4299 43.1132C50.9599 42.6894 50.4517 42.5352 49.879 42.6428L49.5247 42.7093L49.2227 41.8273C48.774 40.5164 48.6779 40.358 48.3323 40.358C48.1695 40.358 47.9788 40.4156 47.9085 40.4861ZM53.5429 41.6884C53.4717 41.7741 53.388 42.0344 53.357 42.2666L53.3004 42.6889L52.7682 42.3612C52.3316 42.0922 52.1854 42.051 51.9545 42.1317C51.7433 42.2056 51.6648 42.3141 51.6403 42.5662C51.61 42.8765 51.6641 42.9387 52.3508 43.3834L53.094 43.8647L52.9993 44.2733C52.786 45.1935 52.966 45.8029 53.4513 45.8029C53.6845 45.8029 53.9647 45.4547 53.9734 45.1539C53.9914 44.5345 54.0797 44.504 54.7125 44.8985C55.4115 45.3344 55.7134 45.3616 55.944 45.0093C56.1889 44.6352 56.0333 44.4224 55.0806 43.8281C54.4049 43.4065 54.2782 43.2837 54.3232 43.0943C54.5078 42.3173 54.5134 41.8821 54.3411 41.7097C54.1223 41.4906 53.7157 41.4797 53.5429 41.6884ZM26.402 48.7922C27.2839 53.2375 27.8317 55.7599 27.9933 56.1183C28.2928 56.7823 28.899 57.4735 29.544 57.886C29.8961 58.1112 29.9529 58.1781 29.7573 58.1372C29.2848 58.0385 22.2801 56.9342 20.9938 56.7557C19.3346 56.5256 18.5331 56.2322 17.9046 55.625C17.3871 55.1252 17.0665 54.3692 17.0665 53.6494C17.0665 52.998 19.8291 48.6466 23.2758 43.869C24.5683 42.0774 24.9146 41.6597 24.9779 41.8163C25.0216 41.9244 25.6624 45.0635 26.402 48.7922ZM41.6483 42.9304C40.9693 43.0736 40.6339 43.1989 40.5019 43.3587C40.2677 43.642 40.269 43.6935 40.5168 44L40.7185 44.2493L41.9299 44.0009C42.5962 43.8644 43.2254 43.6781 43.328 43.5869C43.7067 43.2503 43.4305 42.6974 42.8939 42.7174C42.7367 42.7233 42.1762 42.8192 41.6483 42.9304ZM50.6368 43.8343C51.3433 44.3297 51.3829 45.596 50.686 45.4136C50.5168 45.3693 50.3967 45.1734 50.2283 44.6669C49.9173 43.7313 50.0639 43.4325 50.6368 43.8343ZM43.0872 44.7897C43.0033 44.891 42.9773 45.0991 43.0172 45.3502C43.2311 46.6917 43.2353 46.5991 42.9523 46.7508C42.4317 47.0298 42.0612 46.6172 41.8622 45.5367C41.7613 44.9887 41.7035 44.8824 41.4597 44.7965C41.2359 44.7179 41.1284 44.7383 40.9583 44.8925C40.3662 45.429 41.067 47.2838 42.0551 47.7953C42.3457 47.9458 42.8835 47.9547 43.3946 47.8174C43.5795 47.7677 44.1806 50.1861 44.0996 50.6535C44.0225 51.0988 43.7515 51.3545 43.3567 51.3545C42.9009 51.3545 42.554 50.9653 42.4349 50.32C42.295 49.5634 41.9042 49.3368 41.4766 49.7648C41.2909 49.9508 41.2638 50.0674 41.3213 50.4321C41.4828 51.4582 42.1218 52.2401 42.9521 52.4276C44.0945 52.6855 45.2178 51.722 45.2203 50.4818C45.2207 50.3248 45.0041 49.2438 44.739 48.0797C44.4739 46.9156 44.2048 45.7331 44.1409 45.452C44.077 45.1708 43.9545 44.8705 43.8687 44.7847C43.6663 44.5821 43.2572 44.5846 43.0872 44.7897ZM46.5661 44.8518C45.4881 45.0815 45.3276 45.177 45.3276 45.5894C45.3276 46.1151 45.5293 46.1723 46.6343 45.9605C47.1767 45.8565 47.7272 45.7321 47.8575 45.6842C48.185 45.5636 48.2854 45.1056 48.0433 44.8377C47.8198 44.5906 47.7906 44.5909 46.5661 44.8518ZM31.5981 45.4353C30.9856 45.741 30.2906 46.4431 30.2906 46.7564C30.2906 47.0265 30.5693 47.2976 30.847 47.2976C30.9687 47.2976 31.2991 47.0814 31.5813 46.8171C32.1109 46.3212 32.4594 46.2117 32.572 46.5056C32.7247 46.9041 32.642 47.0593 32.2368 47.134C30.8228 47.3945 29.9706 48.2627 29.9706 49.4426C29.9706 50.7885 31.1238 51.3777 32.441 50.7051C32.6613 50.5925 32.96 50.5004 33.1048 50.5004C33.2495 50.5004 33.4391 50.4293 33.5259 50.3424C33.7375 50.1306 33.857 48.6212 33.7611 47.3706C33.6655 46.1209 33.4216 45.5323 32.9112 45.3188C32.3993 45.1048 32.2309 45.1197 31.5981 45.4353ZM36.8249 45.8505C36.2249 45.9841 35.661 46.1539 35.5718 46.2281C35.3322 46.427 35.3728 46.8415 35.6495 47.023C35.8646 47.164 36.0154 47.153 37.1076 46.9164C37.7775 46.7714 38.3893 46.5998 38.4673 46.5349C38.7867 46.2696 38.5112 45.5772 38.0948 45.5985C37.9963 45.6036 37.4248 45.7169 36.8249 45.8505ZM37.1692 47.8404C36.6413 47.951 36.1028 48.0669 35.9725 48.0978C35.4982 48.2106 35.4033 48.8805 35.8293 49.1089C36.0438 49.2238 38.439 48.7641 38.6833 48.5613C38.8977 48.383 38.8552 47.8566 38.616 47.7283C38.3617 47.5921 38.3486 47.5932 37.1692 47.8404ZM32.676 48.8609C32.5947 49.306 32.5267 49.4052 32.1564 49.6174C31.9128 49.757 31.5932 49.8499 31.4103 49.8341C31.1469 49.8114 31.0843 49.7534 31.0559 49.5059C30.9952 48.9745 31.5223 48.4198 32.2395 48.2609C32.7102 48.1566 32.7856 48.2602 32.676 48.8609ZM50.02 54.8318C50.02 54.9941 48.1951 58.0724 47.7269 58.7C47.1612 59.4584 46.4193 60.0327 45.7731 60.2123C45.2008 60.3715 43.6964 60.3468 42.3185 60.1556C41.0923 59.9855 32.9522 58.6684 32.3701 58.5459C32.1283 58.495 32.5443 58.3766 34.0765 58.0603C35.1909 57.8302 39.1262 57.001 42.8214 56.2177C49.3579 54.8319 50.02 54.7044 50.02 54.8318Z",fill:"#ACB6C7"})]})});(a=l||(l={}))[a.Placeholder=0]="Placeholder",a[a.UseCamera=1]="UseCamera",a[a.ScanQRCode=2]="ScanQRCode";let ev=e=>{let{id:n,onStateChange:t,onFileUpload:i,deleteNode:a,isUploading:r}=e,o=(0,k.Z)(),[s,d]=(0,m.useState)(null),c=!!s,p=e=>()=>{t(e),x()},x=()=>{d(null)},{handleUploadClick:h,ref:g}=(0,ed.FL)(),j=(0,m.useCallback)(e=>{var n;let t=null===(n=e.target.files)||void 0===n?void 0:n[0];if(e.target.value="",!t){el.A9.error("No file selected.",{autoHideDuration:5e3});return}if(t.size>5242880){el.A9.error("This image is too large, you may only upload images less than 5MB.",{autoHideDuration:1500});return}i(t)},[i]),{getRootProps:C,isDragAccept:S,isDragActive:w}=(0,em.uI)({onDrop:e=>{if(e.length>0){let n=e[0];if(n.size>5242880){el.A9.error("This image is too large, you may only upload images less than 5MB.",{autoHideDuration:1500});return}i(n)}},disabled:r,multiple:!1,noClick:!0,noKeyboard:!0,accept:{"image/png":[".jpeg",".jpg"],"image/jpeg":[".jpeg",".jpg"]}});return(0,u.jsx)(ee,{...C({refKey:"innerRef"}),sx:{background:w&&S?o.colors.common.brand[100]:w?o.colors.common.brick[100]:o.colors.ui.bg_light,borderColor:w?o.colors.common.brand[300]:o.colors.subjectGroup.science[200],p:3,height:"auto"},deleteNode:a,children:r?(0,u.jsx)(eu,{}):(0,u.jsxs)(y.Z,{spacing:2,direction:"column",alignItems:"center",justifyContent:"center",children:[(0,u.jsx)(eb,{sx:{width:80,height:80}}),(0,u.jsx)(b.Z,{variant:"p-xs-rg",sx:{color:w&&!S?o.colors.common.brick[400]:o.colors.common.primary[600],textAlign:"center"},children:w?S?"Drop your answer here":"You can only upload images (jpeg, png, jpg) less than 5MB in size.":"Drag & Drop or upload your answer here"}),(0,u.jsx)(ep.Z,{variant:"solid",color:"primary",endIcon:(0,u.jsx)(ex.Z,{}),onClick:e=>{d(e.currentTarget)},id:"open-upload-menu-".concat(n),"aria-controls":c?"upload-menu-".concat(n):void 0,"aria-haspopup":"true","aria-expanded":c?"true":void 0,sx:{m:0},children:"Upload"}),(0,u.jsxs)(v.Z,{id:"upload-menu-".concat(n),"aria-labelledby":"open-upload-menu-".concat(n),anchorEl:s,open:c,onClose:x,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:-8,horizontal:"center"},sx:{"& .MuiMenu-paper":{borderRadius:1.5,border:"1px solid ".concat(o.colors.ui.border)},"& .MuiMenuItem-root":{padding:o.spacing(1,2),borderRadius:0,color:o.colors.common.primary[500],borderBottom:"1px solid ".concat(o.colors.ui.border),"&:last-child":{borderBottom:"none"},"&:hover":{backgroundColor:o.colors.ui.bg_light}}},children:[(0,u.jsxs)(f.Z,{onClick:p(l.UseCamera),children:[(0,u.jsx)(eh.Z,{sx:{color:o.colors.common.primary[300],mr:1}})," Use camera"]}),(0,u.jsxs)(f.Z,{onClick:p(l.ScanQRCode),children:[(0,u.jsx)(eg.Z,{sx:{color:o.colors.common.primary[300],mr:1}}),"Scan QR code"]}),(0,u.jsxs)(f.Z,{onClick:()=>{h(),p(l.Placeholder)()},children:[(0,u.jsx)(ek.Z,{sx:{color:o.colors.common.primary[300],mr:1}})," Browse on device"]})]}),(0,u.jsx)(F.Z,{sx:{width:0,height:0,m:"0 !important",p:"0 !important"},component:"input",ref:g,type:"file",accept:".jpg,.jpeg,.png",onChange:j})]})})};t(21826),t(98141);var ef=t(11569),ej=t.n(ef),eC=t(68555),eS=t(17209);let ew=Math.PI/180,eI=es.kg.child({from:"canvasPreview"});async function eZ(e,n,t){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=n.getContext("2d");if(!r)throw eI.warn("No 2d context"),Error("No 2d context");let o=e.naturalWidth/e.width,s=e.naturalHeight/e.height,l=window.devicePixelRatio;n.width=Math.floor(t.width*o*l),n.height=Math.floor(t.height*s*l),r.scale(l,l),r.imageSmoothingQuality="high";let d=t.x*o,c=t.y*s,u=e.naturalWidth/2,m=e.naturalHeight/2;r.save(),r.translate(-d,-c),r.translate(u,m),r.rotate(a*ew),r.scale(i,i),r.translate(-u,-m),r.drawImage(e,0,0,e.naturalWidth,e.naturalHeight,0,0,e.naturalWidth,e.naturalHeight),r.restore()}let eE={unit:"px",x:25,y:25,width:50,height:50},eN=e=>{let{onTakePhoto:n,idealFacingMode:t="user",onBackClick:i,deleteNode:a,isUploading:r}=e,o=(0,k.Z)(),[s,l]=(0,m.useState)(null),[d,c]=(0,m.useState)(eE),[p,x]=(0,m.useState)(eE),h=(0,m.useRef)(null),g=(0,m.useCallback)(()=>{!r&&(l(null),c(eE),x(eE),i&&i())},[i,r]);return(0,u.jsxs)(ee,{sx:{p:0,border:"none",background:o.colors.ui.border,"&&& .ReactCrop__crop-mask":{borderRadius:3,borderEndStartRadius:0,borderEndEndRadius:0,display:r?"none":"block"},"&&& .ReactCrop__crop-selection":{display:r?"none":"block"}},deleteNode:a,children:[s?(0,u.jsxs)(F.Z,{sx:{position:"relative"},children:[(0,u.jsx)(F.Z,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.5)",zIndex:999,alignContent:"center",justifyContent:"center",borderRadius:3,borderEndStartRadius:0,borderEndEndRadius:0,display:r?"flex":"none"},children:(0,u.jsx)(eu,{backgroundColor:"white"})}),(0,u.jsx)(eC.ZP,{crop:d,keepSelection:!0,onChange:e=>c(e),onComplete:e=>x(e),disabled:r,style:{width:"100%"},children:(0,u.jsx)("img",{src:s,ref:h,alt:"answer uploaded by user",style:{width:"100%",borderRadius:12,borderEndStartRadius:0,borderEndEndRadius:0}})})]}):(0,u.jsx)(F.Z,{sx:{overflow:"hidden","&&& video":{width:"100%",borderRadius:3,borderEndStartRadius:0,borderEndEndRadius:0}},children:(0,u.jsx)(ej(),{onTakePhoto:e=>{l(e)},imageType:"jpg",imageCompression:.5,isSilentMode:!0,idealFacingMode:t,isFullscreen:!1,isImageMirror:!1})}),(0,u.jsxs)(y.Z,{direction:"row",justifyContent:i?"space-between":"end",sx:{py:1.5,px:1},children:[i&&(0,u.jsx)(R.Z,{onClick:g,sx:{px:2,borderRadius:16,color:o.colors.textIcon.placeholder,"&:hover":{color:o.colors.button.primary,background:o.colors.ui.bg_light},":disabled":{color:o.colors.common.primary[300]}},disabled:r,children:(0,u.jsx)(eS.Z,{sx:{height:16,width:16}})}),s&&(0,u.jsxs)(y.Z,{direction:"row",children:[(0,u.jsx)(ep.Z,{onClick:()=>{l(null),c(eE),x(eE)},sx:{textTransform:"none",borderRadius:16,color:o.colors.textIcon.primary,":hover":{background:o.colors.ui.bg_light},":disabled":{color:o.colors.common.primary[300]}},variant:"link-sm",disabled:r,children:"Take Another Photo"}),(0,u.jsx)(ep.Z,{variant:"link-sm",sx:{textTransform:"none",borderRadius:16,color:o.colors.textIcon.standout,":hover":{background:o.colors.ui.bg_light},":disabled":{color:o.colors.common.primary[300]}},onClick:async()=>{if(p&&h.current){let e=h.current,t=new OffscreenCanvas(p.width,p.height);eZ(e,t,p,1,0),n(new File([await t.convertToBlob({type:"image/png"})],"your_answer.png",{type:"image/png"}))}},disabled:!p||r,children:"Upload"})]})]})]})};var eF=t(38001),eT=t(78315);let eR=e=>{let{id:n,refetch:t,deleteNode:i,onBackClick:a}=e,{siteUrl:r}=(0,S.JR)(),o=(0,k.Z)();return(0,eT.Yz)(t,2e3),(0,u.jsxs)(ee,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:"none",background:o.colors.ui.border},deleteNode:i,children:[(0,u.jsxs)(F.Z,{sx:{p:2.75,background:"white",borderRadius:o.spacing(1.5),maxWidth:o.spacing(26)},children:[(0,u.jsxs)(F.Z,{sx:{position:"relative",p:2.25},children:[(0,u.jsx)(F.Z,{position:"absolute",sx:{top:0,left:0,width:o.spacing(4),height:o.spacing(4),border:"3px solid ".concat(o.colors.textIcon.primary),borderBottom:"none",borderRight:"none",borderRadius:"12px 0 0 0"},children:"\xa0"}),(0,u.jsx)(F.Z,{position:"absolute",sx:{top:0,right:0,width:o.spacing(4),height:o.spacing(4),border:"3px solid ".concat(o.colors.textIcon.primary),borderBottom:"none",borderLeft:"none",borderRadius:"0 12px 0 0"},children:"\xa0"}),(0,u.jsx)(F.Z,{position:"absolute",sx:{bottom:0,left:0,width:o.spacing(4),height:o.spacing(4),border:"3px solid ".concat(o.colors.textIcon.primary),borderTop:"none",borderRight:"none",borderRadius:"0 0 0 12px"},children:"\xa0"}),(0,u.jsx)(F.Z,{position:"absolute",sx:{bottom:0,right:0,width:o.spacing(4),height:o.spacing(4),border:"3px solid ".concat(o.colors.textIcon.primary),borderTop:"none",borderLeft:"none",borderRadius:"0 0 12px 0"},children:"\xa0"}),(0,u.jsx)(eF.ZP,{value:"".concat(r,"/user-image-upload/").concat(n,"/"),level:"L",style:{width:"100%",height:"100%"}})]}),(0,u.jsx)(b.Z,{variant:"p-sm-rg",textTransform:"none",sx:{"&&&":{mt:2,color:o.colors.textIcon.placeholder,maxWidth:o.spacing(36),textAlign:"center"}},children:"Scan this QR Code to take a photo from your phone or another device"}),(0,u.jsx)(ep.Z,{variant:"link-sm",sx:{textTransform:"none",borderRadius:16,textAlign:"center",width:"100%",color:o.colors.textIcon.primary,":hover":{background:o.colors.ui.bg_light},":disabled":{color:o.colors.common.primary[300]}},onClick:()=>{navigator.clipboard.writeText("".concat(r,"/user-image-upload/").concat(n,"/")),el.A9.info("Link copied",{autoHideDuration:1500})},children:"Or copy the link"})]}),(0,u.jsx)(eu,{sx:{my:2},backgroundColor:"white"}),(0,u.jsx)(b.Z,{variant:"p-xs-rg",textTransform:"none",sx:{"&&&":{mb:2,color:o.colors.textIcon.info,maxWidth:o.spacing(36),textAlign:"center"}},children:"Checking for uploaded images..."}),(0,u.jsx)(R.Z,{sx:{my:0,px:2,borderRadius:16,color:o.colors.textIcon.placeholder,"&:hover":{color:o.colors.button.primary,background:o.colors.ui.bg_light}},onClick:a,children:(0,u.jsx)(eS.Z,{sx:{height:16,width:16}})})]})},e_=es.kg.child({from:"UserImage"}),eU=e=>{var n,t,i;let{api:a}=(0,eo.Qy)(),{node:r,updateAttributes:o,extension:s,deleteNode:d}=e,c=s.options.editable,[p,x]=(0,m.useState)(l.Placeholder),h=(0,m.useCallback)(()=>{x(l.Placeholder)},[]),{isLoading:g,mutate:k}=(0,ea.useMutation)({mutationFn:async()=>{if(r.attrs.id)return r.attrs.id;if(!c)return;let{data:e,errors:n}=await a.media.mutate({mutation:er.wm,variables:{input:{entityId:s.options.entityId,entityType:s.options.entityType}}});if(!e||!e.createUserImage||n)throw el.A9.error("Failed to create user image"),e_.warn("Failed to create user image",{data:e,errors:n||void 0,entityId:s.options.entityId,entityType:s.options.entityType}),Error("Failed to create user image");if("MutationCreateUserImageSuccess"!==e.createUserImage.__typename)throw el.A9.error("Failed to create user image"),e_.warn("Failed to create user image",{data:e}),Error("Failed to create user image");let t=e.createUserImage.data.id;return o({id:t}),t}}),{data:y,isLoading:b,refetch:v}=(0,ea.useQuery)(eo.iP.userImage(null!==(n=r.attrs.id)&&void 0!==n?n:""),async()=>{var e,n;if(!r.attrs.id)return;let t=null===(e=s.options.imageCache)||void 0===e?void 0:e.find(e=>e.id===r.attrs.id);if(t&&!c)return t;let{data:i}=await a.media.query({query:er.wl,variables:{id:r.attrs.id}});if((null===(n=i.userImage)||void 0===n?void 0:n.__typename)==="QueryUserImageSuccess")return i.userImage.data},{enabled:!!r.attrs.id}),{isUploading:f,uploadImage:j}=(0,ed.HL)();return(0,m.useEffect)(()=>{k()},[k]),(0,u.jsx)(E.T5,{children:b||g?(0,u.jsx)(ee,{children:(0,u.jsx)(eu,{})}):(null==y?void 0:y.isUploaded)&&"UserImageUrlSuccess"===y.url.__typename?(0,u.jsx)(ee,{deleteNode:c?d:void 0,sx:{p:0,border:"none"},children:(0,u.jsx)("img",{src:y.url.data,alt:"User Answer",width:"100%",style:{maxWidth:"100%",width:"100%",borderRadius:12,zIndex:-1}})}):c?p===l.Placeholder?(0,u.jsx)(ev,{id:null!==(t=r.attrs.id)&&void 0!==t?t:"",onStateChange:x,onFileUpload:async e=>{var n;await j({file:e,id:null!==(n=r.attrs.id)&&void 0!==n?n:"",api:a}),v()},deleteNode:d,isUploading:f}):p===l.UseCamera?(0,u.jsx)(eN,{onTakePhoto:async e=>{var n;await j({file:e,id:null!==(n=r.attrs.id)&&void 0!==n?n:"",api:a}),v()},onBackClick:h,deleteNode:d,isUploading:f}):(0,u.jsx)(eR,{deleteNode:d,id:null!==(i=r.attrs.id)&&void 0!==i?i:"",onBackClick:h,refetch:v}):(0,u.jsx)(u.Fragment,{})})},eP=ei.Ee.extend({name:"userImage",group:"inline",inline:!0,atom:!0,addOptions(){var e;return{...null===(e=this.parent)||void 0===e?void 0:e.call(this),editable:!0}},addAttributes:()=>({id:{default:"",parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>({"data-id":e.id})}}),parseHTML(){return[{tag:'img[data-type="'.concat(this.name,'"]')}]},renderHTML(e){let{HTMLAttributes:n}=e;return["img",(0,M.P1)({"data-type":this.name},this.options.HTMLAttributes,n)]},addCommands:()=>({uploadImageBlock:()=>e=>{let{commands:n}=e;return n.insertContent({type:"userImage"})}}),addNodeView:()=>(0,E.fW)(eU)});var eM=t(25237);let eA=t.n(eM)()(()=>Promise.all([t.e(2769),t.e(9866)]).then(t.bind(t,59866)).then(e=>e.MathEditor),{loadableGenerated:{webpack:()=>[59866]},ssr:!1});var eQ=e=>{let n=e.node.attrs.content,t=(0,m.useRef)(null),i=e.node.type.name;return(0,u.jsx)(E.T5,{className:"inlineMath"===i?"inline-math":"block-math",children:(0,u.jsx)(eA,{ref:t,editable:e.extension.options.editable,value:n,editor:e.editor,onChange:n=>{e.updateAttributes({content:n})},deleteNode:e.deleteNode,getPos:e.getPos,type:i})})},eq=M.NB.create({name:"inlineMath",group:"inline",inline:!0,selectable:!1,atom:!0,addOptions:()=>({editable:!0}),addAttributes:()=>({content:{default:"",renderHTML:e=>({content:e.content})}}),parseHTML(){return[{tag:'span[data-type="'.concat(this.name,'"]')}]},renderHTML(e){let{HTMLAttributes:n}=e;return["span",(0,M.P1)({"data-type":this.name},this.options.HTMLAttributes,n)]},addNodeView:()=>(0,E.fW)(eQ),addCommands(){return{addInlineMath:()=>e=>{let{commands:n}=e;return n.insertContent({type:this.name})}}}}),ez=M.NB.create({name:"blockMath",group:"inline",inline:!0,selectable:!1,atom:!0,addOptions:()=>({editable:!0}),addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.chain().addBlockMath().run()}},addAttributes:()=>({content:{default:"",renderHTML:e=>({content:e.content})}}),parseHTML(){return[{tag:'span[data-type="'.concat(this.name,'"]')}]},renderHTML(e){let{HTMLAttributes:n}=e;return["span",(0,M.P1)({"data-type":this.name},this.options.HTMLAttributes,n)]},addNodeView:()=>(0,E.fW)(eQ),addCommands(){return{addBlockMath:()=>e=>{let{commands:n}=e;return n.insertContent({type:this.name})}}}}),eD=t(77896);(r=d||(d={})).Freehand="freehand",r.Line="line",r.Select="select",r.ColorPicker="colorPicker",r.Text="text";var eL=t(71210);let eB=e=>{let{colorPicked:n,handleColorChange:t}=e,i=(0,k.Z)(),a=[i.colors.common.brick[700],"#985514",i.colors.common.gold[700],i.colors.common.success[700],i.colors.common.brand[700],i.colors.common.purple[600],i.colors.common.primary[700],i.colors.common.grey[700],i.colors.common.brick[500],"#FE8E22",i.colors.common.gold[500],i.colors.common.success[500],i.colors.common.brand[500],i.colors.common.purple[400],i.colors.common.primary[400],i.colors.common.grey[500]];return(0,u.jsx)(F.Z,{sx:{position:"absolute",top:"100%",left:"50%",zIndex:9999,transform:"translateX(-50%)",marginTop:"8px",marginLeft:"-4px"},children:(0,u.jsx)(eL.e8,{colors:a,color:n,triangle:"hide",width:"200px",onChangeComplete:e=>t(e.hex),styles:{default:{swatch:{width:"16px",height:"16px",borderRadius:"50%"},input:{display:"none"},hash:{display:"none"}}}})})};(o=c||(c={}))[o.Small=0]="Small",o[o.Large=1]="Large";let eO=[{title:"Pen",mode:d.Freehand,icon:(0,u.jsx)(I.vd,{})},{title:"Line",mode:d.Line,icon:(0,u.jsx)(I.cc,{})},{title:"Select",mode:d.Select,icon:(0,u.jsx)(I.CF,{})},{title:"Text",mode:d.Text,icon:(0,u.jsx)(I.Ig,{})},{title:void 0,mode:d.ColorPicker,icon:(0,u.jsx)(I.YI,{})}],eW=e=>{let{closeCallback:n,clear:t,undo:i,redo:a,canUndo:r,canRedo:o,canClear:s,children:l,title:c,handleDrawingMode:p,drawingMode:x,handleColorChange:h,colorPicked:g,showColorPicker:v}=e,f=(0,k.Z)(),j=(0,m.useRef)(null),[C,S]=(0,m.useState)(1);(0,D.O)(j,n);let w=e=>e===d.ColorPicker?v?f.colors.button.primary:void 0:x===e?f.colors.button.primary:void 0,Z=e=>e===d.ColorPicker?v?f.colors.button.primary:f.palette.action.hover:x===e?f.colors.button.primary:f.palette.action.hover;return(0,u.jsx)(L.Z,{sx:{position:"fixed",zIndex:9999,background:f.colors.ui.bg_light,borderRadius:"24px 24px 0 0",bottom:0,left:0,width:"100vw",flexShrink:0,height:0===C?"35vh":"auto",paddingY:f.spacing(3)},ref:j,children:(0,u.jsxs)(z.Z,{maxWidth:!1,sx:{px:{xs:f.spacing(6),md:f.spacing(8),xl:f.spacing(15)}},children:[(0,u.jsx)(y.Z,{paddingBottom:f.spacing(2.5),sx:{borderRadius:"24px 24px 0 0",background:f.colors.ui.bg_light,flexShrink:0},children:(0,u.jsxs)(y.Z,{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:"center",direction:"row",children:[(0,u.jsx)(y.Z,{children:(0,u.jsx)(b.Z,{variant:"p-md-semibold",textAlign:"center",children:c})}),(0,u.jsxs)(y.Z,{display:"inline-flex",direction:"row",alignItems:"center",gap:f.spacing(1),padding:f.spacing(1),sx:{background:f.colors.ui.border,borderRadius:"32px"},children:[eO.map(e=>{let{title:n,mode:t,icon:i}=e;return(0,u.jsx)(T.Z,{arrow:!0,title:n,children:(0,u.jsx)(R.Z,{onClick:()=>{p(t)},size:"small",sx:{backgroundColor:w(t),"&:hover":{backgroundColor:Z(t)}},children:t===d.ColorPicker?(0,u.jsxs)(u.Fragment,{children:[(0,m.cloneElement)(i,{fill:v?f.colors.button.inverse:void 0}),v&&(0,u.jsx)(eB,{colorPicked:g,handleColorChange:h})]}):(0,m.cloneElement)(i,{fill:x===t?f.colors.button.inverse:void 0})},t)},n)}),(0,u.jsx)(F.Z,{sx:{borderLeft:"1px solid ".concat(f.colors.ui.border_dark),height:"32px"}}),(0,u.jsx)(R.Z,{size:"small",onClick:i,disabled:!r,children:(0,u.jsx)(I.tC,{fill:r?void 0:f.colors.textIcon.disabled})}),(0,u.jsx)(R.Z,{size:"small",onClick:a,disabled:!o,children:(0,u.jsx)(I.tM,{fill:o?void 0:f.colors.textIcon.disabled})}),(0,u.jsx)(R.Z,{size:"small",onClick:t,disabled:!s,children:(0,u.jsx)(I.rF,{fill:s?void 0:f.colors.textIcon.disabled})}),(0,u.jsx)(T.Z,{arrow:!0,title:0===C?"Expand Editor to biggest size":"Shrink editor to smallest size",children:(0,u.jsx)(R.Z,{size:"small",onClick:()=>{0===C?S(1):S(0)},children:0===C?(0,u.jsx)(I.S3,{}):(0,u.jsx)(I.G2,{})})})]}),(0,u.jsx)(y.Z,{alignItems:"center",children:s?(0,u.jsx)(ep.Z,{onClick:n,variant:"ghost",color:"cta",children:"Save & Close"}):(0,u.jsx)(ep.Z,{onClick:n,variant:"ghost",color:"primary",sx:{minWidth:"135px"},children:"Close"})})]})}),l]})})},eV=e=>{let{saveAndClose:n,title:t,backgroundImageUrl:i,isDefaultBackground:a}=e,r=(0,m.useRef)(null),o=(0,m.useRef)(null),s=(0,m.useRef)(null),[l,c]=(0,m.useState)(!1),[p,x]=(0,m.useState)(!1),[h,g]=(0,m.useState)(!1),[k,v]=(0,m.useState)(d.Freehand),[f,j]=(0,m.useState)("#000000"),[S,w]=(0,m.useState)(!1),[I,Z]=(0,m.useState)(!1),[E,N]=(0,m.useState)(null),[T,R]=(0,m.useState)(!0),[_,U]=(0,m.useState)(null),P=(0,m.useRef)([]),M=!!i&&i.length>0,A=async()=>{let e;if(c(!1),x(!1),!s.current)throw n({}),Error("Canvas is not initialized");if(0===s.current.getObjects().length){var t;n({}),null===(t=s.current)||void 0===t||t.dispose();return}Q(3200,1689),s.current.toCanvasElement().toBlob(async t=>{var i;t&&(e=new File([t],"drawing",{type:"image/png"})),n({file:e}),null===(i=s.current)||void 0===i||i.dispose()})},Q=(e,n)=>{if(!s.current)return;let t=s.current.width,i=s.current.height,a=e/t,r=n/i;s.current.setDimensions({width:e,height:n}),s.current.getObjects().forEach(e=>{e.scaleX=(e.scaleX||1)*a,e.scaleY=(e.scaleY||1)*r,e.left=e.left*a,e.top=e.top*r,e.setCoords()});let o=s.current.backgroundImage;o&&(o.scaleX=o.scaleX*a,o.scaleY=o.scaleY*r,s.current.centerObject(o)),s.current.renderAll()};(0,m.useEffect)(()=>{var e,n,t;return null===(e=s.current)||void 0===e||e.on("mouse:down",z),null===(n=s.current)||void 0===n||n.on("mouse:up",L),null===(t=s.current)||void 0===t||t.on("mouse:move",D),()=>{var e,n,t;null===(e=s.current)||void 0===e||e.off("mouse:down",z),null===(n=s.current)||void 0===n||n.off("mouse:up",L),null===(t=s.current)||void 0===t||t.off("mouse:move",D)}},[k,I,f]),(0,m.useEffect)(()=>{if(M){let e=new Image;e.crossOrigin="",e.src=i,e.onload=()=>{U(e),R(!1)}}else R(!1)},[M,i]),(0,m.useEffect)(()=>(o.current&&null===s.current&&(()=>{if(!o.current)return;let e=new eD.Xz(o.current,{isDrawingMode:!0,centeredScaling:!0,backgroundColor:"#ffffff",width:1136,height:800});if(e.freeDrawingBrush=new eD.pJ(e),e.freeDrawingBrush.color=f,e.freeDrawingBrush.width=2,r.current){let n=r.current.clientWidth,t=r.current.clientHeight;if(0===n||0===t)return;e.setDimensions({width:n,height:t})}if(_){let n=new eD.I(_);B({scaleX:e.width/_.width,scaleY:e.height/_.height,backgroundImage:n,fabricCanvas:e}),e.backgroundImage=n,e.renderAll()}e.on("object:added",()=>{c(!0),g(!0),e.renderAll()}),e.on("object:removed",()=>{x(!0);let n=e.getObjects().length>0;g(n),c(n),e.renderAll()}),s.current=e,window.addEventListener("resize",q)})(),()=>{s.current&&(s.current.dispose(),s.current=null,window.removeEventListener("resize",q))}),[r,_]);let q=(0,m.useCallback)(()=>{if(!s.current||!(null==r?void 0:r.current))return;let e=r.current.clientWidth,n=r.current.clientHeight;if(0===s.current.width||0===s.current.height||0===e||0===n)return;let t=e/s.current.width,i=n/s.current.height;s.current.setDimensions({width:e,height:n});let a=s.current.backgroundImage;a&&B({scaleY:a.scaleY*i,scaleX:a.scaleX*t,backgroundImage:a,fabricCanvas:s.current}),s.current.getObjects().forEach(e=>{e.scaleX=e.scaleX*t,e.scaleY=e.scaleY*i,e.left=e.left*t,e.top=e.top*i,e.setCoords()}),P.current.forEach(e=>{e.scaleX=e.scaleX*t,e.scaleY=e.scaleY*i,e.left=e.left*t,e.top=e.top*i,e.setCoords()}),s.current.renderAll()},[]),z=e=>{if(s.current){if(k===d.Line){let n=s.current.getScenePoint(e.e);if(!n)return;let t=new eD.x1([n.x,n.y,n.x,n.y],{stroke:f,strokeWidth:2});N(t),s.current.add(t)}else if(k===d.Text){if(s.current.getActiveObject())return;let n=s.current.getScenePoint(e.e);if(!n)return;let t="Add text",i=new eD.aW(t,{left:n.x,top:n.y,fill:f,fontSize:24,width:100,hasControls:!0,textAlign:"center",selectionStart:t.length,selectionEnd:t.length});i.initHiddenTextarea(),i.hiddenTextareaContainer=document.getElementById("custom-hidden-text-area"),i.enterEditing(),s.current.add(i),s.current.setActiveObject(i),s.current.renderAll()}Z(!0)}},D=e=>{if(s.current&&I&&k===d.Line){let n=s.current.getScenePoint(e.e);n&&E&&(E.set({x2:n.x,y2:n.y}),s.current.renderAll())}},L=()=>{s.current&&(Z(!1),E&&k===d.Line&&E.setCoords())},B=(0,m.useCallback)(e=>{let{scaleY:n,scaleX:t,backgroundImage:i,fabricCanvas:r}=e;if(a){let e=r.height/i.height,n=i.width>2*i.height?.5*e:.8*e;i.scaleX=n,i.scaleY=n,r.centerObject(i)}else i.scaleY=n,i.scaleX=t},[a]);return(0,u.jsxs)(eW,{closeCallback:A,clear:()=>{var e;null===(e=s.current)||void 0===e||e.getObjects().forEach(e=>{var n,t;e!==(null===(n=s.current)||void 0===n?void 0:n.backgroundImage)&&(P.current.push(e),null===(t=s.current)||void 0===t||t.remove(e))}),x(P.current.length>0)},undo:()=>{if(!s.current)return;let e=s.current.getObjects(),n=e[e.length-1];n&&!n.isType("image")&&(P.current.push(n),s.current.remove(n))},redo:()=>{if(!s.current||0===P.current.length)return;let e=P.current.pop();e&&s.current.add(e)},handleDrawingMode:e=>{if(s.current){if(e===d.ColorPicker){w(!S);return}s.current.skipTargetFind=!0,s.current.selection=!1,e===d.Freehand?s.current.isDrawingMode=!0:e===d.Line?s.current.isDrawingMode=!1:e===d.Select?(s.current.isDrawingMode=!1,s.current.selection=!0,s.current.skipTargetFind=!1):e===d.Text&&(s.current.isDrawingMode=!1,s.current.skipTargetFind=!1,s.current.selection=!0),w(!1),v(e)}},canUndo:l,canRedo:p,canClear:h,colorPicked:f,handleColorChange:e=>{s.current&&(j(e),s.current.freeDrawingBrush&&(s.current.freeDrawingBrush.color=e))},title:t,drawingMode:k,showColorPicker:S,children:[(0,u.jsx)(F.Z,{id:"custom-hidden-text-area"}),(0,u.jsx)(y.Z,{sx:{backgroundColor:"white",position:"relative",borderRadius:"16px",overflow:"hidden"},children:(0,u.jsx)(F.Z,{style:{touchAction:"none",display:"flex",justifyContent:"center",alignContent:"center",height:"75vh",overflow:"hidden"},ref:r,children:M&&T?(0,u.jsxs)(y.Z,{alignItems:"center",justifyContent:"center",p:4,children:[(0,u.jsx)(b.Z,{variant:"p-sm-rg",children:" Loading..."}),(0,u.jsx)(C.aN,{isLoading:!0,size:40})]}):(0,u.jsx)("canvas",{ref:o})})})]})},eH=e=>{let{children:n,...t}=e,i=(0,k.Z)();return(0,u.jsx)(F.Z,{...t,ref:t.innerRef,sx:{borderRadius:3,border:"1px dashed ".concat(i.colors.subjectGroup.science[200]),p:i.spacing(4,2),position:"relative",my:2,...t.sx},children:n})},eG=e=>{let{spacing:n=2,backgroundColor:t,sx:i}=e,a=(0,k.Z)();return(0,u.jsxs)(y.Z,{spacing:n,direction:"row",justifyContent:"center",alignItems:"center",sx:i,children:[(0,u.jsx)(ec.Z,{variant:"rounded",width:a.spacing(1),height:a.spacing(1),sx:{backgroundColor:t}}),(0,u.jsx)(ec.Z,{variant:"rounded",width:a.spacing(1),height:a.spacing(1),sx:{backgroundColor:t}}),(0,u.jsx)(ec.Z,{variant:"rounded",width:a.spacing(1),height:a.spacing(1),sx:{backgroundColor:t}})]})},e$=es.kg.child({from:"DrawingEditor"}),eY=e=>{let{editor:n,extension:t,deleteNode:i,node:a,updateAttributes:r}=e,{initialOpenState:o,entityId:s,entityType:l,imageId:d,imageCache:c,defaultBackgroundImageUrl:p}=a.attrs,{editable:x}=t.options,{api:h}=(0,eo.Qy)(),[g,k]=(0,m.useState)(o&&x||!1),{isUploading:v,uploadImage:f}=(0,ed.HL)(),[j,C]=(0,m.useState)(),S=async e=>{let{file:t}=e;k(!1),n.setEditable(!0),t&&j&&(r({imageId:j}),await f({file:t,id:j,api:h}),_())},{mutate:w,isLoading:Z}=(0,ea.useMutation)({mutationFn:async()=>{let{data:e,errors:n}=await h.media.mutate({mutation:er.wm,variables:{input:{entityId:s,entityType:l}}});if(!e||!e.createUserImage||n)throw el.A9.error("Failed to create user image"),e$.warn("Failed to create user image",{data:e,errors:n||void 0,entityId:s,entityType:l}),Error("Failed to create user image");if("MutationCreateUserImageSuccess"!==e.createUserImage.__typename)throw el.A9.error("Failed to create user image"),e$.warn("Failed to create user image",{data:e}),Error("Failed to create user image");let t=e.createUserImage.data.id;return C(t),t}}),{data:N,refetch:_,isLoading:U}=(0,ea.useQuery)(eo.iP.userImage(null!=d?d:""),async()=>{var e;if(void 0===d)return;let n=null==c?void 0:c.find(e=>e.id===d);if(n&&!x&&"UserImageUrlSuccess"===n.url.__typename)return n.url.data;let{data:t}=await h.media.query({query:er.wl,variables:{id:d}});if((null===(e=t.userImage)||void 0===e?void 0:e.__typename)==="QueryUserImageSuccess"&&"UserImageUrlSuccess"===t.userImage.data.url.__typename)return t.userImage.data.url.data},{enabled:!!d});(0,m.useEffect)(()=>{g&&w()},[g,w]);let P=!!j&&!Z;return(0,u.jsx)(E.T5,{children:U||v||Z?(0,u.jsx)(eH,{children:(0,u.jsx)(eG,{})}):(0,u.jsxs)(eH,{sx:{py:1,pl:2,pr:1},children:[t.options.editable&&(0,u.jsxs)(y.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,u.jsx)(F.Z,{marginTop:"5px",children:(0,u.jsx)(b.Z,{variant:"p-sm-rg",color:"text.secondary",children:!d&&"Add drawing"})}),(0,u.jsxs)(F.Z,{children:[(0,u.jsx)(T.Z,{arrow:!0,title:g?"Close":"Edit",children:(0,u.jsx)(R.Z,{onClick:e=>{e.preventDefault(),k(!0),n.setEditable(!1),n.commands.blur()},children:g?(0,u.jsx)(Q.Z,{fontSize:"small"}):(0,u.jsx)(I.Ry,{fontSize:"small"})})}),(0,u.jsx)(T.Z,{arrow:!0,title:"Delete",children:(0,u.jsx)(R.Z,{onClick:()=>{i()},children:(0,u.jsx)(I.rF,{fontSize:"small"})})})]})]}),t.options.editable&&g&&P&&(0,u.jsx)(eV,{backgroundImageUrl:N||p,isDefaultBackground:void 0===N,saveAndClose:S,title:t.options.title}),N&&(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("img",{src:N,alt:"User Drawing",width:"100%",style:{maxWidth:"100%",width:"100%",borderRadius:12}})})]})})},eX=M.NB.create({name:"drawingEditor",group:"inline",inline:!0,selectable:!1,atom:!0,addNodeView:()=>(0,E.fW)(eY),addAttributes(){return{initialOpenState:{default:!1,renderHTML:()=>({})},entityId:{default:this.options.entityId,renderHTML:()=>({})},entityType:{default:this.options.entityType,renderHTML:()=>({})},defaultBackgroundImageUrl:{default:this.options.defaultBackgroundImageUrl,renderHTML:()=>({})},imageId:{default:"",parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>({"data-id":e.imageId})}}},addKeyboardShortcuts(){return{"Mod-d":()=>this.editor.chain().addFabric().run()}},renderHTML(e){let{HTMLAttributes:n}=e;return["img",(0,M.P1)({"data-type":this.name},this.options.HTMLAttributes,n)]},parseHTML(){return[{tag:'img[data-type="'.concat(this.name,'"]')}]},addCommands(){return{addFabric:()=>e=>{let{chain:n,editor:t}=e;return t.isEditable&&t.setEditable(!1),n().blur().insertContent({type:this.name,attrs:{initialOpenState:!0}}).run()}}}});var eK=t(9736);let eJ=e=>{let{editor:n,menubarItems:t,imageUploadEnabled:i,questionImageUrl:a}=e,[r]=(0,eK.CJ)("ASSESSMENTS_IMAGE_UPLOAD"),o=!!a,s=(0,k.Z)();return n?(0,u.jsxs)(y.Z,{className:"MenuBar",direction:"row",justifyContent:"space-between",alignItems:"center",sx:{flex:0,px:2,pt:2},children:[(0,u.jsx)(F.Z,{children:(0,u.jsxs)(y.Z,{direction:"row",flexWrap:"wrap",alignItems:"center",spacing:.5,children:[r&&i&&(0,u.jsx)(T.Z,{arrow:!0,title:"Upload Image",placement:"bottom",children:(0,u.jsx)(R.Z,{onClick:()=>n.chain().uploadImageBlock().run(),sx:{background:s.colors.ui.border,borderRadius:4,p:s.spacing(1),minWidth:32},children:(0,u.jsx)(I.XB,{sx:{height:"16px",width:"16px"}})})}),o?(0,u.jsx)(T.Z,{arrow:!0,title:(0,u.jsxs)(y.Z,{width:"120px",height:"auto",display:"flex",flexDirection:"column",alignSelf:"stretch",justifyContent:"center",alignItems:"center",gap:"4px",sx:{paddingY:"4px"},children:[(0,u.jsx)(F.Z,{sx:{backgroundColor:a.includes("data:image/png;base64")?"transparent":"white"},children:(0,u.jsx)(P(),{src:a,alt:"",width:120,height:120})}),(0,u.jsx)(F.Z,{children:(0,u.jsx)(b.Z,{variant:"p-sm-rg",textAlign:"center",sx:{whiteSpace:"normal",wordWrap:"break-word",overflowWrap:"break-word"},children:"Drawing Tool Image Preview"})})]}),children:(0,u.jsx)(R.Z,{onClick:()=>n.chain().addFabric().run(),sx:{background:s.colors.ui.border,borderRadius:4,p:s.spacing(1),minWidth:32},children:(0,u.jsx)(I.uZ,{sx:{height:"16px",width:"16px"}})})}):(0,u.jsx)(T.Z,{arrow:!0,title:"Drawing Tool",children:(0,u.jsx)(R.Z,{onClick:()=>n.chain().addFabric().run(),sx:{background:s.colors.ui.border,borderRadius:4,p:s.spacing(1),minWidth:32},children:(0,u.jsx)(I.vd,{sx:{height:"16px",width:"16px"}})})}),(0,u.jsx)(T.Z,{arrow:!0,title:"Handwrite Math",placement:"bottom",children:(0,u.jsx)(R.Z,{onClick:()=>n.chain().addMyScript().run(),sx:{background:s.colors.ui.border,borderRadius:4,p:s.spacing(1),minWidth:32},children:(0,u.jsx)(I.z6,{sx:{height:"16px",width:"16px"}})})}),(0,u.jsx)(T.Z,{arrow:!0,title:"Type Math",placement:"bottom",children:(0,u.jsx)(R.Z,{onClick:()=>n.chain().addBlockMath().run(),sx:{background:s.colors.ui.border,borderRadius:4,p:s.spacing(1),minWidth:32},children:(0,u.jsx)(I.Yi,{sx:{height:"16px",width:"16px"}})})})]})}),(0,u.jsx)(F.Z,{children:t})]}):null},e0=e=>{let{content:n,updateContent:t,editorKey:i,menubarItems:a,editable:r=!0,title:o="",sx:s,hideMenuBar:l,entityType:d,entityId:c,imageCache:m,questionImageUrl:p}=e,[x]=(0,eK.CJ)("ASSESSMENTS_IMAGE_UPLOAD"),h=(0,k.Z)(),b=!!(x&&d&&c),v=[N.Z,ez.configure({editable:r}),eq.configure({editable:r}),et.configure({editable:r,title:o}),eX.configure({editable:!0,title:"Draw your answer below",entityId:c,entityType:d,defaultBackgroundImageUrl:p})];b&&v.push(eP.configure({entityType:d,entityId:c,editable:r,imageCache:m}));let f=(0,E.jE)({extensions:v,content:null!=n?n:"<p></p>",onUpdate:e=>{let{editor:n}=e,i=n.getHTML();null==t||t(i)},editable:r,immediatelyRender:!1},[i,r,!!n]);return f?(0,u.jsxs)(y.Z,{className:"editor",sx:{border:"none !important",backgroundColor:h.colors.ui.bg_light,borderRadius:4,minHeight:{xs:"150px",md:"200px",lg:"150px"},width:"100%","& math-field":{backgroundColor:h.colors.ui.bg_light,p:"0 !important",m:"0 !important"},"& math-field:focus":{outline:g.O.blue.dark},"& fieldset":{border:"none"},"& p":{margin:0,marginBottom:.5},"& .ProseMirror":{padding:2,outline:"none",width:"100%",flex:1},"&>div:not(.MenuBar)":{flex:1,display:"flex"},"& math-field::part(virtual-keyboard-toggle):after":{display:"none !important"},"& .inline-math":{display:"inline-flex",flexFlow:"column",maxWidth:"100%",px:.5},"& .block-math":{display:"block"},...s},children:[r&&!l&&(0,u.jsx)(eJ,{editor:f,menubarItems:a,imageUploadEnabled:b,questionImageUrl:p}),(0,u.jsx)(E.kg,{editor:f})]}):null},e4=e=>(0,u.jsx)(_.Z,{theme:Z.rS,children:(0,u.jsx)(e0,{...e})})},41372:function(e,n,t){"use strict";t.d(n,{J0:function(){return s},hE:function(){return c},KD:function(){return w},FL:function(){return m},HL:function(){return f},UG:function(){return C}});var i=t(52322),a=t(84311),r=t(78502),o=t(38268);let s=()=>{let e=(0,r.Z)();return(0,i.jsx)(a.IY,{iconBackground:e.colors.common.brand[100],sx:{my:18},icon:(0,i.jsx)(o.Z,{sx:{height:56,width:56,fill:e.colors.common.brand[600]}}),message:"You are done",messageProps:{sx:{color:e.colors.common.brand[600],maxWidth:280}},subText:(0,i.jsxs)(i.Fragment,{children:["You have successfully uploaded your image.",(0,i.jsx)("br",{}),"You may close this browser!"]})})};var l=t(92823);let d=e=>"ImageAlreadyUploadedError"===e?{message:"Image already uploaded",subText:"You have already already uploaded this image"}:{message:"Unknown Error Occurred",subText:"Unfortunately an unexpected Error Occurred"},c=e=>{let{error:n}=e,t=(0,r.Z)(),{message:o,subText:s}=d(n);return(0,i.jsx)(a.IY,{iconBackground:t.colors.common.brick[100],sx:{my:18},icon:(0,i.jsx)(l.Z,{sx:{height:56,width:56,fill:t.colors.textIcon.on_error}}),message:o,messageProps:{sx:{color:t.colors.textIcon.on_error,maxWidth:280}},subText:s})};var u=t(2784);let m=()=>{let e=(0,u.useRef)(null),n=(0,u.useCallback)(()=>{var n;null===(n=e.current)||void 0===n||n.click()},[]);return{ref:e,handleUploadClick:n}};var p=t(10334),x=t(96802),h=t(60418);let g=x.kg.child({from:"uploadImage"}),k=async e=>{var n;let{file:t,id:i,api:a}=e,{data:r,errors:o}=await a.media.query({query:p.hf,variables:{id:i,contentType:"image/png"}});if(null==o?void 0:o.length)throw g.warn("Failed to get upload URL",{errors:o}),Error("Failed to get upload URL");if(!r.userImage)throw g.warn("No data found for user image",{id:i}),Error("Failed to get upload URL");if("QueryUserImageSuccess"!==r.userImage.__typename)throw g.warn("Invalid userImage type for user image",{id:i}),Error("Failed to get upload URL");if((null===(n=r.userImage.data.uploadUrl)||void 0===n?void 0:n.__typename)!=="UserImageUploadUrlSuccess")throw g.warn("Invalid upload URL found for user image",{id:i}),Error("Failed to get upload URL");return y({file:t,uploadUrl:r.userImage.data.uploadUrl.data,id:i,api:a})},y=async e=>{let{file:n,uploadUrl:t,id:i,api:a}=e;await h.Z.put(t,n,{headers:{"Content-Type":n.type}});let{data:r,errors:o}=await a.media.mutate({mutation:p.Jt,variables:{id:i}});if(null==o?void 0:o.length)throw g.warn("Failed to update image ".concat(o[0].message),{id:i}),Error("Failed to update image ".concat(o[0].message));if(!(null==r?void 0:r.uploadedUserImage)){var s,l;throw g.warn("Failed to upload image because of uploadedUserImage is empty. ".concat(null==r?void 0:null===(s=r.uploadedUserImage)||void 0===s?void 0:s.__typename),{id:i}),Error("Failed to upload image ".concat(null==r?void 0:null===(l=r.uploadedUserImage)||void 0===l?void 0:l.__typename))}if("MutationUploadedUserImageSuccess"!==r.uploadedUserImage.__typename)throw g.warn("Failed to upload image ".concat(r.uploadedUserImage.__typename),{id:i}),Error("Failed to upload image ".concat(r.uploadedUserImage.__typename));if("UserImageUrlSuccess"!==r.uploadedUserImage.data.url.__typename)throw g.warn("Failed to fetch image url ".concat(r.uploadedUserImage.data.url.__typename),{id:i}),Error("Failed to fetch image url ".concat(r.uploadedUserImage.data.url.__typename));return r.uploadedUserImage.data.url.data};var b=t(24502);let v=x.kg.child({from:"useUploadImage"}),f=()=>{let[e,n]=(0,u.useState)(!1),[t,i]=(0,u.useState)(null);return{isUploading:e,uploadImage:(0,u.useCallback)(async e=>{let{file:t,id:a,api:r}=e;n(!0),i(null);try{await k({file:t,id:a,api:r})}catch(e){if(v.error("Failed to upload image",{error:e}),e instanceof Error){b.A9.error(e.message),i(e);return}i(Error("Unknown error occurred")),b.A9.error("Something went wrong. Please try again or contact support.")}finally{n(!1)}},[]),error:t}},j=x.kg.child({from:"useUploadImageWithUploadUrl"}),C=()=>{let[e,n]=(0,u.useState)(!1),[t,i]=(0,u.useState)(null);return{isLoading:e,uploadImageWithUploadUrl:(0,u.useCallback)(async e=>{n(!0),i(null);try{await y(e)}catch(e){if(j.error("Failed to upload image",{error:e}),e instanceof Error){b.A9.error(e.message),i(e);return}i(Error("Unknown error occurred")),b.A9.error("Something went wrong. Please try again or contact support.")}finally{n(!1)}},[]),error:t}},S=x.kg.child({from:"fetchUserImagesForEntityIds"}),w=async(e,n)=>{let{entityIds:t,entityType:i}=n,{data:a,errors:r}=await e.media.query({query:p.R,variables:{input:{filter:{entityIds:t,entityType:i}}}});if(null==r?void 0:r.length)throw S.warn("Error fetching user images by entity ids",{errors:r}),Error("Error fetching user images by entity ids");if(!a||"QuerySearchUserImagesByEntityIdsSuccess"!==a.searchUserImagesByEntityIds.__typename)throw S.warn("No data found for user images by entity ids ",{entityIds:t,entityType:i}),Error("No data found");return a.searchUserImagesByEntityIds.data.data}},76978:function(e,n,t){"use strict";t.d(n,{g:function(){return o}});var i=t(52322),a=t(39097),r=t.n(a);let o=e=>{let{href:n,style:t,children:a,...o}=e;return n?(0,i.jsx)(r(),{href:n,style:{textDecoration:"none",...t},...o,children:a}):(0,i.jsx)(i.Fragment,{children:a})}},50633:function(){}}]);