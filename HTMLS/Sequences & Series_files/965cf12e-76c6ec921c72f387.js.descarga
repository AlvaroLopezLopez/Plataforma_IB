"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[325],{84124:function(e,t,n){n.d(t,{z2:function(){return rv}});var r={EventType:{IDLE:"idle",CHANGED:"changed",IMPORTED:"imported",EXPORTED:"exported",CONVERTED:"converted",RENDERED:"rendered",LOADED:"loaded",UNDO:"undo",REDO:"redo",CLEAR:"clear",IMPORT:"import",SUPPORTED_IMPORT_MIMETYPES:"supportedImportMimeTypes",EXPORT:"export",CONVERT:"convert",ERROR:"error"},RecognitionType:{TEXT:"TEXT",MATH:"MATH",DIAGRAM:"DIAGRAM",RAWCONTENT:"Raw Content"},Protocol:{WEBSOCKET:"WEBSOCKET",REST:"REST"},Trigger:{QUIET_PERIOD:"QUIET_PERIOD",POINTER_UP:"POINTER_UP",DEMAND:"DEMAND"},Logger:{EDITOR:"editor",MODEL:"model",GRABBER:"grabber",RENDERER:"renderer",RECOGNIZER:"recognizer",EVENT:"event",UTIL:"util",SMARTGUIDE:"smartguide"},LogLevel:{TRACE:"TRACE",DEBUG:"DEBUG",INFO:"INFO",WARN:"WARN",ERROR:"ERROR"},Languages:{zh_CN:"Noto Sans CJK tc",zh_HK:"Noto Sans CJK tc",zh_TW:"Noto Sans CJK tc",ko_KR:"Noto Sans CJK kr",ja_JP:"Noto Sans CJK jp",default:"MyScriptInter"},Error:{NOT_REACHABLE:"MyScript recognition server is not reachable. Please reload once you are connected.",WRONG_CREDENTIALS:"Application credentials are invalid. Please check or regenerate your application key and hmackey.",TOO_OLD:"Session is too old. Max Session Duration Reached.",NO_ACTIVITY:"Session closed due to no activity.",CANT_ESTABLISH:"Unable to establish a connection to the server. Check the host and your connectivity",CLOSE:"Connection closed"},Exports:{JIIX:"application/vnd.myscript.jiix"}},i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a(e,t){return e(t={exports:{}},t.exports),t.exports}var s=(0,a(function(e){var t;t=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function i(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(t,n){for(var i=0;i<r.length;i++){var o=r[i];this[o]=i<t?e:this.methodFactory(o,t,n)}this.log=this.debug}function s(e,n,r){return function(){typeof console!==t&&(a.call(this,n,r),this[e].apply(this,arguments))}}function c(r,a,c){var l;return"debug"===(l=r)&&(l="log"),typeof console!==t&&("trace"===l&&n?o:void 0!==console[l]?i(console,l):void 0!==console.log?i(console,"log"):e)||s.apply(this,arguments)}function l(e,n,i){var o,s=this,l="loglevel";function u(){var e;if(typeof window!==t){try{e=window.localStorage[l]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(l)+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r))[1])}catch(e){}return void 0===s.levels[e]&&(e=void 0),e}}e&&(l+=":"+e),s.name=e,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=i||c,s.getLevel=function(){return o},s.setLevel=function(n,i){if("string"==typeof n&&void 0!==s.levels[n.toUpperCase()]&&(n=s.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(o=n,!1!==i&&function(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t){try{return void(window.localStorage[l]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"="+n+";"}catch(e){}}}(n),a.call(s,n,e),typeof console===t&&n<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(e){u()||s.setLevel(e,!1)},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)};var d=u();null==d&&(d=null==n?"WARN":n),s.setLevel(d,!1)}var u=new l,d={};u.getLogger=function(e){if("string"!=typeof e||""===e)throw TypeError("You must supply a name when creating a logger.");var t=d[e];return t||(t=d[e]=new l(e,u.getLevel(),u.methodFactory)),t};var p=typeof window!==t?window.log:void 0;return u.noConflict=function(){return typeof window!==t&&window.log===u&&(window.log=p),u},u.getLoggers=function(){return d},u},e.exports?e.exports=t():i.log=t()}).noConflict)(),c=s.getLogger(r.Logger.EDITOR);c.setDefaultLevel(r.LogLevel.ERROR),s.getLogger(r.Logger.SMARTGUIDE),c.setDefaultLevel(r.LogLevel.ERROR);var l=s.getLogger(r.Logger.MODEL);l.setDefaultLevel(r.LogLevel.ERROR);var u=s.getLogger(r.Logger.GRABBER);u.setDefaultLevel(r.LogLevel.ERROR);var d=s.getLogger(r.Logger.RENDERER);d.setDefaultLevel(r.LogLevel.ERROR);var p=s.getLogger(r.Logger.RECOGNIZER);p.setDefaultLevel(r.LogLevel.ERROR);var h=s.getLogger(r.Logger.EVENT);h.setDefaultLevel(r.LogLevel.ERROR),s.getLogger(r.Logger.UTIL).setDefaultLevel(r.LogLevel.ERROR),s.getLogger("test").setDefaultLevel(r.LogLevel.ERROR);var f=a(function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t}),g=a(function(e,t){var n,r,o,a,s,c,l,u,d,p="__lodash_hash_undefined__",h="[object Arguments]",f="[object Function]",g="[object Object]",m=/^\[object .+?Constructor\]$/,v=/^(?:0|[1-9]\d*)$/,y={};y["[object Float32Array]"]=y["[object Float64Array]"]=y["[object Int8Array]"]=y["[object Int16Array]"]=y["[object Int32Array]"]=y["[object Uint8Array]"]=y["[object Uint8ClampedArray]"]=y["[object Uint16Array]"]=y["[object Uint32Array]"]=!0,y[h]=y["[object Array]"]=y["[object ArrayBuffer]"]=y["[object Boolean]"]=y["[object DataView]"]=y["[object Date]"]=y["[object Error]"]=y[f]=y["[object Map]"]=y["[object Number]"]=y[g]=y["[object RegExp]"]=y["[object Set]"]=y["[object String]"]=y["[object WeakMap]"]=!1;var b,x,E,w="object"==typeof i&&i&&i.Object===Object&&i,k="object"==typeof self&&self&&self.Object===Object&&self,S=w||k||Function("return this")(),T=t&&!t.nodeType&&t,C=T&&e&&!e.nodeType&&e,P=C&&C.exports===T,_=P&&w.process,L=function(){try{return C&&C.require&&C.require("util").types||_&&_.binding&&_.binding("util")}catch(e){}}(),R=L&&L.isTypedArray,A=Array.prototype,M=Function.prototype,I=Object.prototype,z=S["__core-js_shared__"],O=M.toString,N=I.hasOwnProperty,D=(E=/[^.]+$/.exec(z&&z.keys&&z.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"",j=I.toString,H=O.call(Object),U=RegExp("^"+O.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),X=P?S.Buffer:void 0,W=S.Symbol,B=S.Uint8Array,Y=X?X.allocUnsafe:void 0,F=(b=Object.getPrototypeOf,x=Object,function(e){return b(x(e))}),G=Object.create,J=I.propertyIsEnumerable,K=A.splice,V=W?W.toStringTag:void 0,q=function(){try{var e=ef(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Z=X?X.isBuffer:void 0,Q=Math.max,$=Date.now,ee=ef(S,"Map"),et=ef(Object,"create"),en=function(){function e(){}return function(t){if(!eC(t))return{};if(G)return G(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function er(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ei(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function eo(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ea(e){var t=this.__data__=new ei(e);this.size=t.size}function es(e,t,n){(void 0===n||eb(e[t],n))&&(void 0!==n||t in e)||el(e,t,n)}function ec(e,t){for(var n=e.length;n--;)if(eb(e[n][0],t))return n;return -1}function el(e,t,n){"__proto__"==t&&q?q(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}er.prototype.clear=function(){this.__data__=et?et(null):{},this.size=0},er.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},er.prototype.get=function(e){var t=this.__data__;if(et){var n=t[e];return n===p?void 0:n}return N.call(t,e)?t[e]:void 0},er.prototype.has=function(e){var t=this.__data__;return et?void 0!==t[e]:N.call(t,e)},er.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=et&&void 0===t?p:t,this},ei.prototype.clear=function(){this.__data__=[],this.size=0},ei.prototype.delete=function(e){var t=this.__data__,n=ec(t,e);return!(n<0)&&(n==t.length-1?t.pop():K.call(t,n,1),--this.size,!0)},ei.prototype.get=function(e){var t=this.__data__,n=ec(t,e);return n<0?void 0:t[n][1]},ei.prototype.has=function(e){return ec(this.__data__,e)>-1},ei.prototype.set=function(e,t){var n=this.__data__,r=ec(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},eo.prototype.clear=function(){this.size=0,this.__data__={hash:new er,map:new(ee||ei),string:new er}},eo.prototype.delete=function(e){var t=eh(this,e).delete(e);return this.size-=t?1:0,t},eo.prototype.get=function(e){return eh(this,e).get(e)},eo.prototype.has=function(e){return eh(this,e).has(e)},eo.prototype.set=function(e,t){var n=eh(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},ea.prototype.clear=function(){this.__data__=new ei,this.size=0},ea.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ea.prototype.get=function(e){return this.__data__.get(e)},ea.prototype.has=function(e){return this.__data__.has(e)},ea.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ei){var r=n.__data__;if(!ee||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new eo(r)}return n.set(e,t),this.size=n.size,this};var eu=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[++r];if(!1===t(i[s],s,i))break}return e};function ed(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":V&&V in Object(e)?function(e){var t=N.call(e,V),n=e[V];try{e[V]=void 0;var r=!0}catch(e){}var i=j.call(e);return r&&(t?e[V]=n:delete e[V]),i}(e):j.call(e)}function ep(e){return eP(e)&&ed(e)==h}function eh(e,t){var n,r=e.__data__;return("string"==(n=typeof t)||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?r["string"==typeof t?"string":"hash"]:r.map}function ef(e,t){var n=null==e?void 0:e[t];return!(!eC(n)||D&&D in n)&&(eS(n)?U:m).test(function(e){if(null!=e){try{return O.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(n))?n:void 0}function eg(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&v.test(e))&&e>-1&&e%1==0&&e<t}function em(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||I)}function ev(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var ey=(n=q?function(e,t){return q(e,"toString",{configurable:!0,enumerable:!1,value:function(){return t},writable:!0})}:eA,r=0,o=0,function(){var e=$(),t=16-(e-o);if(o=e,t>0){if(++r>=800)return arguments[0]}else r=0;return n.apply(void 0,arguments)});function eb(e,t){return e===t||e!=e&&t!=t}var ex=ep(function(){return arguments}())?ep:function(e){return eP(e)&&N.call(e,"callee")&&!J.call(e,"callee")},eE=Array.isArray;function ew(e){return null!=e&&eT(e.length)&&!eS(e)}var ek=Z||function(){return!1};function eS(e){if(!eC(e))return!1;var t=ed(e);return t==f||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function eT(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function eC(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eP(e){return null!=e&&"object"==typeof e}var e_=R?function(e){return R(e)}:function(e){return eP(e)&&eT(e.length)&&!!y[ed(e)]};function eL(e){return ew(e)?function(e,t){var n=eE(e),r=!n&&ex(e),i=!n&&!r&&ek(e),o=!n&&!r&&!i&&e_(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=s.length;for(var l in e)!t&&!N.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||eg(l,c))||s.push(l);return s}(e,!0):function(e){if(!eC(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=em(e),n=[];for(var r in e)("constructor"!=r||!t&&N.call(e,r))&&n.push(r);return n}(e)}var eR=(a=function(e,t,n){!function e(t,n,r,i,o){t!==n&&eu(n,function(a,s){if(o||(o=new ea),eC(a))!function(e,t,n,r,i,o,a){var s=ev(e,n),c=ev(t,n),l=a.get(c);if(l)return void es(e,n,l);var u=o?o(s,c,n+"",e,t,a):void 0,d=void 0===u;if(d){var p,h,f=eE(c),m=!f&&ek(c),v=!f&&!m&&e_(c);u=c,f||m||v?eE(s)?u=s:eP(s)&&ew(s)?u=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(s):m?(d=!1,u=function(e,t){if(t)return e.slice();var n=e.length,r=Y?Y(n):new e.constructor(n);return e.copy(r),r}(c,!0)):v?(d=!1,new B(h=new(p=c.buffer).constructor(p.byteLength)).set(new B(p)),u=new c.constructor(h,c.byteOffset,c.length)):u=[]:function(e){if(!eP(e)||ed(e)!=g)return!1;var t=F(e);if(null===t)return!0;var n=N.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&O.call(n)==H}(c)||ex(c)?(u=s,ex(s)?u=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=void 0;void 0===c&&(c=e[s]),i?el(n,s,c):function(e,t,n){var r=e[t];N.call(e,t)&&eb(r,n)&&(void 0!==n||t in e)||el(e,t,n)}(n,s,c)}return n}(s,eL(s)):eC(s)&&!eS(s)||(u="function"!=typeof c.constructor||em(c)?{}:en(F(c)))):d=!1}d&&(a.set(c,u),i(u,c,r,o,a),a.delete(c)),es(e,n,u)}(t,n,s,r,e,i,o);else{var c=i?i(ev(t,s),a,s+"",t,n,o):void 0;void 0===c&&(c=a),es(t,s,c)}},eL)}(e,t,n)},ey((l=s=function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(i=a.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(e,t,n){if(!eC(n))return!1;var r=typeof t;return("number"==r?!!(ew(n)&&eg(t,n.length)):"string"==r&&(t in n))&&eb(n[t],e)}(t[0],t[1],o)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var s=t[n];s&&a(e,s,n,i)}return e},u=c,d=eA,u=Q(void 0===u?l.length-1:u,0),function(){for(var e=arguments,t=-1,n=Q(e.length-u,0),r=Array(n);++t<n;)r[t]=e[u+t];t=-1;for(var i=Array(u+1);++t<u;)i[t]=e[t];return i[u]=d(r),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(l,this,i)}),s+""));function eA(e){return e}e.exports=eR}),m={recognitionParams:{type:"TEXT",protocol:"WEBSOCKET",server:{scheme:"https",host:"cloud.myscript.com",applicationKey:void 0,hmacKey:void 0,useWindowLocation:!1,websocket:{pingEnabled:!0,pingDelay:3e4,maxPingLostCount:10,autoReconnect:!0,maxRetryCount:2,fileChunkSize:3e5}},iink:{alwaysConnected:!0,lang:"en_US",gesture:{enable:!0},export:{"image-resolution":300,jiix:{"bounding-box":!1,strokes:!1,text:{chars:!1,words:!0}}},renderer:{debug:{"draw-text-boxes":!1,"draw-image-boxes":!1}},math:{mimeTypes:["application/x-latex","application/mathml+xml"],solver:{enable:!0,"fractional-part-digits":3,"decimal-separator":".","rounding-mode":"half up","angle-unit":"deg"},margin:{bottom:10,left:15,right:15,top:10},eraser:{"erase-precisely":!1}},text:{guides:{enable:!0},smartGuide:!0,smartGuideFadeOut:{enable:!1,duration:1e4},mimeTypes:["text/plain","application/vnd.myscript.jiix"],margin:{top:20,left:10,right:10},eraser:{"erase-precisely":!1}},diagram:{mimeTypes:["application/vnd.myscript.jiix"],margin:{bottom:10,left:15,right:15,top:10}},"raw-content":{recognition:{text:!1,shape:!1}}}},listenerOptions:{capture:!1,passive:!0},undoRedoMaxStackSize:20,xyFloatPrecision:0,timestampFloatPrecision:0,triggerDelay:2e3,processDelay:0,resizeTriggerDelay:200,triggers:{exportContent:"POINTER_UP",addStrokes:"POINTER_UP"},restConversionState:"",renderingParams:{stroker:"quadratic",minHeight:100,minWidth:100}},v=a(function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function e(t){var n=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.toJSON=function(e){if("string"!=typeof e)return console.error("Need a CSS string but given ",void 0===e?"undefined":r(e),e),"Not a valid CSS..!";var t={},i=void 0,o=void 0,a=void 0;try{e.split("{").forEach(function(e){if(o=e.trim()){if(-1===o.indexOf("}"))t[o]={},i=o;else{o.substring(0,o.indexOf("}")).split(";").forEach(function(e){(a=e.split(":"))&&2===a.length&&(t[i][a[0].trim().replace(/^\"|\"$/g,"")]=n._trimSemiColon(a[1].trim().replace(/^\"|\"$/g,"")))});try{(i=o.split("}")[1].trim())&&(t[i]={})}catch(e){}}}})}catch(e){return"Not a valid CSS..!"}return t},this.toCSS=function(e){if("object"!==(void 0===e?"undefined":r(e)))return console.error("Need a JSON object but given ",void 0===e?"undefined":r(e),e),"Not a valid JSON..!";var t="";try{for(var n in e)if(e.hasOwnProperty(n)){for(var i in t+=n+" {\n",e[n])e[n].hasOwnProperty(i)&&(t+=i+": "+e[n][i]+";\n");t+="}\n"}}catch(e){return"Not a valid JSON..!"}return t},this._trimSemiColon=function(e){return";"===e.slice(-1)?e.slice(0,n.length-1):e}}},function(e,t,n){e.exports=n(0).default}])}),y=o(v),b=(v.JsonCSS,new y);function x(e){var t=b.toCSS({css:e});return t.substring(6,t.length-3)}var E={ink:{color:"#000000","-myscript-pen-width":1,"-myscript-pen-fill-style":"none","-myscript-pen-fill-color":"#FFFFFF00"},".math":{"font-family":"STIXGeneral"},".math-solved":{"font-family":"STIXGeneral",color:"#A8A8A8FF"},".text":{"font-family":"MyScriptInter","font-size":10}},w=new y,k=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function S(e,t){var n;return t||0===t?Math.round(e*(n=t>10?[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9][10]:k[t]))/n:e}function T(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=e;o.changedTouches&&(o=o.changedTouches[0]);var a=t.getBoundingClientRect();return{x:S(o.clientX-a.left-t.clientLeft-i,n.xyFloatPrecision),y:S(o.clientY-a.top-t.clientTop-r,n.xyFloatPrecision),t:S(Date.now(),n.timestampFloatPrecision)}}var C=function(e){return e.preventDefault()},P=Object.freeze({__proto__:null,attach:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=0;function o(){"None"!==window.getSelection().type&&window.getSelection().removeAllRanges()}function a(e){var t=document.querySelector(".more-menu");return!(e.target.classList.contains("ellipsis")||e.target.classList.contains("more-menu")||e.target.classList.contains("options-label-button")||!t||"none"===t.style.display)&&(t.style.display="none",!0)}function s(e){var t=document.querySelector(".candidates");return!(e.target.classList.contains("candidates")||"SPAN"===e.target.tagName||!t||"none"===t.style.display)&&(t.style.display="none",!0)}var c={options:t.configuration.listenerOptions,listeners:[{types:["pointerdown"],listener:function(i){var c=i.target.id===t.domElement.id||i.target.classList.contains("ms-canvas");if(void 0!==this.activePointerId)this.activePointerId===i.pointerId&&u.trace("".concat(i.type," event with the same id without any pointer up"),i.pointerId);else if(2!==i.button&&2!==i.buttons&&c){if(!a(i)&&!s(i)){this.activePointerId=i.pointerId;var l=i.pointerId>2147483647?-1:i.pointerId;o(),i.stopPropagation();var d=i.pointerType;t.isErasing&&(d="ERASER");var p=T(i,e,t.configuration,n,r);t.pointerDown(p,d,l)}}else i.target.classList.contains("ellipsis")||i.target.classList.contains("tag-icon")?(a(i),s(i)):(a(i),s(i),this.smartGuidePointerDown=!0,this.downSmartGuidePoint=T(i,e,t.configuration))}},{types:["pointermove"],listener:function(a){if(void 0!==this.activePointerId&&this.activePointerId===a.pointerId)o(),t.pointerMove(T(a,e,t.configuration,n,r));else if(this.smartGuidePointerDown){var s=T(a,e,t.configuration,n,r),c=Math.abs(this.downSmartGuidePoint.x-s.x),l=Math.abs(this.downSmartGuidePoint.y-s.y);if(i=Math.max(c,i),c<5&&l>5&&i<15||c>5&&l>5&&i<15){this.activePointerId=a.pointerId;var d=a.pointerId>2147483647?-1:a.pointerId;o();var p=a.pointerType;t.isErasing&&(p="ERASER"),t.pointerDown(this.downSmartGuidePoint,p,d)}}else u.trace("".concat(a.type," event from another pointerid (").concat(a.pointerId,")"),this.activePointerId)}},{types:["pointerup","pointerout","pointerleave","pointercancel"],listener:function(o){i=0,this.smartGuidePointerDown=!1;var a=["smartguide","prompter-text-container","prompter-text","tag-icon","ellipsis"],s=["ps__rail-x","ps__thumb-x"],c=o.relatedTarget&&(a.includes(o.relatedTarget.className)||s.includes(o.relatedTarget.className)),l=o.relatedTarget&&o.target&&(a.includes(o.target.className)||s.includes(o.target.className)),d=o.relatedTarget&&o.target&&("SPAN"===o.target.tagName||"SPAN"===o.relatedTarget.tagName);c||l||d?o.stopPropagation():void 0!==this.activePointerId&&this.activePointerId===o.pointerId?(this.activePointerId=void 0,o.stopPropagation(),t.pointerUp(T(o,e,t.configuration,n,r))):u.trace("".concat(o.type," event from another pointerid (").concat(o.pointerId,")"),this.activePointerId)}}]};return u.debug("attaching listeners",c),c.listeners.forEach(function(t){t.types.forEach(function(n){return e.addEventListener(n,t.listener,c.options)})}),e.addEventListener("touchmove",C),document.documentElement.addEventListener("pointerdown",function(){}),c},detach:function(e,t){u.debug("detaching listeners",t),t.listeners.forEach(function(n){n.types.forEach(function(r){return e.removeEventListener(r,n.listener,t.options)})}),e.removeEventListener("touchmove",C),document.documentElement.removeEventListener("pointerdown",function(){})}}),_=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r},L=function(e){if(Array.isArray(e))return _(e)},R=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)},A=function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}},M=function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},I=function(e){return L(e)||R(e)||A(e)||M()};function z(e,t,n){!n||t&&"ERASER"===t.pointerType||n.drawStroke(e,t)}var O={table:"table",shape:"shape",recognizedShape:"recognizedShape",ellipse:"ellipse",line:"line"};function N(e){var t=(e+Math.PI)%(2*Math.PI)-Math.PI;return t<-Math.PI&&(t+=2*Math.PI),t}function D(e,t,n,r){var i=N(n+7/8*Math.PI),o=N(n-7/8*Math.PI);e.save();try{e.fillStyle=e.strokeStyle,e.moveTo(t.x,t.y),e.beginPath(),e.lineTo(t.x+r*Math.cos(i),t.y+r*Math.sin(i)),e.lineTo(t.x+r*Math.cos(o),t.y+r*Math.sin(o)),e.lineTo(t.x,t.y),e.fill()}finally{e.restore()}}function j(e,t,n){e.save();try{e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.stroke()}finally{e.restore()}}var H={inputCharacter:"inputCharacter",char:"char",string:"string",textLine:"textLine"};function U(e,t){!function(e,t,n){e.save();try{e.font="".concat(n.textHeight,"px serif"),e.textAlign="CENTER"===n.justificationType?"center":"left",e.textBaseline="bottom",e.fillStyle=e.strokeStyle,e.fillText(t,n.topLeftPoint.x,n.topLeftPoint.y+n.height)}finally{e.restore()}}(e,t.label,t.data),t.underlineList.forEach(function(n){var r,i,o;r=t.label,o=(i=t.data).width/r.length,j(e,{x:i.topLeftPoint.x+n.data.firstCharacter*o,y:i.topLeftPoint.y+i.height},{x:i.topLeftPoint.x+n.data.lastCharacter*o,y:i.topLeftPoint.y+i.height})})}function X(e,t,n,r,i){var o=Math.sqrt(Math.pow(t-r[i-1],2)+Math.pow(e-n[i-1],2));return isNaN(o)?0:o}function W(e,t,n,r,i,o){var a=i[o-1]+X(e,t,n,r,o);return isNaN(a)?0:a}function B(e){return Object.assign({},{type:"stroke",x:[],y:[],t:[],p:[],l:[],width:0},e)}function Y(e,t){var n,r,i,o,a,s,c,u,d,p,h,f,g,m,v,y;return(n=t.x,r=t.y,i=e.x,o=e.y,a=2+e.width/4,s=!1,(0===i.length||0===o.length||Math.abs(i[i.length-1]-n)>=a||Math.abs(o[o.length-1]-r)>=a)&&(s=!0),s)?(e.x.push(t.x),e.y.push(t.y),e.t.push(t.t),e.p.push((c=t.x,u=t.y,d=e.x,p=e.y,h=e.l,f=e.x.length-1,g=1,m=X(c,u,d,p,f),0===(v=W(c,u,d,p,h,f))?g=.5:m===v?g=1:m<10?g=.2+Math.pow(.1*m,.4):m>v-10&&(g=.2+Math.pow(.1*(v-m),.4)),isNaN(parseFloat(y=g*Math.max(.1,1-.1*Math.sqrt(m))))?.5:y)),e.l.push(W(t.x,t.y,e.x,e.y,e.l,e.x.length-1))):l.trace("ignore filtered point",t),e}function F(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.x.length,r=B({color:e.color,width:e.width}),i=t;i<n;i++)Y(r,{x:e.x[i],y:e.y[i],t:e.t[i]});return r}function G(e,t){var n;return void 0!==t&&t>=0&&t<e.x.length&&(n={x:e.x[t],y:e.y[t],t:e.t[t],p:e.p[t],l:e.l[t]}),n}function J(e,t){return{minX:Math.min(e.minX,t.minX),maxX:Math.max(e.maxX,t.maxX),minY:Math.min(e.minY,t.minY),maxY:Math.max(e.maxY,t.maxY)}}function K(e){return{minX:Math.min(e.firstPoint.x,e.lastPoint.x),maxX:Math.max(e.firstPoint.x,e.lastPoint.x),minY:Math.min(e.firstPoint.y,e.lastPoint.y),maxY:Math.max(e.firstPoint.y,e.lastPoint.y)}}function V(e){var t=Math.cos(e.orientation),n=Math.sin(e.orientation),r=t,i=n;t*=e.maxRadius,r*=e.minRadius,n*=e.maxRadius,i*=e.minRadius;for(var o=Math.abs(e.sweepAngle)/.02,a=[],s=[],c=0;c<=o;c++){var l=e.startAngle+c/o*e.sweepAngle,u=Math.atan2(Math.sin(l)/e.minRadius,Math.cos(l)/e.maxRadius),d=Math.cos(u),p=Math.sin(u);a.push(e.center.x+(t*d-i*p)),s.push(e.center.y+(r*p+n*d))}return{minX:Math.min.apply(Math,a),maxX:Math.max.apply(Math,a),minY:Math.min.apply(Math,s),maxY:Math.max.apply(Math,s)}}function q(e){return{minX:e.data.topLeftPoint.x,maxX:e.data.topLeftPoint.x+e.data.width,minY:e.data.topLeftPoint.y,maxY:e.data.topLeftPoint.y+e.data.height}}function Z(e){return{minX:e.boundingBox.x,maxX:e.boundingBox.x+e.boundingBox.width,minY:e.boundingBox.y,maxY:e.boundingBox.y+e.boundingBox.height}}function Q(e){return{minX:Math.min.apply(Math,I(e.x)),maxX:Math.max.apply(Math,I(e.x)),minY:Math.min.apply(Math,I(e.y)),maxY:Math.max.apply(Math,I(e.y))}}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{minX:Number.MAX_VALUE,maxX:Number.MIN_VALUE,minY:Number.MAX_VALUE,maxY:Number.MIN_VALUE},n=t;return n=e.filter(function(e){return"stroke"===e.type}).map(Q).reduce(J,n),n=e.filter(function(e){return"clef"===e.type}).map(Z).reduce(J,n),n=e.filter(function(e){return"line"===e.type}).map(K).reduce(J,n),n=e.filter(function(e){return"ellipse"===e.type}).map(V).reduce(J,n),n=e.filter(function(e){return"textLine"===e.type}).map(q).reduce(J,n)}function ee(e){return{currentStroke:void 0,rawStrokes:[],strokeGroups:[],lastPositions:{lastSentPosition:-1,lastReceivedPosition:-1,lastRenderedPosition:-1},defaultSymbols:[],recognizedSymbols:void 0,exports:void 0,rawResults:{convert:void 0,exports:void 0},creationTime:(new Date).getTime(),modificationTime:void 0}}function et(e){return e.currentStroke=void 0,e.rawStrokes=[],e.strokeGroups=[],e.lastPositions.lastSentPosition=-1,e.lastPositions.lastReceivedPosition=-1,e.lastPositions.lastRenderedPosition=-1,e.recognizedSymbols=void 0,e.exports=void 0,e.rawResults.convert=void 0,e.rawResults.exports=void 0,e}function en(e){return!!e.recognizedSymbols&&e.rawStrokes.length!==e.recognizedSymbols.filter(function(e){return"stroke"===e.type}).length}function er(e,t){return l.debug("addStroke",t),e.rawStrokes.push(t),e}function ei(e,t,n){l.debug("addStroke",t);var r=e.strokeGroups.length-1;if(e.strokeGroups[r]&&e.strokeGroups[r].penStyle===n)e.strokeGroups[r].strokes.push(t);else{var i={penStyle:n,strokes:[]},o={};Object.assign(o,t),i.strokes.push(o),e.strokeGroups.push(i)}return e}function eo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.lastPositions.lastReceivedPosition+1;return e.rawStrokes.slice(t)}function ea(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:96;if(n&&n["-myscript-pen-width"]){var i=n["-myscript-pen-width"]*r/25.4;Object.assign(n,{width:i/2})}return l.trace("initPendingStroke",t),e.currentStroke=B(n),e.currentStroke=Y(e.currentStroke,t),e}function es(e,t){return e.currentStroke&&(l.trace("appendToPendingStroke",t),e.currentStroke=Y(e.currentStroke,t)),e}function ec(e,t,n){if(e.currentStroke){l.trace("endPendingStroke",t);var r=Y(e.currentStroke,t);er(e,r),ei(e,r,n),delete e.currentStroke}return e}function el(e){var t={minX:Number.MAX_VALUE,maxX:Number.MIN_VALUE,minY:Number.MAX_VALUE,maxY:Number.MIN_VALUE};return e.defaultSymbols&&e.defaultSymbols.length>0&&(t=$(e.defaultSymbols,t)),e.recognizedSymbols&&e.recognizedSymbols.length>0?(t=$(e.recognizedSymbols,t),t=$(eo(e),t)):t=$(e.rawStrokes,t),t}function eu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.rawStrokes.length-1;return e.lastPositions.lastSentPosition=t,e}function ed(e){return e.lastPositions.lastReceivedPosition=e.lastPositions.lastSentPosition,e}function ep(e){return e.lastPositions.lastSentPosition=-1,e.lastPositions.lastReceivedPosition=-1,e}function eh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.recognizedSymbols?e.recognizedSymbols.length-1:-1;return e.lastPositions.lastRenderedPosition=t,e}function ef(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.lastPositions.lastRenderedPosition+1;return e.recognizedSymbols?e.recognizedSymbols.slice(t):[]}function eg(e){var t=Object.assign({},e);return t.defaultSymbols=I(e.defaultSymbols),t.currentStroke=e.currentStroke?Object.assign({},e.currentStroke):void 0,t.rawStrokes=I(e.rawStrokes),t.strokeGroups=JSON.parse(JSON.stringify(e.strokeGroups)),t.lastPositions=Object.assign({},e.lastPositions),t.exports=e.exports?Object.assign({},e.exports):void 0,t.rawResults=Object.assign({},e.rawResults),t.recognizedSymbols=e.recognizedSymbols?I(e.recognizedSymbols):void 0,t}function em(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return e.recognizedSymbols=t.recognizedSymbols,e.lastPositions.lastSentPosition=t.lastPositions.lastSentPosition,e.lastPositions.lastReceivedPosition=t.lastPositions.lastReceivedPosition,e.lastPositions.lastRenderedPosition=t.lastPositions.lastRenderedPosition,e.rawResults=t.rawResults,e.exports=t.exports,e})}function ev(e,t){var n=document.createElement("canvas");return n.classList.add(t),n.classList.add("ms-canvas"),e.appendChild(n),d.debug("canvas created",n),n}function ey(e){return[e.renderingCanvas,e.capturingCanvas].forEach(function(t){var n=t.parentNode,r=n.clientWidth<e.minWidth?e.minWidth:n.clientWidth,i=n.clientHeight<e.minHeight?e.minHeight:n.clientHeight;t.width=r*e.pixelRatio,t.height=i*e.pixelRatio,t.style.width="".concat(r,"px"),t.style.height="".concat(i,"px"),t.getContext("2d").scale(e.pixelRatio,e.pixelRatio),d.debug("canvas size changed",t)}),e}function eb(e,t,n){e.renderingCanvasContext.clearRect(0,0,e.renderingCanvas.width,e.renderingCanvas.height);var r=I(t.defaultSymbols);return t.recognizedSymbols?(r.push.apply(r,I(t.recognizedSymbols)),r.push.apply(r,I(eo(t)))):r.push.apply(r,I(t.rawStrokes)),r.forEach(function(t){var r,i;return r=e.renderingCanvasContext,i=t.elementType?t.elementType:t.type,void(d.trace("attempting to draw ".concat(i," symbol")),"stroke"===i?z(r,t,n):H[i]?function(e,t){d.debug("draw ".concat(t.type," symbol")),e.save();try{(e.lineWidth=t.width,e.strokeStyle=t.color,t.elementType)?t.elementType===H.textLine?U(e,t):d.error("".concat(t.elementType," not implemented")):t.type===H.textLine?U(e,t):d.error("".concat(t.type," not implemented"))}finally{e.restore()}}(r,t):O[i]?function e(t,n){d.debug("draw ".concat(n.type," symbol")),t.save();try{var r;if(t.lineWidth=n.width,t.strokeStyle=n.color,n.elementType)switch(n.elementType){case O.shape:e(t,n.candidates[n.selectedCandidateIndex]);break;case O.table:n.lines.forEach(function(n){return e(t,n)});break;case O.line:j(t,n.data.p1,n.data.p2);break;default:d.error("".concat(n.elementType," not implemented"))}else switch(n.type){case O.ellipse:r=function(e,t,n,r,i,o,a){var s=Math.cos(i),c=Math.sin(i),l=s,u=c;s*=n,l*=r,c*=n,u*=r;var d=Math.floor(Math.abs(a)/.02),p=[];e.save();try{e.beginPath();for(var h=0;h<=d;h++){var f=o+h/d*a,g=Math.atan2(Math.sin(f)/r,Math.cos(f)/n),m=Math.cos(g),v=Math.sin(g),y=t.x+s*m-u*v,b=t.y+l*v+c*m;0===h?e.moveTo(y,b):e.lineTo(y,b),0!==h&&h!==d||p.push({x:y,y:b})}e.stroke()}finally{e.restore()}return p}(t,n.center,n.maxRadius,n.minRadius,n.orientation,n.startAngle,n.sweepAngle),n.beginDecoration&&"ARROW_HEAD"===n.beginDecoration&&D(t,r[0],n.beginTangentAngle,12),n.endDecoration&&"ARROW_HEAD"===n.endDecoration&&D(t,r[1],n.endTangentAngle,12);break;case O.line:j(t,n.firstPoint,n.lastPoint),"ARROW_HEAD"===n.beginDecoration&&D(t,n.firstPoint,n.beginTangentAngle,12),"ARROW_HEAD"===n.endDecoration&&D(t,n.lastPoint,n.endTangentAngle,12);break;case O.recognizedShape:n.primitives.forEach(function(n){return e(t,n)});break;default:d.error("".concat(n.type," not implemented"))}}finally{t.restore()}}(r,t):d.warn("impossible to draw ".concat(i," symbol")))}),e.capturingCanvasContext.clearRect(0,0,e.capturingCanvas.width,e.capturingCanvas.height),t}Object.freeze({__proto__:null,createModel:ee,clearModel:et,needRedraw:en,addStroke:er,addStrokeToGroup:ei,extractPendingStrokes:eo,initPendingStroke:ea,appendToPendingStroke:es,endPendingStroke:ec,getBorderCoordinates:el,extractStrokesFromInkRange:function(e,t,n,r,i){return e.rawStrokes.slice(t,n+1).map(function(e,t,n){return n.length<2?F(e,r,i+1):0===t?F(e,r):t===n.length-1?F(e,0,i+1):e})},updateModelSentPosition:eu,updateModelReceivedPosition:ed,resetModelPositions:ep,resetModelRendererPosition:function(e){return e.lastPositions.lastRenderedPosition=-1,e},updateModelRenderedPosition:eh,extractPendingRecognizedSymbols:ef,cloneModel:eg,mergeModels:em});var ex=Object.freeze({__proto__:null,getInfo:function(){return{type:"canvas"}},attach:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;d.debug("attach renderer",e);var r=function(e){if(e){var t=e.getContext("2d");return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}return 1}(document.createElement("canvas")),i=ev(e,"ms-rendering-canvas"),o=ev(e,"ms-capture-canvas");return ey({pixelRatio:r,minHeight:t,minWidth:n,renderingCanvas:i,renderingCanvasContext:i.getContext("2d"),capturingCanvas:o,capturingCanvasContext:o.getContext("2d")})},detach:function(e,t){d.debug("detach renderer",e),e.removeChild(t.renderingCanvas),e.removeChild(t.capturingCanvas)},resize:function(e,t,n){return this.drawModel(ey(e),t,n)},drawCurrentStroke:function(e,t,n){return e.capturingCanvasContext.clearRect(0,0,e.capturingCanvas.width,e.capturingCanvas.height),d.trace("drawing current stroke ",t.currentStroke),z(e.capturingCanvasContext,t.currentStroke,n),t},drawModel:eb});function eE(e,t,n){var r=e.p*n;return[{x:e.x-Math.sin(t)*r,y:e.y+Math.cos(t)*r},{x:e.x+Math.sin(t)*r,y:e.y-Math.cos(t)*r}]}function ew(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2,p:(t.p+e.p)/2}}function ek(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}function eS(e,t,n){e.arc(t.x,t.y,n,0,2*Math.PI,!0)}function eT(e,t,n,r){var i=eE(t,ek(t,n),r),o=eE(n,ek(t,n),r);e.moveTo(i[0].x,i[0].y),e.lineTo(o[0].x,o[0].y),e.lineTo(o[1].x,o[1].y),e.lineTo(i[1].x,i[1].y)}var eC=Object.freeze({__proto__:null,getInfo:function(){return{type:"canvas",name:"quadratic"}},drawStroke:function(e,t){var n=t.x.length,r=t.width>0?t.width:e.lineWidth,i=t.color?t.color:e.strokeStyle,o=G(t,0),a=n-2;e.save();try{if(e.beginPath(),n<3)eS(e,o,.6*r);else{eS(e,o,r*o.p),eT(e,o,ew(o,G(t,1)),r);for(var s=0;s<a;s++)!function(e,t,n,r,i){var o=eE(t,ek(t,r),i),a=eE(n,ek(r,n),i),s=eE(r,ek(t,n),i);e.moveTo(o[0].x,o[0].y),e.quadraticCurveTo(s[0].x,s[0].y,a[0].x,a[0].y),e.lineTo(a[1].x,a[1].y),e.quadraticCurveTo(s[1].x,s[1].y,o[1].x,o[1].y)}(e,ew(G(t,s),G(t,s+1)),ew(G(t,s+1),G(t,s+2)),G(t,s+1),r);eT(e,ew(G(t,n-2),G(t,n-1)),G(t,n-1),r),function(e,t,n,r){var i=ek(t,n),o=eE(n,i,r);e.moveTo(o[0].x,o[0].y);for(var a=1;a<=6;a++){var s=i-a*Math.PI/6;e.lineTo(n.x-n.p*r*Math.sin(s),n.y+n.p*r*Math.cos(s))}}(e,G(t,n-2),G(t,n-1),r)}e.closePath(),void 0!==i&&(e.fillStyle=i,e.fill())}finally{e.restore()}}}),eP="http://www.w3.org/1999/xhtml",e_={svg:"http://www.w3.org/2000/svg",xhtml:eP,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function eL(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),e_.hasOwnProperty(t)?{space:e_[t],local:e}:e}function eR(e){var t=eL(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===eP&&t.documentElement.namespaceURI===eP?t.createElement(e):t.createElementNS(n,e)}})(t)}function eA(){}function eM(e){return null==e?eA:function(){return this.querySelector(e)}}function eI(){return[]}function ez(e){return Array(e.length)}function eO(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function eN(e,t,n,r,i,o){for(var a,s=0,c=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new eO(e,o[s]);for(;s<c;++s)(a=t[s])&&(i[s]=a)}function eD(e,t,n,r,i,o,a){var s,c,l,u={},d=t.length,p=o.length,h=Array(d);for(s=0;s<d;++s)(c=t[s])&&(h[s]=l="$"+a.call(c,c.__data__,s,t),l in u?i[s]=c:u[l]=c);for(s=0;s<p;++s)(c=u[l="$"+a.call(e,o[s],s,o)])?(r[s]=c,c.__data__=o[s],u[l]=null):n[s]=new eO(e,o[s]);for(s=0;s<d;++s)(c=t[s])&&u[h[s]]===c&&(i[s]=c)}function ej(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function eH(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function eU(e){return e.trim().split(/^|\s+/)}function eX(e){return e.classList||new eW(e)}function eW(e){this._node=e,this._names=eU(e.getAttribute("class")||"")}function eB(e,t){for(var n=eX(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function eY(e,t){for(var n=eX(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function eF(){this.textContent=""}function eG(){this.innerHTML=""}function eJ(){this.nextSibling&&this.parentNode.appendChild(this)}function eK(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function eV(){return null}function eq(){var e=this.parentNode;e&&e.removeChild(this)}function eZ(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eQ(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}eO.prototype={constructor:eO,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},eW.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var e$={};function e0(e,t,n){return e=e1(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function e1(e,t,n){return function(r){e.call(this,this.__data__,t,n)}}function e2(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function e3(e,t,n){var r=e$.hasOwnProperty(e.type)?e0:e1;return function(i,o,a){var s,c=this.__on,l=r(t,o,a);if(c){for(var u=0,d=c.length;u<d;++u)if((s=c[u]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=n),void(s.value=t)}this.addEventListener(e.type,l,n),s={type:e.type,name:e.name,value:t,listener:l,capture:n},c?c.push(s):this.__on=[s]}}function e4(e,t,n){var r=eH(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(e$={mouseenter:"mouseover",mouseleave:"mouseout"}));var e5=[null];function e6(e,t){this._groups=e,this._parents=t}function e9(e,t,n){n&&("ERASER"===t.pointerType?n.drawErasingStroke(e,t):n.drawStroke(e,t))}function e8(e,t,n){var r=e.ownerDocument.createElementNS("http://www.w3.org/2000/svg","_");switch(r.innerHTML=n,t.toLowerCase()){case"beforebegin":e.parentNode.insertBefore(r.firstChild,e);break;case"afterbegin":e.insertBefore(r.lastChild,e.firstChild);break;case"beforeend":e.appendChild(r.firstChild);break;case"afterend":e.parentNode.insertBefore(r.lastChild,e.nextSibling);break;default:d.warn("Invalid insertAdjacentHTML position")}}e6.prototype=(function(){return new e6([[document.documentElement]],e5)}).prototype={constructor:e6,select:function(e){"function"!=typeof e&&(e=eM(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var o,a,s=t[i],c=s.length,l=r[i]=Array(c),u=0;u<c;++u)(o=s[u])&&(a=e.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),l[u]=a);return new e6(r,this._parents)},selectAll:function(e){var t;"function"!=typeof e&&(e=null==(t=e)?eI:function(){return this.querySelectorAll(t)});for(var n=this._groups,r=n.length,i=[],o=[],a=0;a<r;++a)for(var s,c=n[a],l=c.length,u=0;u<l;++u)(s=c[u])&&(i.push(e.call(s,s.__data__,u,c)),o.push(s));return new e6(i,o)},filter:function(e){var t;"function"!=typeof e&&(t=e,e=function(){return this.matches(t)});for(var n=this._groups,r=n.length,i=Array(r),o=0;o<r;++o)for(var a,s=n[o],c=s.length,l=i[o]=[],u=0;u<c;++u)(a=s[u])&&e.call(a,a.__data__,u,s)&&l.push(a);return new e6(i,this._parents)},data:function(e,t){if(!e)return h=Array(this.size()),l=-1,this.each(function(e){h[++l]=e}),h;var n=t?eD:eN,r=this._parents,i=this._groups;"function"!=typeof e&&(v=e,e=function(){return v});for(var o=i.length,a=Array(o),s=Array(o),c=Array(o),l=0;l<o;++l){var u=r[l],d=i[l],p=d.length,h=e.call(u,u&&u.__data__,l,r),f=h.length,g=s[l]=Array(f),m=a[l]=Array(f);n(u,d,g,m,c[l]=Array(p),h,t);for(var v,y,b,x=0,E=0;x<f;++x)if(y=g[x]){for(x>=E&&(E=x+1);!(b=m[E])&&++E<f;);y._next=b||null}}return(a=new e6(a,r))._enter=s,a._exit=c,a},enter:function(){return new e6(this._enter||this._groups.map(ez),this._parents)},exit:function(){return new e6(this._exit||this._groups.map(ez),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=Array(r),s=0;s<o;++s)for(var c,l=t[s],u=n[s],d=l.length,p=a[s]=Array(d),h=0;h<d;++h)(c=l[h]||u[h])&&(p[h]=c);for(;s<r;++s)a[s]=t[s];return new e6(a,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=ej);for(var n=this._groups,r=n.length,i=Array(r),o=0;o<r;++o){for(var a,s=n[o],c=s.length,l=i[o]=Array(c),u=0;u<c;++u)(a=s[u])&&(l[u]=a);l.sort(t)}return new e6(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=eL(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){var r;return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):(r=this.node()).style.getPropertyValue(e)||eH(r).getComputedStyle(r,null).getPropertyValue(e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=eU(e+"");if(arguments.length<2){for(var r=eX(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?eB:eY)(this,e)}}:t?function(e){return function(){eB(this,e)}}:function(e){return function(){eY(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?eF:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?eG:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(eJ)},lower:function(){return this.each(eK)},append:function(e){var t="function"==typeof e?e:eR(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:eR(e),r=null==t?eV:"function"==typeof t?t:eM(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(eq)},clone:function(e){return this.select(e?eQ:eZ)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),a=o.length;if(!(arguments.length<2)){for(s=t?e3:e2,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s){for(var c,l=0,u=s.length;l<u;++l)for(r=0,c=s[l];r<a;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value}},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return e4(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return e4(this,e,t)}})(e,t))}};var e7=Object.freeze({__proto__:null,getInfo:function(){return{type:"svg"}},attach:function(e){return d.debug("populate root element",e),e.style.fontSize="10px","string"==typeof e?new e6([[document.querySelector(e)]],[document.documentElement]):new e6([[e]],e5)},detach:function(e,t){d.debug("detach renderer",e),t.selectAll("svg").remove()},resize:function(e,t,n,r,i){var o=e.node().getBoundingClientRect(),a=e.selectAll("svg"),s=o.width<i?i:o.width,c=o.height<r?r:o.height;return a.attr("viewBox","0 0 ".concat(s,", ").concat(c)),a.attr("width","".concat(s,"px")),a.attr("height","".concat(c,"px")),d.debug("svg viewBox changed",a),t},drawCurrentStroke:function(e,t,n){return t.currentStroke.id="pendingStroke-".concat(t.rawStrokes.length),d.trace("drawing current stroke ",t.currentStroke),e.select("#pendingStrokes #".concat(t.currentStroke.id)).remove(),e9(e.select("#pendingStrokes").append("path").attr("id",t.currentStroke.id),t.currentStroke,n),t},drawModel:function(e,t,n){var r=ef(t);r&&(r.forEach(function(t){return function(t){t.updates.forEach(function(n){try{var r='svg[data-layer="'+t.layer+'"]';switch(n.type){case"REPLACE_ALL":e.select(r).remove();var i=e.node();i.insertAdjacentHTML?i.insertAdjacentHTML("beforeEnd",n.svg):e8(i,"beforeEnd",n.svg),"MODEL"===t.layer&&e.select(r).append("g").attr("id","pendingStrokes");break;case"REMOVE_ELEMENT":n.id.includes("s")||n.id.includes("MODEL")||e.select("#".concat(n.id)).attr("class","removed-stroke"),e.select("#".concat(n.id)).remove();break;case"REPLACE_ELEMENT":var o=e.select("#".concat(n.id)).node().parentNode;e.select("#".concat(n.id)).remove(),o.insertAdjacentHTML?o.insertAdjacentHTML("beforeEnd",n.svg):(e8(o,"beforeEnd",n.svg),e.node().insertAdjacentHTML("beforeEnd",e.select(r).remove().node().outerHTML));break;case"REMOVE_CHILD":e.select("#".concat(n.parentId," > *:nth-child(").concat(n.index+1,")")).remove();break;case"APPEND_CHILD":var a=e.select(n.parentId?"#".concat(n.parentId):r).node();a.insertAdjacentHTML?a.insertAdjacentHTML("beforeEnd",n.svg):(e8(a,"beforeEnd",n.svg),e.node().insertAdjacentHTML("beforeEnd",e.select(r).remove().node().outerHTML));break;case"INSERT_BEFORE":var s=e.select("#".concat(n.refId)).node();s.insertAdjacentHTML?s.insertAdjacentHTML("beforeBegin",n.svg):(e8(s,"beforeBegin",n.svg),e.node().insertAdjacentHTML("beforeEnd",e.select(r).remove().node().outerHTML));break;case"REMOVE_ATTRIBUTE":e.selectAll(n.id?"#".concat(n.id):"svg").attr(n.name,null);break;case"SET_ATTRIBUTE":n.id&&e.selectAll("#".concat(n.id)).attr(n.name,n.value);break;default:d.debug("unknown update ".concat(n.type," action"))}}catch(e){d.error("Invalid update ".concat(n.type),n),d.error("Error on svg patch",e)}})}(t)}),eh(t));var i=eo(t);return i&&i.forEach(function(t){var r;return r=e.select("#pendingStrokes"),void(d.trace("attempting to draw ".concat(t.type," symbol")),"stroke"!==t.type||r.select("id",t.id)?d.warn("impossible to draw ".concat(t.type," symbol")):e9(r.append("path").attr("id",t.id),t,n))}),e.select(".erasing-stroke").remove(),t}});function te(e,t,n){return["M ".concat(t.x,",").concat(t.y),"m ".concat(-n,",0"),"a ".concat(n,",").concat(n," 0 1 0 ").concat(2*n,",0"),"a ".concat(n,",").concat(n," 0 1 0 ").concat(-2*n,",0")].join(" ")}function tt(e,t,n,r){var i=eE(t,ek(t,n),r),o=eE(n,ek(t,n),r);return["M ".concat(i[0].x,",").concat(i[0].y),"L ".concat(o[0].x,",").concat(o[0].y),"L ".concat(o[1].x,",").concat(o[1].y),"L ".concat(i[1].x,",").concat(i[1].y)].join(" ")}var tn=function(e,t){var n=t.x.length,r=t.width,i=G(t,0),o=n-2,a=[];if(n<3)a.push(te(0,i,.6*r));else{a.push(te(0,i,r*i.p)),a.push(tt(0,i,ew(i,G(t,1)),r));for(var s=0;s<o;s++)a.push(function(e,t,n,r,i){var o=eE(t,ek(t,r),i),a=eE(n,ek(r,n),i),s=eE(r,ek(t,n),i);return["M ".concat(o[0].x,",").concat(o[0].y),"Q ".concat(s[0].x,",").concat(s[0].y," ").concat(a[0].x,",").concat(a[0].y),"L ".concat(a[1].x,",").concat(a[1].y),"Q ".concat(s[1].x,",").concat(s[1].y," ").concat(o[1].x,",").concat(o[1].y)].join(" ")}(0,ew(G(t,s),G(t,s+1)),ew(G(t,s+1),G(t,s+2)),G(t,s+1),r));a.push(tt(0,ew(G(t,n-2),G(t,n-1)),G(t,n-1),r)),a.push(function(e,t,n,r){for(var i=ek(t,n),o=eE(n,i,r),a=["M ".concat(o[0].x,",").concat(o[0].y)],s=1;s<=6;s++){var c=i-Math.PI/6*s;a.push("L ".concat(n.x-n.p*r*Math.sin(c),",").concat(n.y+n.p*r*Math.cos(c)))}return a.join(" ")}(0,G(t,n-2),G(t,n-1),r))}return a.join(" ")},tr=Object.freeze({__proto__:null,getInfo:function(){return{type:"svg",name:"quadratic"}},drawStroke:function(e,t){var n=tn(0,t);e.attr("color",t.color).style("fill",t.color).style("stroke","transparent").classed("pending-stroke",!0).attr("d","".concat(n,"Z"))},drawErasingStroke:function(e,t){t.width=20;var n=tn(0,t);e.style("fill","grey").style("stroke","transparent").style("opacity","0.2").style("shadowBlur","5").classed("erasing-stroke",!0).attr("d","".concat(n,"Z"))}}),ti=a(function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,n,r,i){var o,a=Object.create((n&&n.prototype instanceof g?n:g).prototype),s=new C(i||[]);return a._invoke=(o=u,function(n,i){if(o===p)throw Error("Generator is already running");if(o===h){if("throw"===n)throw i;return _()}for(s.method=n,s.arg=i;;){var a=s.delegate;if(a){var c=function e(n,r){var i=n.iterator[r.method];if(i===t){if(r.delegate=null,"throw"===r.method){if(n.iterator.return&&(r.method="return",r.arg=t,e(n,r),"throw"===r.method))return f;r.method="throw",r.arg=TypeError("The iterator does not provide a 'throw' method")}return f}var o=l(i,n.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,f;var a=o.arg;return a?a.done?(r[n.resultName]=a.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,f):a:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,f)}(a,s);if(c){if(c===f)continue;return c}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(o===u)throw o=h,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);o=p;var g=l(e,r,s);if("normal"===g.type){if(o=s.done?h:d,g.arg===f)continue;return{value:g.arg,done:s.done}}"throw"===g.type&&(o=h,s.method="throw",s.arg=g.arg)}}),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u="suspendedStart",d="suspendedYield",p="executing",h="completed",f={};function g(){}function m(){}function v(){}var y={};y[o]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(P([])));x&&x!==n&&r.call(x,o)&&(y=x);var E=v.prototype=g.prototype=Object.create(y);function w(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function k(e,t){var n;this._invoke=function(i,o){function a(){return new t(function(n,a){!function n(i,o,a,s){var c=l(e[i],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(d).then(function(e){u.value=e,a(u)},function(e){return n("throw",e,a,s)})}s(c.arg)}(i,o,n,a)})}return n=n?n.then(a,a):a()}}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function P(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:_}}function _(){return{value:t,done:!0}}return m.prototype=E.constructor=v,v.constructor=m,v[s]=m.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},w(k.prototype),k.prototype[a]=function(){return this},e.AsyncIterator=k,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new k(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},w(E),E[s]="Generator",E[o]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}});function to(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}var ta=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){to(o,r,i,a,s,"next",e)}function s(e){to(o,r,i,a,s,"throw",e)}a(void 0)})}},ts=a(function(e,t){var n,r,i,o,a,s,c,l,u,d,p,h,f,g;e.exports=n||(r=Math,o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),c=(s=(a={}).lib={}).Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=s.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=t!=i?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=a<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=r.ceil(t/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t,n=[],i=function(e){var t=987654321;return function(){var n=((t=36969*(65535&t)+(t>>16)&4294967295)<<16)+(e=18e3*(65535&e)+(e>>16)&4294967295)&4294967295;return n/=4294967296,(n+=.5)*(r.random()>.5?1:-1)}},o=0;o<e;o+=4){var a=i(4294967296*(t||r.random()));t=987654071*a(),n.push(4294967296*a()|0)}return new l.init(n,e)}}),d=(u=a.enc={}).Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},p=u.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},h=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},f=s.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,i=t.sigBytes,o=this.blockSize,a=i/(4*o),s=(a=e?r.ceil(a):r.max((0|a)-this._minBufferSize,0))*o,c=r.min(4*s,i);if(s){for(var u=0;u<s;u+=o)this._doProcessBlock(n,u);var d=n.splice(0,s);t.sigBytes-=c}return new l.init(d,c)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),s.Hasher=f.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),g=a.algo={},a)}),tc=a(function(e,t){e.exports=ts.enc.Hex}),tl=(a(function(e,t){var n,r,i,o,a;e.exports=(i=(r=ts.lib).Base,o=r.WordArray,(a=ts.x64={}).Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=t!=n?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var i=e[r];n.push(i.high),n.push(i.low)}return o.create(n,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}}),ts)}),a(function(e,t){e.exports=(function(){var e=ts.lib.Hasher,t=ts.x64,n=t.Word,r=t.WordArray,i=ts.algo;function o(){return n.create.apply(n,arguments)}var a=[o(1116352408,3609767458),o(1899447441,602891725),o(3049323471,3964484399),o(3921009573,2173295548),o(961987163,4081628472),o(1508970993,3053834265),o(2453635748,2937671579),o(2870763221,3664609560),o(3624381080,2734883394),o(310598401,1164996542),o(607225278,1323610764),o(1426881987,3590304994),o(1925078388,4068182383),o(2162078206,991336113),o(2614888103,633803317),o(3248222580,3479774868),o(3835390401,2666613458),o(4022224774,944711139),o(264347078,2341262773),o(604807628,2007800933),o(770255983,1495990901),o(1249150122,1856431235),o(1555081692,3175218132),o(1996064986,2198950837),o(2554220882,3999719339),o(2821834349,766784016),o(2952996808,2566594879),o(3210313671,3203337956),o(3336571891,1034457026),o(3584528711,2466948901),o(113926993,3758326383),o(338241895,168717936),o(666307205,1188179964),o(773529912,1546045734),o(1294757372,1522805485),o(1396182291,2643833823),o(1695183700,2343527390),o(1986661051,1014477480),o(2177026350,1206759142),o(2456956037,344077627),o(2730485921,1290863460),o(2820302411,3158454273),o(3259730800,3505952657),o(3345764771,106217008),o(3516065817,3606008344),o(3600352804,1432725776),o(4094571909,1467031594),o(275423344,851169720),o(430227734,3100823752),o(506948616,1363258195),o(659060556,3750685593),o(883997877,3785050280),o(958139571,3318307427),o(1322822218,3812723403),o(1537002063,2003034995),o(1747873779,3602036899),o(1955562222,1575990012),o(2024104815,1125592928),o(2227730452,2716904306),o(2361852424,442776044),o(2428436474,593698344),o(2756734187,3733110249),o(3204031479,2999351573),o(3329325298,3815920427),o(3391569614,3928383900),o(3515267271,566280711),o(3940187606,3454069534),o(4118630271,4000239992),o(116418474,1914138554),o(174292421,2731055270),o(289380356,3203993006),o(460393269,320620315),o(685471733,587496836),o(852142971,1086792851),o(1017036298,365543100),o(1126000580,2618297676),o(1288033470,3409855158),o(1501505948,4234509866),o(1607167915,987167468),o(1816402316,1246189591)],s=[];!function(){for(var e=0;e<80;e++)s[e]=o()}();var c=i.SHA512=e.extend({_doReset:function(){this._hash=new r.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],c=n[3],l=n[4],u=n[5],d=n[6],p=n[7],h=r.high,f=r.low,g=i.high,m=i.low,v=o.high,y=o.low,b=c.high,x=c.low,E=l.high,w=l.low,k=u.high,S=u.low,T=d.high,C=d.low,P=p.high,_=p.low,L=h,R=f,A=g,M=m,I=v,z=y,O=b,N=x,D=E,j=w,H=k,U=S,X=T,W=C,B=P,Y=_,F=0;F<80;F++){var G=s[F];if(F<16)var J=G.high=0|e[t+2*F],K=G.low=0|e[t+2*F+1];else{var V=s[F-15],q=V.high,Z=V.low,Q=(q>>>1|Z<<31)^(q>>>8|Z<<24)^q>>>7,$=(Z>>>1|q<<31)^(Z>>>8|q<<24)^(Z>>>7|q<<25),ee=s[F-2],et=ee.high,en=ee.low,er=(et>>>19|en<<13)^(et<<3|en>>>29)^et>>>6,ei=(en>>>19|et<<13)^(en<<3|et>>>29)^(en>>>6|et<<26),eo=s[F-7],ea=eo.high,es=eo.low,ec=s[F-16],el=ec.high,eu=ec.low;J=(J=(J=Q+ea+((K=$+es)>>>0<$>>>0?1:0))+er+((K+=ei)>>>0<ei>>>0?1:0))+el+((K+=eu)>>>0<eu>>>0?1:0),G.high=J,G.low=K}var ed,ep=D&H^~D&X,eh=j&U^~j&W,ef=L&A^L&I^A&I,eg=R&M^R&z^M&z,em=(L>>>28|R<<4)^(L<<30|R>>>2)^(L<<25|R>>>7),ev=(R>>>28|L<<4)^(R<<30|L>>>2)^(R<<25|L>>>7),ey=(D>>>14|j<<18)^(D>>>18|j<<14)^(D<<23|j>>>9),eb=(j>>>14|D<<18)^(j>>>18|D<<14)^(j<<23|D>>>9),ex=a[F],eE=ex.high,ew=ex.low,ek=B+ey+((ed=Y+eb)>>>0<Y>>>0?1:0),eS=ev+eg;B=X,Y=W,X=H,W=U,H=D,U=j,D=O+(ek=(ek=(ek=ek+ep+((ed+=eh)>>>0<eh>>>0?1:0))+eE+((ed+=ew)>>>0<ew>>>0?1:0))+J+((ed+=K)>>>0<K>>>0?1:0))+((j=N+ed|0)>>>0<N>>>0?1:0)|0,O=I,N=z,I=A,z=M,A=L,M=R,L=ek+(em+ef+(eS>>>0<ev>>>0?1:0))+((R=ed+eS|0)>>>0<ed>>>0?1:0)|0}f=r.low=f+R,r.high=h+L+(f>>>0<R>>>0?1:0),m=i.low=m+M,i.high=g+A+(m>>>0<M>>>0?1:0),y=o.low=y+z,o.high=v+I+(y>>>0<z>>>0?1:0),x=c.low=x+N,c.high=b+O+(x>>>0<N>>>0?1:0),w=l.low=w+j,l.high=E+D+(w>>>0<j>>>0?1:0),S=u.low=S+U,u.high=k+H+(S>>>0<U>>>0?1:0),C=d.low=C+W,d.high=T+X+(C>>>0<W>>>0?1:0),_=p.low=_+Y,p.high=P+B+(_>>>0<Y>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var t=e.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});ts.SHA512=e._createHelper(c),ts.HmacSHA512=e._createHmacHelper(c)}(),ts.SHA512)}),a(function(e,t){var n,r;e.exports=(n=ts.lib.Base,r=ts.enc.Utf8,void(ts.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),a=this._iKey=t.clone(),s=o.words,c=a.words,l=0;l<n;l++)s[l]^=1549556828,c[l]^=909522486;o.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))}),a(function(e,t){e.exports=ts.HmacSHA512}));function tu(e,t,n){var r="object"===f(e)?JSON.stringify(e):e;return p.debug("The HmacSHA512 function is loaded",tl),new tl(r,t+n).toString(tc)}function td(){return(td=ta(ti.mark(function e(t,n,r,i){var o,a,s,c,l,u,d;return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.editor.configuration,(a=t)&&(a.idle=!0),e.prev=3,(s=new Headers).append("Accept","application/json,"+i),s.append("applicationKey",o.recognitionParams.server.applicationKey),s.append("hmac",tu(JSON.stringify(r),o.recognitionParams.server.applicationKey,o.recognitionParams.server.hmacKey)),s.append("Content-Type","application/json"),c=new Request(n,{method:"POST",headers:s,body:JSON.stringify(r),credentials:"omit"}),e.next=13,fetch(c);case 13:u=(l=e.sent).headers.get("content-type"),d="",e.t0=u,e.next="application/vnd.openxmlformats-officedocument.presentationml.presentation"===e.t0||"image/png"===e.t0||"image/jpeg"===e.t0?19:"application/json"===e.t0?23:"application/vnd.myscript.jiix"===e.t0?27:31;break;case 19:return e.next=21,l.blob();case 21:case 25:case 29:case 33:return d=e.sent,e.abrupt("break",35);case 23:return e.next=25,l.json();case 27:return e.next=29,l.clone().json().catch(ta(ti.mark(function e(){return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.text();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})));case 31:return e.next=33,l.text();case 35:return e.abrupt("return",d);case 38:throw e.prev=38,e.t1=e.catch(3),Error({msg:"Could not connect to ".concat(n," connection error"),recoverable:!1});case 41:case"end":return e.stop()}},e,null,[[3,38]])}))).apply(this,arguments)}function tp(e){var t=Date.now();return p.info("Create empty recognizer context with ID: "+t),{id:t,editor:e,recognitionContexts:[],initPromise:void 0,lastPositions:{lastSentPosition:-1,lastReceivedPosition:-1},url:void 0,websocket:void 0,websocketCallback:void 0,reconnect:void 0,currentReconnectionCount:0,sessionId:void 0,contentPartCount:0,currentPartId:void 0,instanceId:void 0,canUndo:!1,canRedo:!1,isEmpty:void 0,supportedImportMimeTypes:[],undoStackIndex:0,possibleUndoCount:0,idle:!0,initialized:!1}}function th(e,t){return!!e.lastPositions&&e.lastPositions.lastSentPosition>=t.rawStrokes.length-1}function tf(e,t){return t&&(e.lastPositions.lastSentPosition=t.lastSentPosition,e.lastPositions.lastReceivedPosition=t.lastReceivedPosition),e.lastPositions.lastSentPosition,e.lastPositions.lastReceivedPosition,e}function tg(e,t){return e.recognitionContexts[0]=t,e}function tm(e){return e.websocket&&!0===e.websocket.autoReconnect&&e.currentReconnectionCount<=e.websocket.maxRetryCount&&(!e.error||!["api.invalid.format","access.not.granted"].includes(e.error.code))}function tv(e){return e.currentReconnectionCount++,tm(e)}var ty={type:"LOST_CONNECTION"};/*!
 * perfect-scrollbar v1.5.0
 * Copyright 2020 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function tb(e){return getComputedStyle(e)}function tx(e,t){for(var n in t){var r=t[n];"number"==typeof r&&(r+="px"),e.style[n]=r}return e}function tE(e){var t=document.createElement("div");return t.className=e,t}Object.freeze({__proto__:null,createEmptyRecognizerContext:tp,isResetRequired:th,updateRecognitionPositions:tf,setRecognitionContext:tg,canReconnect:tm,shouldAttemptImmediateReconnect:tv,LOST_CONNEXION_MESSAGE:ty,CLOSE_RECOGNIZER_MESSAGE:"CLOSE_RECOGNIZER"});var tw="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function tk(e,t){if(!tw)throw Error("No element matching method supported");return tw.call(e,t)}function tS(e){e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}function tT(e,t){return Array.prototype.filter.call(e.children,function(e){return tk(e,t)})}var tC={thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},tP={focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}},t_={x:null,y:null};function tL(e,t){var n=e.element.classList,r=tP.scrolling(t);n.contains(r)?clearTimeout(t_[t]):n.add(r)}function tR(e,t){t_[t]=setTimeout(function(){return e.isAlive&&e.element.classList.remove(tP.scrolling(t))},e.settings.scrollingThreshold)}var tA=function(e){this.element=e,this.handlers={}},tM={isEmpty:{configurable:!0}};tA.prototype.bind=function(e,t){void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e].push(t),this.element.addEventListener(e,t,!1)},tA.prototype.unbind=function(e,t){var n=this;this.handlers[e]=this.handlers[e].filter(function(r){return!(!t||r===t)||(n.element.removeEventListener(e,r,!1),!1)})},tA.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)},tM.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return 0===e.handlers[t].length})},Object.defineProperties(tA.prototype,tM);var tI=function(){this.eventElements=[]};function tz(e){if("function"==typeof window.CustomEvent)return new CustomEvent(e);var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,void 0),t}function tO(e,t,n,r,i){var o,a,s,c,l,u,d,p,h,f,g;if(void 0===r&&(r=!0),void 0===i&&(i=!1),"top"===t)o=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==t)throw Error("A proper axis should be provided");o=["contentWidth","containerWidth","scrollLeft","x","left","right"]}a=o,s=r,c=i,l=a[0],u=a[1],d=a[2],p=a[3],h=a[4],f=a[5],void 0===s&&(s=!0),void 0===c&&(c=!1),g=e.element,e.reach[p]=null,g[d]<1&&(e.reach[p]="start"),g[d]>e[l]-e[u]-1&&(e.reach[p]="end"),n&&(g.dispatchEvent(tz("ps-scroll-"+p)),n<0?g.dispatchEvent(tz("ps-scroll-"+h)):n>0&&g.dispatchEvent(tz("ps-scroll-"+f)),s&&(tL(e,p),tR(e,p))),e.reach[p]&&(n||c)&&g.dispatchEvent(tz("ps-"+p+"-reach-"+e.reach[p]))}function tN(e){return parseInt(e,10)||0}tI.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return t||(t=new tA(e),this.eventElements.push(t)),t},tI.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},tI.prototype.unbind=function(e,t,n){var r=this.eventElement(e);r.unbind(t,n),r.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(r),1)},tI.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]},tI.prototype.once=function(e,t,n){var r=this.eventElement(e),i=function(e){r.unbind(t,i),n(e)};r.bind(t,i)};var tD={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)};function tj(e){var t,n,r,i=e.element,o=Math.floor(i.scrollTop),a=i.getBoundingClientRect();e.containerWidth=Math.ceil(a.width),e.containerHeight=Math.ceil(a.height),e.contentWidth=i.scrollWidth,e.contentHeight=i.scrollHeight,i.contains(e.scrollbarXRail)||(tT(i,tC.rail("x")).forEach(function(e){return tS(e)}),i.appendChild(e.scrollbarXRail)),i.contains(e.scrollbarYRail)||(tT(i,tC.rail("y")).forEach(function(e){return tS(e)}),i.appendChild(e.scrollbarYRail)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=tH(e,tN(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=tN((e.negativeScrollAdjustment+i.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=tH(e,tN(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=tN(o*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),t={width:e.railXWidth},n=Math.floor(i.scrollTop),e.isRtl?t.left=e.negativeScrollAdjustment+i.scrollLeft+e.containerWidth-e.contentWidth:t.left=i.scrollLeft,e.isScrollbarXUsingBottom?t.bottom=e.scrollbarXBottom-n:t.top=e.scrollbarXTop+n,tx(e.scrollbarXRail,t),r={top:n,height:e.railYHeight},e.isScrollbarYUsingRight?e.isRtl?r.right=e.contentWidth-(e.negativeScrollAdjustment+i.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:r.right=e.scrollbarYRight-i.scrollLeft:e.isRtl?r.left=e.negativeScrollAdjustment+i.scrollLeft+2*e.containerWidth-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:r.left=e.scrollbarYLeft+i.scrollLeft,tx(e.scrollbarYRail,r),tx(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),tx(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth}),e.scrollbarXActive?i.classList.add(tP.active("x")):(i.classList.remove(tP.active("x")),e.scrollbarXWidth=0,e.scrollbarXLeft=0,i.scrollLeft=!0===e.isRtl?e.contentWidth:0),e.scrollbarYActive?i.classList.add(tP.active("y")):(i.classList.remove(tP.active("y")),e.scrollbarYHeight=0,e.scrollbarYTop=0,i.scrollTop=0)}function tH(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function tU(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=e.element,p=null,h=null,f=null;function g(t){t.touches&&t.touches[0]&&(t[i]=t.touches[0].pageY),d[c]=p+f*(t[i]-h),tL(e,l),tj(e),t.stopPropagation(),t.preventDefault()}function m(){tR(e,l),e[u].classList.remove(tP.clicking),e.event.unbind(e.ownerDocument,"mousemove",g)}function v(t,a){p=d[c],a&&t.touches&&(t[i]=t.touches[0].pageY),h=t[i],f=(e[r]-e[n])/(e[o]-e[s]),a?e.event.bind(e.ownerDocument,"touchmove",g):(e.event.bind(e.ownerDocument,"mousemove",g),e.event.once(e.ownerDocument,"mouseup",m),t.preventDefault()),e[u].classList.add(tP.clicking),t.stopPropagation()}e.event.bind(e[a],"mousedown",function(e){v(e)}),e.event.bind(e[a],"touchstart",function(e){v(e,!0)})}var tX={"click-rail":function(e){e.element,e.event.bind(e.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),e.event.bind(e.scrollbarYRail,"mousedown",function(t){var n=t.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top>e.scrollbarYTop?1:-1;e.element.scrollTop+=n*e.containerHeight,tj(e),t.stopPropagation()}),e.event.bind(e.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),e.event.bind(e.scrollbarXRail,"mousedown",function(t){var n=t.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left>e.scrollbarXLeft?1:-1;e.element.scrollLeft+=n*e.containerWidth,tj(e),t.stopPropagation()})},"drag-thumb":function(e){tU(e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),tU(e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])},keyboard:function(e){var t=e.element;e.event.bind(e.ownerDocument,"keydown",function(n){if(!(n.isDefaultPrevented&&n.isDefaultPrevented()||n.defaultPrevented)&&(tk(t,":hover")||tk(e.scrollbarX,":focus")||tk(e.scrollbarY,":focus"))){var r,i=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(i){if("IFRAME"===i.tagName)i=i.contentDocument.activeElement;else for(;i.shadowRoot;)i=i.shadowRoot.activeElement;if(tk(r=i,"input,[contenteditable]")||tk(r,"select,[contenteditable]")||tk(r,"textarea,[contenteditable]")||tk(r,"button,[contenteditable]"))return}var o=0,a=0;switch(n.which){case 37:o=n.metaKey?-e.contentWidth:n.altKey?-e.containerWidth:-30;break;case 38:a=n.metaKey?e.contentHeight:n.altKey?e.containerHeight:30;break;case 39:o=n.metaKey?e.contentWidth:n.altKey?e.containerWidth:30;break;case 40:a=n.metaKey?-e.contentHeight:n.altKey?-e.containerHeight:-30;break;case 32:a=n.shiftKey?e.containerHeight:-e.containerHeight;break;case 33:a=e.containerHeight;break;case 34:a=-e.containerHeight;break;case 36:a=e.contentHeight;break;case 35:a=-e.contentHeight;break;default:return}e.settings.suppressScrollX&&0!==o||e.settings.suppressScrollY&&0!==a||(t.scrollTop-=a,t.scrollLeft+=o,tj(e),function(n,r){var i=Math.floor(t.scrollTop);if(0===n){if(!e.scrollbarYActive)return!1;if(0===i&&r>0||i>=e.contentHeight-e.containerHeight&&r<0)return!e.settings.wheelPropagation}var o=t.scrollLeft;if(0===r){if(!e.scrollbarXActive)return!1;if(0===o&&n<0||o>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}(o,a)&&n.preventDefault())}})},wheel:function(e){var t=e.element;function n(n){var r=(a=n.deltaX,s=-1*n.deltaY,void 0!==a&&void 0!==s||(a=-1*n.wheelDeltaX/6,s=n.wheelDeltaY/6),n.deltaMode&&1===n.deltaMode&&(a*=10,s*=10),a!=a&&s!=s&&(a=0,s=n.wheelDelta),n.shiftKey?[-s,-a]:[a,s]),i=r[0],o=r[1];if(!function(e,n,r){if(!tD.isWebKit&&t.querySelector("select:focus"))return!0;if(!t.contains(e))return!1;for(var i=e;i&&i!==t;){if(i.classList.contains(tC.consuming))return!0;var o=tb(i);if(r&&o.overflowY.match(/(scroll|auto)/)){var a=i.scrollHeight-i.clientHeight;if(a>0&&(i.scrollTop>0&&r<0||i.scrollTop<a&&r>0))return!0}if(n&&o.overflowX.match(/(scroll|auto)/)){var s=i.scrollWidth-i.clientWidth;if(s>0&&(i.scrollLeft>0&&n<0||i.scrollLeft<s&&n>0))return!0}i=i.parentNode}return!1}(n.target,i,o)){var a,s,c,l,u,d,p,h=!1;e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(o?t.scrollTop-=o*e.settings.wheelSpeed:t.scrollTop+=i*e.settings.wheelSpeed,h=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(i?t.scrollLeft+=i*e.settings.wheelSpeed:t.scrollLeft-=o*e.settings.wheelSpeed,h=!0):(t.scrollTop-=o*e.settings.wheelSpeed,t.scrollLeft+=i*e.settings.wheelSpeed),tj(e),(h=h||(c=Math.floor(t.scrollTop),l=0===t.scrollTop,u=c+t.offsetHeight===t.scrollHeight,d=0===t.scrollLeft,p=t.scrollLeft+t.offsetWidth===t.scrollWidth,!(Math.abs(o)>Math.abs(i)?l||u:d||p)||!e.settings.wheelPropagation))&&!n.ctrlKey&&(n.stopPropagation(),n.preventDefault())}}void 0!==window.onwheel?e.event.bind(t,"wheel",n):void 0!==window.onmousewheel&&e.event.bind(t,"mousewheel",n)},touch:function(e){if(tD.supportsTouch||tD.supportsIePointer){var t=e.element,n={},r=0,i={},o=null;tD.supportsTouch?(e.event.bind(t,"touchstart",l),e.event.bind(t,"touchmove",u),e.event.bind(t,"touchend",d)):tD.supportsIePointer&&(window.PointerEvent?(e.event.bind(t,"pointerdown",l),e.event.bind(t,"pointermove",u),e.event.bind(t,"pointerup",d)):window.MSPointerEvent&&(e.event.bind(t,"MSPointerDown",l),e.event.bind(t,"MSPointerMove",u),e.event.bind(t,"MSPointerUp",d)))}function a(n,r){t.scrollTop-=r,t.scrollLeft-=n,tj(e)}function s(e){return e.targetTouches?e.targetTouches[0]:e}function c(e){return(!e.pointerType||"pen"!==e.pointerType||0!==e.buttons)&&(!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE))}function l(e){if(c(e)){var t=s(e);n.pageX=t.pageX,n.pageY=t.pageY,r=(new Date).getTime(),null!==o&&clearInterval(o)}}function u(o){if(c(o)){var l=s(o),u={pageX:l.pageX,pageY:l.pageY},d=u.pageX-n.pageX,p=u.pageY-n.pageY;if(!function(e,n,r){if(!t.contains(e))return!1;for(var i=e;i&&i!==t;){if(i.classList.contains(tC.consuming))return!0;var o=tb(i);if(r&&o.overflowY.match(/(scroll|auto)/)){var a=i.scrollHeight-i.clientHeight;if(a>0&&(i.scrollTop>0&&r<0||i.scrollTop<a&&r>0))return!0}if(n&&o.overflowX.match(/(scroll|auto)/)){var s=i.scrollWidth-i.clientWidth;if(s>0&&(i.scrollLeft>0&&n<0||i.scrollLeft<s&&n>0))return!0}i=i.parentNode}return!1}(o.target,d,p)){a(d,p),n=u;var h=(new Date).getTime(),f=h-r;f>0&&(i.x=d/f,i.y=p/f,r=h),function(n,r){var i=Math.floor(t.scrollTop),o=(t.scrollLeft,Math.abs(n)),a=Math.abs(r);if(a>o){if(r<0&&i===e.contentHeight-e.containerHeight||r>0&&0===i)return 0===window.scrollY&&r>0&&tD.isChrome}else o>a&&n<0&&(e.contentWidth,e.containerWidth);return!0}(d,p)&&o.preventDefault()}}}function d(){e.settings.swipeEasing&&(clearInterval(o),o=setInterval(function(){e.isInitialized?clearInterval(o):i.x||i.y?.01>Math.abs(i.x)&&.01>Math.abs(i.y)?clearInterval(o):(a(30*i.x,30*i.y),i.x*=.8,i.y*=.8):clearInterval(o)},10))}}},tW=function(e,t){var n,r=this;if(void 0===t&&(t={}),"string"==typeof e&&(e=document.querySelector(e)),!e||!e.nodeName)throw Error("no element is specified to initialize PerfectScrollbar");for(var i in this.element=e,e.classList.add("ps"),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1},t)this.settings[i]=t[i];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var o,a,s=function(){return e.classList.add(tP.focus)},c=function(){return e.classList.remove(tP.focus)};this.isRtl="rtl"===tb(e).direction,!0===this.isRtl&&e.classList.add("ps__rtl"),this.isNegativeScroll=(a=e.scrollLeft,e.scrollLeft=-1,o=e.scrollLeft<0,e.scrollLeft=a,o),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new tI,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=tE(tC.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=tE(tC.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",s),this.event.bind(this.scrollbarX,"blur",c),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var l=tb(this.scrollbarXRail);this.scrollbarXBottom=parseInt(l.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=tN(l.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=tN(l.borderLeftWidth)+tN(l.borderRightWidth),tx(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=tN(l.marginLeft)+tN(l.marginRight),tx(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=tE(tC.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=tE(tC.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",s),this.event.bind(this.scrollbarY,"blur",c),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var u=tb(this.scrollbarYRail);this.scrollbarYRight=parseInt(u.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=tN(u.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?tN((n=tb(this.scrollbarY)).width)+tN(n.paddingLeft)+tN(n.paddingRight)+tN(n.borderLeftWidth)+tN(n.borderRightWidth):null,this.railBorderYWidth=tN(u.borderTopWidth)+tN(u.borderBottomWidth),tx(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=tN(u.marginTop)+tN(u.marginBottom),tx(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(e){return tX[e](r)}),this.lastScrollTop=Math.floor(e.scrollTop),this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(e){return r.onScroll(e)}),tj(this)};tW.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,tx(this.scrollbarXRail,{display:"block"}),tx(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=tN(tb(this.scrollbarXRail).marginLeft)+tN(tb(this.scrollbarXRail).marginRight),this.railYMarginHeight=tN(tb(this.scrollbarYRail).marginTop)+tN(tb(this.scrollbarYRail).marginBottom),tx(this.scrollbarXRail,{display:"none"}),tx(this.scrollbarYRail,{display:"none"}),tj(this),tO(this,"top",0,!1,!0),tO(this,"left",0,!1,!0),tx(this.scrollbarXRail,{display:""}),tx(this.scrollbarYRail,{display:""}))},tW.prototype.onScroll=function(e){this.isAlive&&(tj(this),tO(this,"top",this.element.scrollTop-this.lastScrollTop),tO(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},tW.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),tS(this.scrollbarX),tS(this.scrollbarY),tS(this.scrollbarXRail),tS(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},tW.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")};var tB=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),i=document.createRange();i.selectNodeContents(e),r.removeAllRanges(),r.addRange(i),t=r.toString()}return t},tY=a(function(e,t){var n,r,i,o;n=tB&&tB.__esModule?tB:{default:tB},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.resolveOptions(t),this.initSelection()}return i(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=r+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,n.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,n.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":r(e))||1!==e.nodeType)throw Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}(),e.exports=o});function tF(){}o(tY),tF.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function i(){r.off(e,i),t.apply(n,arguments)}return i._=t,this.on(e,i,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var o=0,a=r.length;o<a;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?n[e]=i:delete n[e],this}};var tG=a(function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}});if(tG.node,tG.nodeList,tG.string,tG.fn,"undefined"!=typeof Element&&!Element.prototype.matches){var tJ=Element.prototype;tJ.matches=tJ.matchesSelector||tJ.mozMatchesSelector||tJ.msMatchesSelector||tJ.oMatchesSelector||tJ.webkitMatchesSelector}var tK=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}};function tV(e,t,n,r){return function(n){n.delegateTarget=tK(n.target,t),n.delegateTarget&&r.call(e,n)}}var tq=function(e,t,n,r,i){var o=tV.apply(this,arguments);return e.addEventListener(n,o,i),{destroy:function(){e.removeEventListener(n,o,i)}}},tZ=function(e,t,n){if(!e&&!t&&!n)throw Error("Missing required arguments");if(!tG.string(t))throw TypeError("Second argument must be a String");if(!tG.fn(n))throw TypeError("Third argument must be a Function");if(tG.node(e))return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}};if(tG.nodeList(e))return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}};if(tG.string(e))return tq(document.body,e,t,n);throw TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")},tQ=o(a(function(e,t){!function(e,t,n,r){var i=s(t),o=s(n),a=s(r);function s(e){return e&&e.__esModule?e:{default:e}}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(n),r.listenClick(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===c(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,a.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new i.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return d("action",e)}},{key:"defaultTarget",value:function(e){var t=d("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return d("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t=!!document.queryCommandSupported;return("string"==typeof e?[e]:e).forEach(function(e){t=t&&!!document.queryCommandSupported(e)}),t}}]),t}(o.default);function d(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}e.exports=u}(e,tY,tF,tZ)}));function t$(e){for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1}function t0(e){var t=e.elements;t.candidatesElement.innerHTML="",t.smartGuideElement.classList.add("smartguide-out"),t.smartGuideElement.classList.remove("smartguide-in")}var t1=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")};function t2(e){return e.canUndo=e.currentPosition>0,e.canRedo=e.currentPosition<e.stack.length-1,e}function t3(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.stack[e.currentPosition],r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return Promise.resolve({res:t?eg(n):n,types:i})}var t4=Object.freeze({__proto__:null,getModel:t3,updateModel:function(e,t){var n=e.stack.findIndex(function(e){return e.modificationTime===t.modificationTime&&e.rawStrokes.length===t.rawStrokes.length});t.modificationTime=(new Date).getTime();var i=[];return n>-1?(e.stack.splice(n,1,eg(t)),l.debug("model updated",t)):(e.currentPosition+=1,e.stack=e.stack.slice(0,e.currentPosition),e.stack.push(eg(t)),e.stack.length>e.maxSize&&(e.stack.shift(),e.currentPosition--),l.debug("model pushed",t),i.push(r.EventType.CHANGED)),t2(e),l.debug("undo/redo stack updated",e),t3.apply(void 0,[e,!1].concat(i))},undo:function(e,t){return e.currentPosition>0&&(e.currentPosition-=1,t2(e),l.debug("undo index",e.currentPosition)),t3(e,!0,r.EventType.CHANGED,r.EventType.EXPORTED)},redo:function(e,t){return e.currentPosition<e.stack.length-1&&(e.currentPosition+=1,t2(e),l.debug("redo index",e.currentPosition)),t3(e,!0,r.EventType.CHANGED,r.EventType.EXPORTED)}});function t5(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=document.createElement("canvas");return n.width=Math.abs(e.maxX-e.minX)+2*t,n.style.width="".concat(n.width,"px"),n.height=Math.abs(e.maxY-e.minY)+2*t,n.style.height="".concat(n.height,"px"),n}var t6=Object.freeze({__proto__:null,inkImporter:function(e,t,n,r){c.debug("inkImporter start importing =>",t);var i=Object.assign({},e.behavior.grabber);i.detach=e.behavior.grabber.detach,e.behavior.grabber={};var o=[];t.forEach(function(e){e.convert?o.push({action:"convert",value:!0}):e.setDelay?o.push({action:"setDelay",value:e.setDelay}):(e.color&&o.push({action:"setColor",value:e.color}),e.X.forEach(function(t,n){var r="move";0===n?r="down":n===e.X.length-1&&(r="up"),o.push({action:r,point:{x:e.X[n],y:e.Y[n]}})}))}),c.debug("Array of actions =>",o),function t(n,o,a){if(o<n.length){var s=n[o],c=a;if("convert"===s.action?e.convert():"setDelay"===s.action?c=s.value:"setColor"===s.action?e.penStyle={color:s.value}:(s.point.t=(new Date).getTime(),"down"===s.action?e.pointerDown(s.point):"up"===s.action?e.pointerUp(s.point):"move"===s.action&&e.pointerMove(s.point)),r&&o===n.map(function(e){return e.action}).lastIndexOf("down")-1)setTimeout(function(){t(n,o+1,c)},r);else if(o===n.length-1){var l=new Event("drawEnded");document.dispatchEvent(l),e.behavior.grabber=i}else setTimeout(function(){t(n,o+1,c)},c)}}(o,0,n)},importStrokeGroups:function(e,t){t.forEach(function(t){t.strokes.forEach(function(n){er(e.model,n),ei(e.model,n,t.penStyle)})}),e.renderer.drawModel(e.rendererContext,e.model,e.stroker)}});function t9(){var e,t,n=new Promise(function(r,i){var o,a;o=ta(ti.mark(function e(t){return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.isFullfilled=!0,n.isPending=!1,e.abrupt("return",r(t));case 3:case"end":return e.stop()}},e)})),e=function(e){return o.apply(this,arguments)},a=ta(ti.mark(function e(t){return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.isRejected=!0,n.isPending=!1,i(t);case 3:case"end":return e.stop()}},e)})),t=function(e){return a.apply(this,arguments)}});return n.isPending=!0,{promise:n,resolve:e,reject:t}}function t8(e){var t=null;return{promise:new Promise(function(n){t=setTimeout(n,e)}),timer:t}}function t7(e,t){return e.recognizer.reset&&!e.isErasing&&th(e.recognizerContext,t)?e.recognizer.reset(e.recognizerContext,t):null}function ne(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.configuration.triggers[t];return!(!e.recognizer||!e.recognizer.getInfo().availableTriggers[t].includes(n))||(c.error("".concat(n," is not a valid trigger for ").concat(t)),!1)}function nt(){return(nt=ta(ti.mark(function e(t,n){var r,i,o=arguments;return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>2&&void 0!==o[2]?o[2]:t.configuration.triggers.addStrokes,!t.recognizer||!t.recognizer.addStrokes){e.next=13;break}return e.next=4,t.recognizerContext.initPromise;case 4:if(!e.sent||!ne(t,"addStrokes",r)){e.next=13;break}return e.next=9,t7(t,n);case 9:if(!(i=e.sent)){e.next=12;break}return e.abrupt("return",t.recognizer.addStrokes(t.recognizerContext,i));case 12:return e.abrupt("return",t.recognizer.addStrokes(t.recognizerContext,n));case 13:return e.abrupt("return",Promise.reject(Error("Cannot addStrokes")));case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nn(){return(nn=ta(ti.mark(function e(t,n,r){return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.recognizer||!t.recognizer.pointerEvents){e.next=6;break}return e.next=3,t.recognizerContext.initPromise;case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",t.recognizer.pointerEvents(t.recognizerContext,n,r));case 6:return e.abrupt("return",Promise.reject(Error("Cannot launch pointerEvents")));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nr(e,t,n){return ni.apply(this,arguments)}function ni(){return(ni=ta(ti.mark(function e(t,n,i){var o,a,s,c,l=arguments;return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=l.length>3&&void 0!==l[3]?l[3]:t.configuration.triggers.exportContent,!t.recognizer||!t.recognizer.export_){e.next=20;break}return e.next=4,t.recognizerContext.initPromise;case 4:if(!e.sent||!ne(t,"exportContent",o)){e.next=20;break}return a=t,window.clearTimeout(t.exportTimer),s=t8(o===r.Trigger.QUIET_PERIOD?t.configuration.triggerDelay:0),a.exportTimer=s.timer,e.next=14,s.promise;case 14:return e.next=16,t7(t,n);case 16:if(!(c=e.sent)){e.next=19;break}return e.abrupt("return",t.recognizer.export_(t.recognizerContext,c,i));case 19:return e.abrupt("return",t.recognizer.export_(t.recognizerContext,n,i));case 20:return e.abrupt("return",Promise.reject(Error("Cannot launch export")));case 21:case"end":return e.stop()}},e)}))).apply(this,arguments)}function no(){return(no=ta(ti.mark(function e(t,n,r){return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.recognizer||!t.recognizer.import_){e.next=6;break}return e.next=3,t.recognizerContext.initPromise;case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",t.recognizer.import_(t.recognizerContext,n,r));case 6:return e.abrupt("return",Promise.reject(Error("Cannot launch import")));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function na(){return(na=ta(ti.mark(function e(t,n){return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.recognizer||!t.recognizer.getSupportedImportMimeTypes){e.next=6;break}return e.next=3,t.recognizerContext.initPromise;case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",t.recognizer.getSupportedImportMimeTypes(t.recognizerContext,n));case 6:return e.abrupt("return",Promise.reject(Error("Cannot launch getSupportedImportMimeTypes")));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ns(){return(ns=ta(ti.mark(function e(t,n,r){return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.recognizer||!t.recognizer.convert){e.next=6;break}return e.next=3,t.recognizerContext.initPromise;case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",t.recognizer.convert(t.recognizerContext,n,r));case 6:return e.abrupt("return",Promise.reject(Error("Cannot launch convert")));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nc(){return(nc=ta(ti.mark(function e(t,n){return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.recognizer||!t.recognizer.sendConfiguration){e.next=6;break}return e.next=3,t.recognizerContext.initPromise;case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",t.recognizer.sendConfiguration(t.recognizerContext,n));case 6:return e.abrupt("return",Promise.reject(Error("Cannot launch config")));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nl(){return(nl=ta(ti.mark(function e(t,n){var r,i;return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.recognizer||!t.recognizer.resize){e.next=13;break}return e.next=3,t.recognizerContext.initPromise;case 3:if(!e.sent){e.next=13;break}return r=t,window.clearTimeout(t.resizeTimer),i=t8(t.configuration.resizeTriggerDelay),r.resizeTimer=i.timer,function(e){var t=e.elements,n=3.779527559*e.editor.configuration.recognitionParams.iink.text.margin.left,r=e.editor.domElement.clientWidth-n-t.tagElement.offsetWidth-35-n;t.textContainer.style.width="".concat(r,"px"),t.textContainer.style.maxWidth="".concat(r,"px"),n=t.tagElement.offsetWidth+r,t.ellipsisElement.style.left="".concat(n,"px"),t.smartGuideElement.style.width="".concat(t.tagElement.offsetWidth+t.textContainer.offsetWidth+t.ellipsisElement.offsetWidth,"px"),e.perfectScrollbar.update()}(t.smartGuide),e.next=12,i.promise;case 12:return e.abrupt("return",t.recognizer.resize(t.recognizerContext,n,t.domElement));case 13:return e.abrupt("return",Promise.reject(Error("Cannot launch resize")));case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nu(){return(nu=ta(ti.mark(function e(t,n){return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.recognizer||!t.recognizer.waitForIdle){e.next=6;break}return e.next=3,t.recognizerContext.initPromise;case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",t.recognizer.waitForIdle(t.recognizerContext,n));case 6:return e.abrupt("return",Promise.reject(Error("Cannot launch wait for idle")));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nd(){return(nd=ta(ti.mark(function e(t,n){return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.smartGuide&&t0(t.smartGuide),!t.recognizer||!t.recognizer.close){e.next=10;break}return e.next=4,t.recognizerContext.initPromise;case 4:if(!e.sent){e.next=10;break}return t.loader.style.display="none",t.error.innerText=r.Error.CLOSE,t.error.style.display="initial",e.abrupt("return",t.recognizer.close(t.recognizerContext,n));case 10:return e.abrupt("return",Promise.reject(Error("Cannot launch close")));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function np(e,t){return nh.apply(this,arguments)}function nh(){return(nh=ta(ti.mark(function e(t,n){return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.recognizer||!t.recognizer.setPenStyle){e.next=7;break}return e.next=3,t.recognizerContext.initPromise;case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",t.recognizer.setPenStyle(t.recognizerContext,n,t.penStyle));case 6:return e.abrupt("return",Promise.reject(Error("Cannot set pentStyle")));case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nf(e,t){return ng.apply(this,arguments)}function ng(){return(ng=ta(ti.mark(function e(t,n){return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.recognizer||!t.recognizer.setPenStyleClasses){e.next=7;break}return e.next=3,t.recognizerContext.initPromise;case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",t.recognizer.setPenStyleClasses(t.recognizerContext,n,t.penStyleClasses));case 6:return e.abrupt("return",Promise.reject(Error("Cannot set penStyleClasses")));case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nm(e,t){return nv.apply(this,arguments)}function nv(){return(nv=ta(ti.mark(function e(t,n){return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.recognizer||!t.recognizer.setTheme){e.next=7;break}return e.next=3,t.recognizerContext.initPromise;case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",t.recognizer.setTheme(t.recognizerContext,n,t.theme));case 6:return e.abrupt("return",Promise.reject(Error("Cannot set theme")));case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ny=function(){var e,t,n,i;function o(e,t,n,r,i,a){t1(this,o),a=a||"ms-editor";var s=document.createElement("style");s.appendChild(document.createTextNode("")),e.appendChild(s);var l=s.sheet;s.textContent="/*\n * Container style\n */\n.ps {\n  overflow: hidden !important;\n  overflow-anchor: none;\n  -ms-overflow-style: none;\n  touch-action: auto;\n  -ms-touch-action: auto;\n}\n/*\n * Scrollbar rail styles\n */\n.ps__rail-x {\n  display: none;\n  opacity: 0;\n  transition: background-color .2s linear, opacity .2s linear;\n  -webkit-transition: background-color .2s linear, opacity .2s linear;\n  height: 15px;\n  /* there must be 'bottom' or 'top' for ps__rail-x */\n  bottom: 0px;\n  /* please don't change 'position' */\n  position: absolute;\n}\n.ps__rail-y {\n  display: none;\n  opacity: 0;\n  transition: background-color .2s linear, opacity .2s linear;\n  -webkit-transition: background-color .2s linear, opacity .2s linear;\n  width: 15px;\n  /* there must be 'right' or 'left' for ps__rail-y */\n  right: 0;\n  /* please don't change 'position' */\n  position: absolute;\n}\n.ps--active-x > .ps__rail-x,\n.ps--active-y > .ps__rail-y {\n  display: block;\n  background-color: transparent;\n}\n.ps:hover > .ps__rail-x,\n.ps:hover > .ps__rail-y,\n.ps--focus > .ps__rail-x,\n.ps--focus > .ps__rail-y,\n.ps--scrolling-x > .ps__rail-x,\n.ps--scrolling-y > .ps__rail-y {\n  opacity: 0.6;\n}\n.ps .ps__rail-x:hover,\n.ps .ps__rail-y:hover,\n.ps .ps__rail-x:focus,\n.ps .ps__rail-y:focus,\n.ps .ps__rail-x.ps--clicking,\n.ps .ps__rail-y.ps--clicking {\n  background-color: #eee;\n  opacity: 0.9;\n}\n/*\n * Scrollbar thumb styles\n */\n.ps__thumb-x {\n  background-color: #aaa;\n  border-radius: 6px;\n  transition: background-color .2s linear, height .2s ease-in-out;\n  -webkit-transition: background-color .2s linear, height .2s ease-in-out;\n  height: 6px;\n  /* there must be 'bottom' for ps__thumb-x */\n  bottom: 2px;\n  /* please don't change 'position' */\n  position: absolute;\n}\n.ps__thumb-y {\n  background-color: #aaa;\n  border-radius: 6px;\n  transition: background-color .2s linear, width .2s ease-in-out;\n  -webkit-transition: background-color .2s linear, width .2s ease-in-out;\n  width: 6px;\n  /* there must be 'right' for ps__thumb-y */\n  right: 2px;\n  /* please don't change 'position' */\n  position: absolute;\n}\n.ps__rail-x:hover > .ps__thumb-x,\n.ps__rail-x:focus > .ps__thumb-x,\n.ps__rail-x.ps--clicking .ps__thumb-x {\n  background-color: #999;\n  height: 11px;\n}\n.ps__rail-y:hover > .ps__thumb-y,\n.ps__rail-y:focus > .ps__thumb-y,\n.ps__rail-y.ps--clicking .ps__thumb-y {\n  background-color: #999;\n  width: 11px;\n}\n/* MS supports */\n@supports (-ms-overflow-style: none) {\n  .ps {\n    overflow: auto !important;\n  }\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .ps {\n    overflow: auto !important;\n  }\n}\n.ms-editor {\n    position: relative;\n    z-index: 20;\n    color: #1A9FFF;\n    font-family: sans-serif;\n}\n.ms-editor.erasing {\n    cursor: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEsSURBVDiNrdO7SgNBFMbx/3fmCbQ1tunDIayFBvFSKxbxBfSdBPEBtLIWb3Ebl4R9AQWLkE70CWbHZl1Eg2iSr5vL+c1hhhFTMhwOdyX1gQ2gVU+PgTyldNHtdq+/1+jroCiKtpmdSupNO6ApkgZmdtzpdJ5+QGVZ9qqqugSWfkO+5F3SnrvnDVQURTuE8PgP5DNvkjJ3fzaAEMLJDAjAclVVZwCqL/ZqBqSJme2YpMN5EIAYY9+A9XkhST0DVuaFgJYtAAGoDJgsAJoYkM+rSHqwlNL5Ajq6EMBoNLoBtmbsZuDumwYQYzwCXmdw3oAjAAPIsuxF0kG98GdE0r67PzcQgLvnIYQ14P4PyF39WZuH0rRdZVluxxj7kjaA1Xp6nFLKzezc3W+/13wAItdV6XjME1AAAAAASUVORK5CYII=') 10 10, auto;\n}\n.ms-editor canvas,\n.ms-editor svg {\n    z-index: 15;\n    position: absolute;\n    left: 0;\n    top: 0;\n    height: 100%;\n    width: 100%;\n}\n.ms-editor canvas.ms-rendering-canvas {\n    z-index: 10;\n    pointer-events: none;\n    background-image: linear-gradient(to right, #F5F6F7 1px, transparent 1px),\n    linear-gradient(to bottom, #F5F6F7 1px, transparent 1px);\n    background-size: 18px 18px;\n}\n.ms-editor svg {\n    z-index: 10;\n    pointer-events: none;\n}\n.ms-editor svg[data-layer=\"BACKGROUND\"] {\n    z-index: 9;\n}\n.ms-editor .loader {\n    z-index: 30;\n    position: absolute;\n    width: 120px;\n    height: 120px;\n    top: calc(50% - 60px);\n    left: calc(50% - 60px);\n    border: 16px solid #F5F6F7;\n    border-radius: 50%;\n    border-top-color: #1A9FFF;\n    -webkit-animation: spin 2s linear infinite;\n    animation: spin 2s linear infinite;\n}\n.ms-editor .error-msg {\n    z-index: 25;\n    position: absolute;\n    width: 200px;\n    height: 200px;\n    top: calc(50% - 100px);\n    left: calc(50% - 100px);\n    font-size: 16px;\n    text-align: center;\n    word-wrap: break-word;\n}\n.ms-editor .error-msg::before {\n    content: url(data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCA3Ni41IDYxMiA0NTkiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaW5ZTWluIG1lZXQiPgogICAgPHBhdGggZmlsbD0iIzFBOUZGRiIgZD0iTTQ5NC43LDIyOS41Yy0xNy44NTEtODYuNy05NC4zNTEtMTUzLTE4OC43LTE1M2MtMzguMjUsMC03My45NSwxMC4yLTEwMiwzMC42bDM4LjI1LDM4LjI1IGMxNy44NS0xMi43NSw0MC44LTE3Ljg1LDYzLjc1LTE3Ljg1Yzc2LjUsMCwxNDAuMjUsNjMuNzUsMTQwLjI1LDE0MC4yNXYxMi43NWgzOC4yNWM0My4zNSwwLDc2LjUsMzMuMTUsNzYuNSw3Ni41IGMwLDI4LjA1LTE1LjMsNTMuNTUtNDAuOCw2Ni4zbDM4LjI1LDM4LjI1QzU5MS42LDQzOC42LDYxMiw0MDAuMzUsNjEyLDM1N0M2MTIsMjkwLjcsNTU4LjQ1LDIzNC42LDQ5NC43LDIyOS41eiBNNzYuNSwxMDkuNjUgbDcxLjQsNjguODVDNjYuMywxODMuNiwwLDI0OS45LDAsMzMxLjVjMCw4NC4xNSw2OC44NSwxNTMsMTUzLDE1M2gyOTguMzVsNTEsNTFsMzMuMTUtMzMuMTVMMTA5LjY1LDc2LjVMNzYuNSwxMDkuNjV6IE0xOTYuMzUsMjI5LjVsMjA0LDIwNEgxNTNjLTU2LjEsMC0xMDItNDUuOS0xMDItMTAyYzAtNTYuMSw0NS45LTEwMiwxMDItMTAySDE5Ni4zNXoiIC8+Cjwvc3ZnPgo=);\n}\n.ms-editor .smartguide {\n    position: absolute;\n    z-index: 40;\n    font-size: 16px;\n}\n.ms-editor .smartguide.smartguide-in {\n    visibility: visible !important;\n    transition: opacity 0.5s;\n    opacity: 1;\n}\n.ms-editor .smartguide.smartguide-out {\n    transition: opacity 1s, visibility 1s;\n    visibility: hidden !important;\n    opacity: 0;\n}\n.ms-editor .smartguide .tag-icon {\n    padding: 0 18px;\n    border: 1px solid #959DA6;\n    font-weight: bold;\n    font-size: large;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    position: absolute;\n    z-index: 31;\n    height: 48px;\n    line-height: 48px;\n    background-color: rgba(255, 255, 255, 0.9);\n    color: #959DA6;\n}\n.ms-editor .smartguide .ellipsis {\n    cursor: pointer;\n    border-bottom: 1px solid #959DA6;\n    position: absolute;\n    z-index: 31;\n    height: 48px;\n    line-height: 38px;\n    padding: 0 8px;\n    font-weight: bold;\n    font-size: x-large;\n    background-color: rgba(255, 255, 255, 0.9);\n    color: #959DA6;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    -webkit-tap-highlight-color: transparent;\n}\n.ms-editor .smartguide .ellipsis:active {\n    background-color: #e0e0e0;\n}\n.ms-editor .smartguide .prompter-text-container {\n    background-color: rgba(255, 255, 255, 0.9);\n    height: 48px;\n    line-height: 48px;\n    overflow: hidden;\n    white-space: nowrap;\n    display: block;\n    text-align: left;\n    border-bottom: 1px solid #959DA6;\n    position: absolute;\n    z-index: 30;\n    color: #bfbfbf;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    -webkit-tap-highlight-color: transparent;\n}\n.ms-editor .smartguide .prompter-text-container > div > span {\n    cursor: pointer;\n    display: inline-block;\n}\n.ms-editor .smartguide .prompter-text-container .prompter-text {\n    margin-left: 12px;\n}\n.ms-editor .smartguide .prompter-text-container .prompter-text .added-word {\n    animation: 0.1s linear word-added,\n    3s ease-in-out color-input;\n}\n.ms-editor .smartguide .prompter-text-container .prompter-text .modified-word {\n    animation: 0.1s linear word-modified,\n    3s ease-in-out color-input;\n}\n.ms-editor .smartguide .candidates {\n    color: black;\n    flex-direction: column;\n    text-align: center;\n    line-height: 30px;\n    border-radius: 3px;\n    position: absolute;\n    box-shadow: 2px 2px 12px #BDBDBD, -2px 2px 12px #BDBDBD;\n    background-color: #F5F5F5;\n    z-index: 100;\n    -webkit-tap-highlight-color: transparent;\n}\n.ms-editor .smartguide .candidates > span {\n    cursor: pointer;\n    padding: 2px 20px;\n}\n.ms-editor .smartguide .candidates > span:hover {\n    background-color: #EEEEEE;\n}\n.ms-editor .smartguide .candidates > span:active {\n    background-color: #E0E0E0;\n}\n.ms-editor .smartguide .candidates .selected-word {\n    font-weight: bold;\n    background-color: #E0E0E0;\n}\n.ms-editor .smartguide .more-menu {\n    flex-direction: column;\n    margin-right: 12px;\n    line-height: 30px;\n    border-radius: 3px;\n    position: absolute;\n    z-index: 100;\n    box-shadow: 2px 2px 12px #BDBDBD;\n    background-color: #F5F5F5;\n}\n.ms-editor .smartguide .more-menu .options-label-button {\n    color: black;\n    font-size: 16px;\n    cursor: pointer;\n    box-sizing: border-box;\n    background: transparent;\n    border: none;\n    padding: 0 24px;\n    margin: 0;\n    height: 40px;\n    outline: none;\n    -webkit-tap-highlight-color: transparent;\n}\n.ms-editor .smartguide .more-menu .options-label-button:hover {\n    background-color: #EEEEEE;\n}\n.ms-editor .smartguide .more-menu .options-label-button:active {\n    background-color: #E0E0E0;\n}\n.ms-editor .ps__rail-x {\n    top: 32px !important;\n}\n/** Stroke **/\n.ms-editor .removed-stroke {\n    opacity: 0;\n    transition: opacity 0.1s ease-in-out;\n}\n.ms-editor .added-stroke {\n    animation: 0.2s opacity-appear;\n}\n@keyframes color-input {\n    0% {\n        color: black;\n    }\n    100% {\n        color: #bfbfbf;\n    }\n}\n@keyframes word-added {\n    0% {\n        transform: translate(5px, 0);\n    }\n    100% {\n        transform: none;\n    }\n}\n@keyframes word-modified {\n    0% {\n        transform: translate(0, 5px);\n    }\n    100% {\n        transform: none;\n    }\n}\n@keyframes opacity-appear {\n    0% {\n        opacity: 0;\n    }\n    100% {\n        opacity : 1;\n    }\n}\n@keyframes spin {\n    0% {\n        transform: rotate(0deg);\n    }\n    100% {\n        transform: rotate(360deg);\n    }\n}\n@-webkit-keyframes spin {\n    0% {\n        -webkit-transform: rotate(0deg);\n    }\n    100% {\n        -webkit-transform: rotate(360deg);\n    }\n}\n",this.sheet=l,this.domElement=e,this.domElement.classList.add(a),this.loader=document.createElement("div"),this.loader.classList.add("loader"),this.loader=this.domElement.appendChild(this.loader),this.error=document.createElement("div"),this.error.classList.add("error-msg"),this.error=this.domElement.appendChild(this.error),this.exportTimer=void 0,this.resizeTimer=void 0,this.notifyTimer=void 0,this.innerBehaviors=function(e){if(e){var t={grabber:e.grabber||rm.grabber,rendererList:e.rendererList||rm.rendererList,strokerList:e.strokerList||rm.strokerList,recognizerList:e.recognizerList||rm.recognizerList,events:e.events||rm.events,getBehaviorFromConfiguration:e.getBehaviorFromConfiguration||rm.getBehaviorFromConfiguration};return c.debug("Override default behaviors",t),t}return rm}(i),this.configuration=t,this.localTheme="",this.theme=r,this._setThemeFontFamily(),this.penStyle=n,this.penStyleClasses="",this.isErasing=!1,this.domElement.editor=this}return i=[{key:"enableEraser",value:function(){this.isErasing=!0,this.domElement.classList.add("erasing")}},{key:"disableEraser",value:function(){document.body.style.cursor="initial",this.isErasing=!1,this.domElement.classList.remove("erasing")}},{key:"pointerDown",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pen",n=arguments.length>2?arguments[2]:void 0;c.trace("Pointer down",e),window.clearTimeout(this.notifyTimer),window.clearTimeout(this.exportTimer),this.model=ea(this.model,e,Object.assign({pointerType:t,pointerId:n},this.theme.ink,this.localPenStyle)),this.renderer.drawCurrentStroke(this.rendererContext,this.model,this.stroker)}},{key:"pointerMove",value:function(e){c.trace("Pointer move",e),this.model=es(this.model,e),this.renderer.drawCurrentStroke(this.rendererContext,this.model,this.stroker)}},{key:"pointerUp",value:function(e){c.trace("Pointer up",e),this.model=ec(this.model,e,this.penStyle),this.renderer.drawModel(this.rendererContext,this.model,this.stroker),this.recognizer.addStrokes?function(e,t){return nt.apply(this,arguments)}(this,this.model):nw(this,this.model)}},{key:"removeStroke",value:function(e){this.model.strokeGroups.forEach(function(t){var n=t.strokes.map(function(e){return JSON.stringify(e)}).indexOf(JSON.stringify(e));-1!==n&&t.strokes.splice(n,1)});var t=this.model.rawStrokes.map(function(e){return JSON.stringify(e)}).indexOf(JSON.stringify(e));-1!==t&&this.model.rawStrokes.splice(t,1),this.renderer.drawModel(this.rendererContext,this.model,this.stroker),nw(this,this.model),"DEMAND"!==this.configuration.triggers.exportContent&&nr(this,this.model)}},{key:"reDraw",value:function(e,t){var n=this;e.forEach(function(e){er(n.model,e)}),t.forEach(function(e){e.strokes.forEach(function(t){ei(n.model,t,e.penStyle)})}),this.renderer.drawModel(this.rendererContext,this.model,this.stroker),nw(this,this.model)}},{key:"waitForIdle",value:function(){return nb(this,void 0,r.EventType.IDLE),function(e,t){return nu.apply(this,arguments)}(this,this.model)}},{key:"undo",value:(t=ta(ti.mark(function e(){var t,n,i,o=this;return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.debug("Undo current model",this.model),nb(this,void 0,r.EventType.UNDO),e.next=4,this.undoRedoManager.undo(this.undoRedoContext,this.model).catch(function(e){return nE(o,e)});case 4:return n=(t=e.sent).res,i=t.types,nx.apply(void 0,[this,n].concat(I(i))),e.abrupt("return",n);case 9:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"redo",value:(e=ta(ti.mark(function e(){var t,n,i,o=this;return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.debug("Redo current model",this.model),nb(this,void 0,r.EventType.REDO),e.next=4,this.undoRedoManager.redo(this.undoRedoContext,this.model).catch(function(e){return nE(o,e)});case 4:return n=(t=e.sent).res,i=t.types,nx.apply(void 0,[this,n].concat(I(i))),e.abrupt("return",n);case 9:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"clear",value:(n=ta(ti.mark(function e(){var t,n,i,o=this;return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.canClear){e.next=10;break}return c.debug("Clear current model",this.model),nb(this,void 0,r.EventType.CLEAR),e.next=5,this.recognizer.clear(this.recognizerContext,this.model).catch(function(e){return nE(o,e)});case 5:return n=(t=e.sent).res,i=t.events,nw.apply(void 0,[this,n].concat(I(i))),e.abrupt("return",n);case 10:return e.abrupt("return",Promise.reject(Error("Cannot launch clear")));case 11:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"convert",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DIGITAL_EDIT";return this.canConvert?(nb(this,void 0,r.EventType.CONVERT),function(e,t,n){return ns.apply(this,arguments)}(this,this.model,e)):Promise.reject(Error("Cannot launch convert"))}},{key:"setGuides",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.configuration.recognitionParams.iink.text.guides.enable=e,function(e,t){return nc.apply(this,arguments)}(this,this.model)}},{key:"export_",value:function(e){return this.canExport?(nb(this,void 0,r.EventType.EXPORT),nr(this,this.model,e,r.Trigger.DEMAND)):Promise.reject(Error("Cannot launch export"))}},{key:"import_",value:function(e,t){return nb(this,void 0,r.EventType.IMPORT),function(e,t,n){return no.apply(this,arguments)}(this,this.model,e instanceof Blob?e:new Blob([e],{type:t}))}},{key:"getSupportedImportMimeTypes",value:function(){return function(e,t){return na.apply(this,arguments)}(this,this.model)}},{key:"pointerEvents",value:function(e){return function(e,t,n){return nn.apply(this,arguments)}(this,this.model,e)}},{key:"resize",value:function(){return c.debug("Resizing editor"),this.renderer.resize(this.rendererContext,this.model,this.stroker,this.configuration.renderingParams.minHeight,this.configuration.renderingParams.minWidth),function(e,t){return nl.apply(this,arguments)}(this,this.model)}},{key:"unload",value:function(){this.grabber&&this.grabber.detach(this.domElement,this.grabberContext),this.innerRenderer&&this.innerRenderer.detach(this.domElement,this.rendererContext)}},{key:"close",value:function(){return this.configuration.recognitionParams.protocol===r.Protocol.WEBSOCKET?function(e,t){return nd.apply(this,arguments)}(this,this.model):null}},{key:"_setThemeFontFamily",value:function(){var e=!Object.keys(r.Languages).includes(this.configuration.recognitionParams.iink.lang);this.theme[".text"]["font-family"]=e?r.Languages.default:r.Languages[this.configuration.recognitionParams.iink.lang]}},{key:"forceChange",value:function(){nb(this,void 0,r.EventType.CHANGED)}},{key:"configuration",set:function(e){var t,n,i,o,a,s,l,u,d,p,h,v,y,b,x,E,w,k;this.loader.style.display="initial",this.error.style.display="none",this.innerConfiguration=(t=e&&e.replace,e&&delete e.replace,e&&e.recognitionParams.server&&e.recognitionParams.server.useWindowLocation&&(e.recognitionParams.server.scheme=window.location.protocol.slice(0,-1),e.recognitionParams.server.host=window.location.host),n=g({},m,void 0===e?{}:e),t&&(n=function e(){for(var t=function(e){return e&&"object"===f(e)},n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return r.reduce(function(n,r){return Object.keys(r).forEach(function(i){var o=n[i],a=r[i];Array.isArray(o)&&Array.isArray(a)?n[i]=a:t(o)&&t(a)?n[i]=e(o,a):n[i]=a}),n},{})}(n,e)),c.debug("Override default configuration",n),n),this.behavior=this.behaviors.getBehaviorFromConfiguration(this.behaviors,this.innerConfiguration),this.smartGuide?t0(this.smartGuide):this.smartGuide=(new tQ((i=b="-"+Math.random().toString(10).substring(2,12),(o=document.createElement("div")).id="smartguide"+i,o.classList.add("smartguide"),(a=document.createElement("div")).id="prompter-text"+i,a.classList.add("prompter-text"),a.setAttribute("touch-action","none"),(s=document.createElement("div")).id="prompter-text-container"+i,s.classList.add("prompter-text-container"),s.appendChild(a),(l=document.createElement("div")).id="ellipsis"+i,l.classList.add("ellipsis"),l.innerHTML="...",(u=document.createElement("div")).id="tag-icon"+i,u.classList.add("tag-icon"),u.innerHTML="&#182;",(d=document.createElement("div")).id="candidates"+i,d.classList.add("candidates"),(p=document.createElement("div")).id="more-menu"+i,p.classList.add("more-menu"),(h=document.createElement("button")).classList.add("options-label-button"),h.id="convert"+i,h.innerHTML="Convert",(v=document.createElement("button")).classList.add("options-label-button"),v.id="copy"+i,v.innerHTML="Copy",(y=document.createElement("button")).classList.add("options-label-button"),y.id="delete"+i,y.innerHTML="Delete",x={smartGuideElement:o,textElement:a,textContainer:s,candidatesElement:d,menuElement:p,tagElement:u,ellipsisElement:l,convertElement:h,copyElement:v,deleteElement:y}).copyElement),E={editor:this,wordToChange:"",lastWord:"",previousLabelExport:" ",perfectScrollbar:new tW(x.textContainer,{suppressScrollY:!0,scrollXMarginOffset:1}),elements:x,smartGuideTimeOutId:0,randomString:b},w=this,(k=E.elements).textElement.addEventListener("click",function(e){return function(e,t,n){var i=n.elements;if(e.target.id!=="prompter-text".concat(n.randomString)){var o=e.target.id.replace("word-","").replace(n.randomString,""),a=JSON.parse(t.exports[r.Exports.JIIX]).words;if(n.wordToChange=a[o],n.wordToChange.id=o,i.candidatesElement.innerHTML="",n.wordToChange&&n.wordToChange.candidates){i.candidatesElement.style.display="flex",n.wordToChange.candidates.forEach(function(e,t){n.wordToChange.label===e?i.candidatesElement.innerHTML+='<span id="cdt-'.concat(t).concat(n.randomString,'" class="selected-word">').concat(e,"</span>"):i.candidatesElement.innerHTML+='<span id="cdt-'.concat(t).concat(n.randomString,'">').concat(e,"</span>")});var s=e.target.getBoundingClientRect().left-60;i.candidatesElement.style.top="".concat(48,"px"),i.candidatesElement.style.left="".concat(s,"px"),e.target.parentNode.parentNode.parentNode.insertBefore(i.candidatesElement,e.target.parentNode.parentNode)}}}(e,w,E)}),k.candidatesElement.addEventListener("click",function(e){return function(e,t,n){var i=n.elements,o=e.target.innerText;if(o!==n.wordToChange.label&&n.wordToChange.candidates.includes(o)){var a=JSON.parse(t.exports[r.Exports.JIIX]);a.words[n.wordToChange.id].label=o,t.import_(JSON.stringify(a),r.Exports.JIIX)}i.candidatesElement.style.display="none"}(e,w,E)}),k.ellipsisElement.addEventListener("click",function(e){var t,n;return t=function(){var t=e.target.offsetLeft-68;k.menuElement.style.left="".concat(t,"px")},n=document.contains(k.menuElement),void(t$(k.menuElement)||n?"none"===k.menuElement.style.display&&(t(),k.menuElement.style.display="flex"):(k.menuElement.style.display="flex",t(),k.menuElement.appendChild(k.convertElement),k.menuElement.appendChild(k.copyElement),k.menuElement.appendChild(k.deleteElement),e.target.parentNode.insertBefore(k.menuElement,e.target)))}),k.copyElement.addEventListener("click",function(){k.menuElement.style.display="none"}),k.convertElement.addEventListener("click",function(){k.menuElement.style.display="none",w.convert()}),k.deleteElement.addEventListener("click",function(){k.menuElement.style.display="none",w.clear()}),this.configuration.recognitionParams.iink.text.smartGuideFadeOut.enable&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=arguments.length>1?arguments[1]:void 0,n=t.elements;new MutationObserver(function(r){r.forEach(function(){t.smartGuideTimeOutId&&clearTimeout(t.smartGuideTimeOutId),"none"===n.candidatesElement.style.display&&"none"===n.menuElement.style.display?t.smartGuideTimeOutId=setTimeout(function(){n.smartGuideElement.classList.add("smartguide-out"),n.smartGuideElement.classList.remove("smartguide-in")},e):document.contains(n.candidatesElement)||document.contains(n.menuElement)||(t.smartGuideTimeOutId=setTimeout(function(){n.smartGuideElement.classList.add("smartguide-out"),n.smartGuideElement.classList.remove("smartguide-in")},e))})}).observe(n.smartGuideElement,{childList:!0,subtree:!0,attributes:!0})}(this.configuration.recognitionParams.iink.text.smartGuideFadeOut.duration,E),E)},get:function(){return this.innerConfiguration}},{key:"penStyle",set:function(e){var t;this.innerPenStyle=(t=g({},void 0,void 0===e?{}:e),c.debug("Override default pen style",t),t),this.localPenStyle=this.innerPenStyle,np(this,this.model)},get:function(){return this.innerPenStyle}},{key:"penStyleClasses",set:function(e){this.innerPenStyleClasses=e,this.localPenStyle=this.theme[".".concat(this.innerPenStyleClasses)],nf(this,this.model)},get:function(){return this.innerPenStyleClasses}},{key:"theme",set:function(e){var t;this.innerTheme=(t=g({},E,void 0===e?{}:e),c.debug("Override default theme",t),t),nm(this,this.model)},get:function(){return this.innerTheme}},{key:"behaviors",get:function(){return this.innerBehaviors}},{key:"behavior",set:function(e){e&&(this.grabber&&this.grabber.detach(this.domElement,this.grabberContext),this.innerBehavior=e,this.renderer=this.innerBehavior.renderer,this.recognizer=this.innerBehavior.recognizer,this.grabberContext=this.grabber.attach(this.domElement,this))},get:function(){return this.innerBehavior}},{key:"recognizer",set:function(e){var t=this;this.undoRedoContext={stack:[],currentPosition:-1,maxSize:this.configuration.undoRedoMaxStackSize,canUndo:!1,canRedo:!1},this.undoRedoManager=t4;var n=function(n,r){t.innerRecognizer=e,t.innerRecognizer&&(t.recognizerContext=tp(t),t.innerRecognizer.undo&&t.innerRecognizer.redo&&t.innerRecognizer.clear&&(t.undoRedoContext=t.recognizerContext,t.undoRedoManager=t.innerRecognizer),t.innerRecognizer.init(t.recognizerContext,n).then(function(e){c.info("Recognizer initialized !"),r&&(nm(t,t.model),np(t,t.model),nf(t,t.model)),t.loader.style.display="none"}).catch(function(e){nE(t,e)}))};e&&(this.innerRecognizer?this.innerRecognizer.close(this.recognizerContext,this.model).then(function(e){c.info("Recognizer closed"),t._setThemeFontFamily(),n(et(e),!0),nw(t,e)}).catch(function(e){return nE(t,e)}):(this.model=ee(this.configuration),n(this.model,!1)))},get:function(){return this.innerRecognizer}},{key:"renderer",set:function(e){e&&(this.innerRenderer&&this.innerRenderer.detach(this.domElement,this.rendererContext),this.innerRenderer=e,this.innerRenderer&&(this.rendererContext=this.innerRenderer.attach(this.domElement,this.configuration.renderingParams.minHeight,this.configuration.renderingParams.minWidth)))},get:function(){return this.innerRenderer}},{key:"grabber",get:function(){return this.behavior?this.behavior.grabber:void 0}},{key:"stroker",get:function(){return this.behavior?this.behavior.stroker:void 0}},{key:"emit",get:function(){return this.behavior?this.behavior.events:void 0}},{key:"png",get:function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(e.rawStrokes.length>0){var r=el(e),i=t5(r,n),o=t5(r,n),a={renderingCanvas:o,renderingCanvasContext:o.getContext("2d"),capturingCanvas:i,capturingCanvasContext:i.getContext("2d")};return a.renderingCanvasContext.translate(-r.minX+n,-r.minY+n),eb(a,e,t),a.renderingCanvas.toDataURL("image/png")}return null}(this.model,this.stroker)}},{key:"initialized",get:function(){return!!this.recognizerContext&&this.recognizerContext.initialized}},{key:"idle",get:function(){return this.recognizerContext.idle}},{key:"canUndo",get:function(){return this.undoRedoContext.canUndo}},{key:"canRedo",get:function(){return this.undoRedoContext.canRedo}},{key:"isEmpty",get:function(){return this.recognizerContext.isEmpty}},{key:"canClear",get:function(){return!this.isEmpty}},{key:"canConvert",get:function(){return!!(this.canUndo&&this.canClear&&this.recognizer&&this.recognizer.convert)}},{key:"possibleUndoCount",get:function(){return this.recognizerContext.possibleUndoCount}},{key:"undoStackIndex",get:function(){return this.recognizerContext.undoStackIndex}},{key:"canExport",get:function(){return this.canUndo&&this.canClear&&this.recognizer&&this.recognizer.getInfo().availableTriggers.exportContent.includes(r.Trigger.DEMAND)}},{key:"exports",get:function(){return this.model?this.model.exports:void 0}},{key:"supportedImportMimeTypes",get:function(){return this.recognizerContext.supportedImportMimeTypes}},{key:"eastereggs",get:function(){return t6}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(o.prototype,i),o}();function nb(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];i.forEach(function(n){switch(n){case r.EventType.RENDERED:break;case r.EventType.UNDO:case r.EventType.REDO:case r.EventType.CLEAR:case r.EventType.CONVERT:case r.EventType.EXPORT:e.emit.call(e.domElement,n);break;case r.EventType.LOADED:case r.EventType.CHANGED:e.emit.call(e.domElement,n,{initialized:e.initialized,canUndo:e.canUndo,canRedo:e.canRedo,canClear:e.canClear,isEmpty:e.isEmpty,possibleUndoCount:e.possibleUndoCount,undoStackIndex:e.undoStackIndex,canConvert:e.canConvert,canExport:e.canExport});break;case r.EventType.EXPORTED:window.clearTimeout(e.notifyTimer),e.notifyTimer=window.setTimeout(function(){e.emit.call(e.domElement,n,{exports:e.exports})},e.configuration.processDelay);break;case r.EventType.SUPPORTED_IMPORT_MIMETYPES:e.emit.call(e.domElement,n,{mimeTypes:e.supportedImportMimeTypes});break;case r.EventType.ERROR:e.emit.call(e.domElement,n,t);break;case r.EventType.IDLE:e.emit.call(e.domElement,n,{idle:e.idle});break;default:p.debug("No valid trigger configured for ".concat(n))}})}function nx(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];p.debug("model changed callback on ".concat(i," event(s)"),t),t.creationTime===e.model.creationTime&&(t.rawStrokes.length===e.model.rawStrokes.length&&t.lastPositions.lastSentPosition>=e.model.lastPositions.lastReceivedPosition?(e.model=em(e.model,t),(en(e.model)||i.includes(r.EventType.RENDERED))&&e.renderer.drawModel(e.rendererContext,e.model,e.stroker)):(e.model=t,e.renderer.drawModel(e.rendererContext,e.model,e.stroker)),nb.apply(void 0,[e,void 0].concat(i))),"TEXT"===e.configuration.recognitionParams.type&&"REST"!==e.configuration.recognitionParams.protocol&&e.configuration.recognitionParams.iink.text.mimeTypes.includes(r.Exports.JIIX)&&e.configuration.recognitionParams.iink.text.smartGuide&&(e.smartGuide=function(e,t){var n,i,o,a,s,c,l,u,d=e.elements,p=document.contains(d.smartGuideElement);t$(d.smartGuideElement)||p||(n=e.elements,i=3.779527559*e.editor.configuration.recognitionParams.iink.text.margin.top,a=o=3.779527559*e.editor.configuration.recognitionParams.iink.text.margin.left,s=i-45.354330708,n.smartGuideElement.style.top="".concat(s,"px"),n.smartGuideElement.style.left="".concat(a,"px"),n.smartGuideElement.style.visibility="hidden",e.editor.domElement.insertBefore(n.smartGuideElement,e.editor.loader),n.smartGuideElement.appendChild(n.tagElement),c=e.editor.domElement.clientWidth-o-n.tagElement.offsetWidth-35-o,l=o=n.tagElement.offsetWidth,n.textContainer.style.left="".concat(l,"px"),n.textContainer.style.width="".concat(c,"px"),n.textContainer.style.maxWidth="".concat(c,"px"),n.smartGuideElement.appendChild(n.textContainer),u=o+=c,n.ellipsisElement.style.left="".concat(u,"px"),n.smartGuideElement.appendChild(n.ellipsisElement),n.menuElement.style.display="none",n.menuElement.appendChild(n.convertElement),n.menuElement.appendChild(n.copyElement),n.menuElement.appendChild(n.deleteElement),n.smartGuideElement.appendChild(n.menuElement),n.candidatesElement.style.display="none",n.smartGuideElement.appendChild(n.candidatesElement),n.smartGuideElement.style.height="48px",n.smartGuideElement.style.width="".concat(n.tagElement.offsetWidth+n.textContainer.offsetWidth+n.ellipsisElement.offsetWidth,"px"),e.perfectScrollbar.update());var h=function(t,n,r){var i=document.createElement("span");return i.id="word-".concat(n).concat(e.randomString),t?i.innerHTML="&nbsp;":i.textContent=r.label,i};if(t&&JSON.parse(t[r.Exports.JIIX]).words.length>0){if(d.smartGuideElement.classList.add("smartguide-in"),d.smartGuideElement.classList.remove("smartguide-out"),d.candidatesElement.style.display="none",d.menuElement.style.display="none",e.previousLabelExport&&e.previousLabelExport!==JSON.parse(t[r.Exports.JIIX]).label){var f=JSON.parse(t[r.Exports.JIIX]).words;(function(t){d.textElement.innerHTML="";var n=document.createDocumentFragment();t.forEach(function(r,i){if(" "===r.label||r.label.includes("\n"))n.appendChild(h(!0,i));else if(i!==t.length-1)n.appendChild(h(!1,i,r));else{d.textElement.appendChild(n),e.perfectScrollbar.update(),""===e.lastWord&&(e.lastWord=r);var o=h(!1,i,r);e.lastWord.candidates!==r.candidates&&e.lastWord.label!==r.label?(o.classList.add("added-word"),d.textElement.appendChild(o),d.textContainer.scrollLeft=o.offsetLeft,e.lastWord=r):(d.textElement.appendChild(o),d.textContainer.scrollLeft=o.offsetLeft)}})})(f),function(n){if(e.tempWords&&e.tempWords.length===n.length){var i=n.map(function(e){return e.label}),o=e.tempWords.map(function(e){return e.label}),a=i.indexOf(i.filter(function(e){return -1===o.indexOf(e)})[0]);document.getElementById("word-".concat(a).concat(e.randomString))&&a>-1&&(document.getElementById("word-".concat(a).concat(e.randomString)).classList.add("modified-word"),d.textContainer.scrollLeft=document.getElementById("word-".concat(a).concat(e.randomString)).offsetLeft-10)}e.tempWords=JSON.parse(t[r.Exports.JIIX]).words}(f)}e.previousLabelExport=JSON.parse(t[r.Exports.JIIX]).label,d.copyElement.setAttribute("data-clipboard-text",JSON.parse(t[r.Exports.JIIX]).label)}else d.smartGuideElement.classList.add("smartguide-out"),d.smartGuideElement.classList.remove("smartguide-in");return e}(e.smartGuide,t.exports)),eo(t).length>0&&!e.recognizer.addStrokes&&e.configuration.triggers.exportContent!==r.Trigger.DEMAND&&nr(e,t)}function nE(e,t){"close"!==t.type&&p.error("Error while firing the recognition",t);var n=t.code,i=t.message;switch("message"===t.type&&(t.data.code&&(n=t.data.code),t.data.message&&(i=t.data.message)),e.recognizerContext.error=t,n){case"no.activity":i=r.Error.NO_ACTIVITY;break;case"api.invalid.format":i=t.message;break;case"access.not.granted":i=r.Error.WRONG_CREDENTIALS;break;case"session.too.old":i=r.Error.TOO_OLD;break;case 1e3:case 1006:"none"===e.error.style.display&&(i=r.Error.NOT_REACHABLE);break;default:i||(i=r.Error.CANT_ESTABLISH)}if(e.error.innerText=i,(e.error.innerText===r.Error.TOO_OLD||"CLOSE_RECOGNIZER"===t.reason)&&tm(e.recognizerContext))p.info("Reconnection is available",t),e.error.style.display="none";else{e.loader.style.display="none",e.error.style.display="initial";for(var o=arguments.length,a=Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];nb.apply(void 0,[e,t,r.EventType.ERROR].concat(a))}}function nw(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];e.undoRedoManager.updateModel?e.undoRedoManager.updateModel(e.undoRedoContext,t).then(function(t){var n=t.res,i=t.types;nx.apply(void 0,[e,n].concat(I([].concat(r,I(i)).filter(function(e,t,n){return t===n.indexOf(e)}))))}):("initial"===e.error.style.display&&(e.error.style.display="none"),nx.apply(void 0,[e,t].concat(r)))}function nk(e,t){var n=et(t);p.debug("Updated model",n);var i=tf(e,n.lastPositions);return delete i.instanceId,p.debug("Updated recognizer context",i),Promise.resolve({err:void 0,res:n,events:[r.EventType.CHANGED,r.EventType.EXPORTED,r.EventType.RENDERED]})}var nS={types:[r.RecognitionType.TEXT,r.RecognitionType.DIAGRAM,r.RecognitionType.MATH,r.RecognitionType.RAWCONTENT],protocol:r.Protocol.REST,availableTriggers:{exportContent:[r.Trigger.QUIET_PERIOD,r.Trigger.DEMAND]}};function nT(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5?arguments[5]:void 0,a=t.editor.configuration;return(function(e,t,n,r){return td.apply(this,arguments)})(t,"".concat(a.recognitionParams.server.scheme,"://").concat(a.recognitionParams.server.host).concat(e),r(t,n,i),o).then(function(e){p.debug("iinkRestRecognizer success",e);var n=t.lastPositions;n.lastReceivedPosition=n.lastSentPosition;var r=tf(t,n);return e.instanceId&&(r.instanceId=e.instanceId),e})}function nC(e,t,n){var r,i,o=e.editor.configuration;"TEXT"===o.recognitionParams.type?i={text:o.recognitionParams.iink.text,lang:o.recognitionParams.iink.lang,export:o.recognitionParams.iink.export}:"MATH"===o.recognitionParams.type?i={math:o.recognitionParams.iink.math,lang:o.recognitionParams.iink.lang,export:o.recognitionParams.iink.export}:"DIAGRAM"===o.recognitionParams.type?i={diagram:o.recognitionParams.iink.diagram,lang:o.recognitionParams.iink.lang,export:o.recognitionParams.iink.export}:"Raw Content"===o.recognitionParams.type&&(i={"raw-content":{recognition:o.recognitionParams.iink["raw-content"].recognition},lang:o.recognitionParams.iink.lang,export:o.recognitionParams.iink.export});var a=[];t.strokeGroups.forEach(function(e){var t={penStyle:"{}"===JSON.stringify(e.penStyle)?null:x(e.penStyle),strokes:e.strokes.map(function(e){return{x:e.x,y:e.y,t:e.t,pointerType:e.pointerType}})};a.push(t)});var s={configuration:i,xDPI:96,yDPI:96,contentType:"Raw Content"===o.recognitionParams.type?"Raw Content":o.recognitionParams.type.charAt(0).toUpperCase()+o.recognitionParams.type.slice(1).toLowerCase(),theme:(r=e.editor.theme,w.toCSS(r)),strokeGroups:a};return e.editor.domElement&&(s.height=e.editor.domElement.clientHeight,s.width=e.editor.domElement.clientWidth),n&&(s.conversionState="DIGITAL_EDIT"),eu(t),s}function nP(e,t,n){var r={};return r[t]=n,r}function n_(e,t,n,i,o){p.debug("iinkRestRecognizer result callback",t);var a=ed(t);a.rawResults.exports=i,a.exports?Object.assign(a.exports,nP(0,o,i)):a.exports=nP(0,o,i),p.debug("iinkRestRecognizer model updated",a),e.editor.undoRedoManager&&nw(e.editor,a,r.EventType.EXPORTED,r.EventType.IDLE)}function nL(e,t,n){var r=e.editor.configuration;return nT("/api/v4.0/iink/batch",e,t,nC,r.restConversionState,n).then(function(r){return n_(e,t,0,r,n),t}).catch(function(t){return nE(e.editor,t),t})}function nR(e,t,n){var r=e.editor.configuration;return n?Promise.all(n.map(function(n){return nL(e,t,n)})):"TEXT"===r.recognitionParams.type?Promise.all(r.recognitionParams.iink.text.mimeTypes.map(function(n){return nL(e,t,n)})):"DIAGRAM"===r.recognitionParams.type?Promise.all(r.recognitionParams.iink.diagram.mimeTypes.map(function(n){return nL(e,t,n)})):"MATH"===r.recognitionParams.type?Promise.all(r.recognitionParams.iink.math.mimeTypes.map(function(n){return nL(e,t,n)})):"Raw Content"===r.recognitionParams.type?Promise.all(r.recognitionParams.iink["raw-content"].mimeTypes.map(function(n){return nL(e,t,n)})):Promise.reject(Error("Export failed"))}var nA=Object.freeze({__proto__:null,iinkRestConfiguration:nS,getInfo:function(){return nS},postMessage:nT,export_:nR,convert:function(e,t){var n=e.editor.configuration;nT("/api/v4.0/iink/batch",e,t,nC,"DIGITAL_EDIT").then(function(e){return n_(t,n)}).catch(function(t){return nE(e.editor,t)})},resize:function(e,t){t.strokeGroups.length&&nR(e,t)},init:function(e,t){var n=ep(t);p.debug("Updated model",n);var i=tf(e,n.lastPositions);return i.initPromise=Promise.resolve(n),i.initPromise.then(function(e){return i.initialized=!0,p.debug("Updated recognizer context",i),nw(i.editor,e,r.EventType.LOADED),e})},close:function(e,t){return e.initialized=!1,delete e.instanceId,Promise.resolve(t)},clear:nk,reset:function(e,t){var n=ep(t);p.debug("Updated model",n);var r=tf(e,n.lastPositions);return delete r.instanceId,p.debug("Updated recognizer context",r),Promise.resolve({res:n})}}),nM=function(e){if(Array.isArray(e))return e},nI=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}},nz=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},nO=function(e,t){return nM(e)||nI(e,t)||A(e,t)||nz()};function nN(){}function nD(e,t){return Math.floor(Math.random()*(t-e+1))+e}function nj(e,t){e.idle=!1;var n=e.websocket;if(1!==n.readyState)throw ty;n.send(JSON.stringify(t)),p.debug("".concat(t.type," message sent"),t)}function nH(e){return function(t){p.trace("".concat(t.type," websocket callback"),t);var n,r=e.recognitionContexts[e.recognitionContexts.length-1];switch(p.debug("Current recognition context",r),t.type){case"open":e.sessionId?nj(e,nV(e.editor.configuration,e.editor.domElement,e.sessionId)):nj(e,nK(e.editor.configuration,e.editor.domElement));break;case"message":switch(p.debug("Receiving ".concat(t.data.type," message"),t),t.data.type){case"ack":t.data.hmacChallenge&&nj(e,(n=e.editor.configuration,{type:"hmac",hmac:tu(t.data.hmacChallenge,n.recognitionParams.server.applicationKey,n.recognitionParams.server.hmacKey)})),t.data.iinkSessionId&&(e.sessionId=t.data.iinkSessionId);break;case"newPart":break;case"contentPackageDescription":e.currentReconnectionCount=0,e.contentPartCount=t.data.contentPartCount,nj(e,nQ(e.editor.configuration)),e.currentPartId?nj(e,nZ(e.editor.configuration,e.currentPartId)):nj(e,nq(e.editor.configuration));break;case"partChanged":t.data.partId&&(e.currentPartId=t.data.partId),e.initialized=!0,r.partChange?r.partChange.resolve([void 0,t.data]):r.error(t);break;case"contentChanged":void 0!==t.data.canUndo&&(e.canUndo=t.data.canUndo),void 0!==t.data.canRedo&&(e.canRedo=t.data.canRedo),void 0!==t.data.empty&&(e.isEmpty=t.data.empty),void 0!==t.data.possibleUndoCount&&(e.possibleUndoCount=t.data.possibleUndoCount),void 0!==t.data.undoStackIndex&&(e.undoStackIndex=t.data.undoStackIndex),r.contentChange.resolve([void 0,t.data]);break;case"exported":case"fileChunkAck":r.response(void 0,t.data);break;case"svgPatch":r.patch(void 0,t.data);break;case"supportedImportMimeTypes":e.supportedImportMimeTypes=t.data.mimeTypes,r.response(void 0,t.data);break;case"idle":e.idle=!0,r.patch(void 0,t.data);break;case"error":if(p.debug("Error detected stopping all recognition",t),r){var i=function(){};r.patch?i=r.patch:r.response&&(i=r.response),i(t.data),r.initPromise&&r.initPromise.promise.isPending&&r.initPromise.reject(t)}break;default:p.warn("This is something unexpected in current recognizer. Not the type of message we should have here.",t)}break;case"error":if(p.debug("Error detected stopping all recognition",t),r){var o=function(){};r.patch?o=r.patch:r.response&&(o=r.response),o(Object.assign({},t,{recoverable:!1})),r.initPromise&&r.initPromise.promise.isPending&&r.initPromise.reject(t)}break;case"close":p.debug("Close detected stopping all recognition",t),e&&(e.initialized=!1,r.initPromise&&r.initPromise.promise.isPending&&("CLOSE_RECOGNIZER"===t.reason?r.initPromise.resolve(t):(r.error(t),r.initPromise.reject(t))));break;default:p.warn("This is something unexpected in current recognizer. Not the type of message we should have here.",t)}}}function nU(e,t,n,r){var i,o,a,s,c=t.recognitionContexts[0],l=tf(t,c.model.lastPositions);return l.url=(o=(i=t.editor.configuration).recognitionParams.server.host,a=i.recognitionParams.server.applicationKey,s="https"===i.recognitionParams.server.scheme?"wss":"ws","".concat(s,"://").concat(o).concat(e,"?applicationKey=").concat(a)),l.reconnect=r,l.initPromise=c.initPromise.promise,p.debug("Opening the websocket for context ",t),l.websocketCallback=n(l),l.websocket=function(e){var t,n,r;try{n=t=new WebSocket(e.url),r=e.editor.configuration.recognitionParams.server.websocket,n.start=new Date,n.autoReconnect=r.autoReconnect,n.maxRetryCount=r.maxRetryCount,n.pingEnabled=r.pingEnabled,n.pingDelay=r.pingDelay,n.maxPingLost=r.maxPingLostCount,n.pingLostCount=0,n.recognizerContext=e,t.pingEnabled&&function e(t){t.pingLostCount++,t.pingLostCount>t.maxPingLost?t.close(1e3,"PING_LOST"):t.readyState<=1&&setTimeout(function(){t.readyState<=1&&(t.send(JSON.stringify({type:"ping"})),e(t))},t.pingDelay)}(t),t.onopen=function(t){p.trace("onOpen"),e.websocketCallback(t)},t.onclose=function(n){p.trace("onClose",new Date-t.start),e.websocketCallback(n)},t.onerror=function(t){p.trace("onError"),e.websocketCallback(t)},t.onmessage=function(n){if(p.trace("onMessage"),t.pingLostCount=0,"pong"!==JSON.parse(n.data).type){var r={type:n.type,data:JSON.parse(n.data)};e.websocketCallback(r)}}}catch(t){e.recognitionContexts[0].initPromise.reject(t),p.error("Unable to open websocket, Check the host and your connectivity")}return t}(l),l.initPromise}function nX(e,t,n,r){return nW.apply(this,arguments)}function nW(){return(nW=ta(ti.mark(function e(t,n,r,i){var o,a,s,c=arguments;return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a=Array((o=c.length)>4?o-4:0),s=4;s<o;s++)a[s-4]=c[s];if(!tv(n)||!n.reconnect){e.next=11;break}return p.info("Attempting a retry",n.currentReconnectionCount),e.next=5,n.reconnect(n,r).catch(function(e){p.error("Failed retry",e),nX.apply(void 0,[t,n,r,i].concat(a))});case 5:return rf(n,r,n.editor.theme),rp(n,r,n.editor.penStyle),rh(n,r,n.editor.penStyleClasses),e.abrupt("return",t.apply(void 0,[n,r,i].concat(a)));case 11:ro(r,"Unable to reconnect",null,n);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nB(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.initPromise.then(function(){p.trace("Init was done. Sending message");var n=t.apply(void 0,r);if(n){nj(e,n);var i=e.recognitionContexts[0].model.lastPositions;i&&tf(e,i)}else p.warn("empty message")})}function nY(e,t){return nF.apply(this,arguments)}function nF(){return(nF=ta(ti.mark(function e(t,n){var r,i,o;return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t9(),i=t,o={model:n,initPromise:r,error:function(e,t){return ro(n,e,t,i)}},e.prev=3,e.next=6,t.initPromise;case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:return i.recognitionContexts[0]=o,function(e,t,n){var r=e.websocket;r&&r.readyState<2&&r.close(1e3,n)}(t,0,"CLOSE_RECOGNIZER"),e.abrupt("return",o.model);case 13:case"end":return e.stop()}},e,null,[[3,8]])}))).apply(this,arguments)}nN.maxFromBits=function(e){return Math.pow(2,e)},nN.limitUI04=nN.maxFromBits(4),nN.limitUI06=nN.maxFromBits(6),nN.limitUI08=nN.maxFromBits(8),nN.limitUI12=nN.maxFromBits(12),nN.limitUI14=nN.maxFromBits(14),nN.limitUI16=nN.maxFromBits(16),nN.limitUI32=nN.maxFromBits(32),nN.limitUI40=nN.maxFromBits(40),nN.limitUI48=nN.maxFromBits(48),nN.randomUI04=function(){return nD(0,nN.limitUI04-1)},nN.randomUI06=function(){return nD(0,nN.limitUI06-1)},nN.randomUI08=function(){return nD(0,nN.limitUI08-1)},nN.randomUI12=function(){return nD(0,nN.limitUI12-1)},nN.randomUI14=function(){return nD(0,nN.limitUI14-1)},nN.randomUI16=function(){return nD(0,nN.limitUI16-1)},nN.randomUI32=function(){return nD(0,nN.limitUI32-1)},nN.randomUI40=function(){return(0|1073741824*Math.random())+(0|1024*Math.random())*1073741824},nN.randomUI48=function(){return(0|1073741824*Math.random())+(0|262144*Math.random())*1073741824},nN.paddedString=function(e,t,n){n=n||"0";for(var r=t-(e=String(e)).length;r>0;r>>>=1,n+=n)1&r&&(e=n+e);return e},nN.prototype.fromParts=function(e,t,n,r,i,o){return this.version=n>>12&15,this.hex=nN.paddedString(e.toString(16),8)+"-"+nN.paddedString(t.toString(16),4)+"-"+nN.paddedString(n.toString(16),4)+"-"+nN.paddedString(r.toString(16),2)+nN.paddedString(i.toString(16),2)+"-"+nN.paddedString(o.toString(16),12),this},nN.prototype.toString=function(){return this.hex},nN.prototype.toURN=function(){return"urn:uuid:"+this.hex},nN.prototype.toBytes=function(){for(var e=this.hex.split("-"),t=[],n=0,r=0;r<e.length;r++)for(var i=0;i<e[r].length;i+=2)t[n++]=parseInt(e[r].substr(i,2),16);return t},nN.prototype.equals=function(e){return e instanceof UUID&&this.hex===e.hex},nN.getTimeFieldValues=function(e){var t=e-Date.UTC(1582,9,15),n=t/4294967296*1e4&268435455;return{low:1e4*(268435455&t)%4294967296,mid:65535&n,hi:n>>>16,timestamp:t}},nN._create4=function(){return(new nN).fromParts(nN.randomUI32(),nN.randomUI16(),16384|nN.randomUI12(),128|nN.randomUI06(),nN.randomUI08(),nN.randomUI48())},nN._create1=function(){var e=(new Date).getTime(),t=nN.randomUI14(),n=1099511627776*(1|nN.randomUI08())+nN.randomUI40(),r=nN.randomUI04(),i=0;0!=e?(e<i&&t++,i=e,r=nN.randomUI04()):Math.random()<1/4&&r<9984?r+=1+nN.randomUI04():t++;var o=nN.getTimeFieldValues(i),a=o.low+r,s=4095&o.hi|4096,c=(t&=16383)>>>8|128,l=255&t;return(new nN).fromParts(a,o.mid,s,c,l,n)},nN.create=function(e){return this["_create"+(e=e||4)]()},nN.fromTime=function(e,t){t=t||!1;var n=nN.getTimeFieldValues(e),r=n.low,i=4095&n.hi|4096;return!1===t?(new nN).fromParts(r,n.mid,i,0,0,0):(new nN).fromParts(r,n.mid,i,128|nN.limitUI06,nN.limitUI08-1,nN.limitUI48-1)},nN.firstFromTime=function(e){return nN.fromTime(e,!1)},nN.lastFromTime=function(e){return nN.fromTime(e,!0)},nN.fromURN=function(e){var t;return(t=/^(?:urn:uuid:|\{)?([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{2})([0-9a-f]{2})-([0-9a-f]{12})(?:\})?$/i.exec(e))?(new nN).fromParts(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),parseInt(t[4],16),parseInt(t[5],16),parseInt(t[6],16)):null},nN.fromBytes=function(e){if(e.length<5)return null;for(var t="",n=0,r=[4,2,2,2,6],i=0;i<r.length;i++){for(var o=0;o<r[i];o++){var a=e[n++].toString(16);1==a.length&&(a="0"+a),t+=a}6!==r[i]&&(t+="-")}return nN.fromURN(t)},nN.fromBinary=function(e){for(var t=[],n=0;n<e.length;n++)if(t[n]=e.charCodeAt(n),t[n]>255||t[n]<0)throw Error("Unexpected byte in binary data.");return nN.fromBytes(t)},nN.new=function(){return this.create(4)},nN.newTS=function(){return this.create(1)};var nG=Object.freeze({__proto__:null,init:nU,retry:nX,sendMessage:nB,clear:function(e,t,n){var r=et(t),i=tf(e,r.lastPositions);if(i&&i.websocket){delete i.instanceId;try{nj(i,{type:"reset"})}catch(e){i.websocketCallback(t9(),i,t)}}n(void 0,r)},close:nY}),nJ={types:[r.RecognitionType.MATH,r.RecognitionType.TEXT,r.RecognitionType.DIAGRAM],protocol:r.Protocol.WEBSOCKET,availableTriggers:{exportContent:[r.Trigger.POINTER_UP,r.Trigger.DEMAND],addStrokes:[r.Trigger.POINTER_UP]}};function nK(e,t){return{type:"newContentPackage",applicationKey:e.recognitionParams.server.applicationKey,xDpi:96,yDpi:96,viewSizeHeight:t.clientHeight<e.renderingParams.minHeight?e.renderingParams.minHeight:t.clientHeight,viewSizeWidth:t.clientWidth<e.renderingParams.minWidth?e.renderingParams.minWidth:t.clientWidth}}function nV(e,t,n){return{type:"restoreIInkSession",iinkSessionId:n,applicationKey:e.recognitionParams.server.applicationKey,xDpi:96,yDpi:96,viewSizeHeight:t.clientHeight<e.renderingParams.minHeight?e.renderingParams.minHeight:t.clientHeight,viewSizeWidth:t.clientWidth<e.renderingParams.minWidth?e.renderingParams.minWidth:t.clientWidth}}function nq(e){return{type:"newContentPart",contentType:e.recognitionParams.type,mimeTypes:e.triggers.exportContent!==r.Trigger.DEMAND?e.recognitionParams.iink["".concat(e.recognitionParams.type.toLowerCase())].mimeTypes:void 0}}function nZ(e,t){return{type:"openContentPart",id:t,mimeTypes:e.triggers.exportContent!==r.Trigger.DEMAND?e.recognitionParams.iink["".concat(e.recognitionParams.type.toLowerCase())].mimeTypes:void 0}}function nQ(e){return Object.assign({type:"configuration"},e.recognitionParams.iink)}function n$(e,t){var n=eo(t,e.lastPositions.lastSentPosition+1);if(n.length>0)return eu(t),{type:"addStrokes",strokes:n.map(function(e){return Object.assign({},{id:e.id,pointerType:e.pointerType,pointerId:e.pointerId,x:e.x,y:e.y,t:e.t,p:e.p})})}}function n0(){return{type:"undo"}}function n1(){return{type:"redo"}}function n2(){return{type:"clear"}}function n3(e){return{type:"convert",conversionState:e}}function n4(e){return{type:"zoom",zoom:e}}function n5(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{type:"changeViewSize",height:e.clientHeight<t?t:e.clientHeight,width:e.clientWidth<n?n:e.clientWidth}}function n6(e,t,n){return{type:"export",partId:t,mimeTypes:n&&0!==Object.keys(n).length?n:e.recognitionParams.iink["".concat(e.recognitionParams.type.toLowerCase())].mimeTypes}}function n9(e,t){return{type:"importFile",importFileId:e,mimeType:t}}function n8(e,t,n){return{type:"fileChunk",importFileId:e,data:t,lastChunk:n}}function n7(e){return Object.assign({type:"pointerEvents"},e)}function re(){return{type:"waitForIdle"}}function rt(){return{type:"getSupportedImportMimeTypes"}}function rn(e){return{type:"setPenStyle",style:e?x(e):""}}function rr(e){return{type:"setPenStyleClasses",styleClasses:e}}function ri(e){return{type:"setTheme",theme:w.toCSS(e)}}var ro=function(e,t,n,i){var o=ed(e);if(n){var a="";return void 0!==n.updates&&(o.recognizedSymbols?o.recognizedSymbols.push(n):o.recognizedSymbols=[n],a=r.EventType.RENDERED),void 0!==n.exports&&(o.rawResults.exports=n,o.exports=n.exports,a=r.EventType.EXPORTED),void 0===n.canUndo&&void 0===n.canRedo||(a=r.EventType.CHANGED),"supportedImportMimeTypes"===n.type&&(a=r.EventType.SUPPORTED_IMPORT_MIMETYPES),"partChanged"===n.type&&(a=r.EventType.LOADED),"idle"===n.type&&(a=r.EventType.IDLE),"close"===n.type&&(a=r.EventType.CHANGED),nw(i.editor,e,a)}return nE(i.editor,t)};function ra(e,t){return rs.apply(this,arguments)}function rs(){return(rs=ta(ti.mark(function e(t,n){var r,i,o,a,s,c,l,u,d,h,f;return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t9(),i=t9(),o=t9(),s=null,"MATH"===t.editor.innerConfiguration.recognitionParams.type||"DIAGRAM"===t.editor.innerConfiguration.recognitionParams.type?a=tg(t,{model:eu(n,n.lastPositions.lastReceivedPosition),partChange:i,initPromise:o,patch:function(e,t){return ro(n,e,t,a)},error:function(e,t){return ro(n,e,t,a)}}):s=(a=tg(t,{model:eu(n,n.lastPositions.lastReceivedPosition),contentChange:r,partChange:i,response:function(e,t){return ro(n,e,t,a)},initPromise:o,patch:function(e,t){return ro(n,e,t,a)},error:function(e,t){return ro(n,e,t,a)}})).recognitionContexts[0].contentChange.promise,nU("/api/v4.0/iink/document",a,nH,ra).catch(function(){var e=ta(ti.mark(function e(r){return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!tv(t)||!t.reconnect){e.next=6;break}return p.info("Attempting a reconnect",t.currentReconnectionCount),e.next=4,t.reconnect(t,n);case 4:e.next=8;break;case 6:p.error("Unable to reconnect",r),ro(n,r,void 0,t);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=8,a.recognitionContexts[0].partChange.promise;case 8:if(l=(c=nO(e.sent,2))[0],!(u=c[1])){e.next=23;break}if(ro(n,l,u,t),null===s){e.next=22;break}return e.next=17,s;case 17:h=(d=nO(e.sent,2))[0],(f=d[1])&&ro(n,h,f,t);case 22:a.recognitionContexts[0].initPromise.resolve(!0);case 23:return e.abrupt("return",a.recognitionContexts[0].initPromise);case 24:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rc(e,t,n){return rl.apply(this,arguments)}function rl(){return(rl=ta(ti.mark(function e(t,n,i){var o,a,s,c,l,u=arguments;return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a=Array((o=u.length)>3?o-3:0),s=3;s<o;s++)a[s-3]=u[s];return p.info("-- Prepare message for ".concat(i.name," --")),c=tg(t,{model:n,response:function(e,o){var a=t.editor.configuration.triggers.exportContent===r.Trigger.DEMAND;(!a||a&&"buildExport"===i.name)&&ro(n,e,o,c)},contentChange:t9(),patch:function(e,t){return ro(n,e,t,c)},error:function(e,t){return ro(n,e,t,c)}}),nB.apply(nG,[c,i].concat(a)).catch(function(e){p.error(e),nX.apply(nG,[rc,t,n,i].concat(a))}),e.next=7,c.recognitionContexts[0].contentChange.promise;case 7:if(!(l=e.sent)){e.next=11;break}return ro(n,l[0],l[1],c),e.abrupt("return",{res:n,types:[]});case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ru(e,t){return rd.apply(this,arguments)}function rd(){return(rd=ta(ti.mark(function e(t,n){var i,o;return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return nB(i=tg(t,{model:n,response:function(e,o){t.editor.configuration.triggers.exportContent!==r.Trigger.DEMAND&&ro(n,e,o,i)},contentChange:t9(),patch:function(){var e=ta(ti.mark(function e(r,o){var a,s;return ti.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nk(t,n);case 2:s=(a=e.sent).err,ro(a.res,s,o,i);case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}),n2).catch(function(e){return nX(ru,t,n)}),e.next=5,i.recognitionContexts[0].contentChange.promise;case 5:if(!(o=e.sent)){e.next=9;break}return ro(n,o[0],o[1],i),e.abrupt("return",{err:void 0,res:i.recognitionContexts[0].model,events:[]});case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rp(e,t,n){return rc(e,t,rn,n)}function rh(e,t,n){return rc(e,t,rr,n)}function rf(e,t,n){return rc(e,t,ri,n)}var rg=Object.freeze({__proto__:null,IinkWsConfiguration:nJ,getInfo:function(){return nJ},buildNewContentPackageInput:nK,buildRestoreIInkSessionInput:nV,buildNewContentPart:nq,buildOpenContentPart:nZ,buildConfiguration:nQ,buildSetPenStyle:rn,buildSetPenStyleClasses:rr,buildSetTheme:ri,responseCallback:ro,init:ra,newContentPart:function(e,t){return rc(e,t,nq,e.editor.configuration)},openContentPart:function(e,t){return rc(e,t,nZ,[e.editor.configuration,e.currentPartId])},sendConfiguration:function(e,t){return rc(e,t,nQ,e.editor.configuration)},pointerEvents:function(e,t,n){return rc(e,t,n7,n)},addStrokes:function(e,t){return rc.apply(void 0,[e,t,n$].concat([e,t]))},undo:function(e,t){return rc(e,t,n0)},redo:function(e,t){return rc(e,t,n1)},clear:ru,convert:function(e,t,n){return rc(e,t,n3,n)},export_:function(e,t,n){var r=[e.editor.configuration,e.currentPartId,n];return rc.apply(void 0,[e,t,n6].concat(r))},import_:function(e,t,n){for(var r={model:t,response:function(n,r){return ro(t,n,r,e)},importFileId:nN.create(4).toString()},i=tg(e,r),o=e.editor.configuration.recognitionParams.server.websocket.fileChunkSize,a=[],s=function(e){0===e&&a.push(rc(i,t,n9,r.importFileId,n.type)),(function(e){var t=this,n=new FileReader;return new Promise(function(r,i){n.onload=function(e){return r(e.target.result)},n.onerror=function(){return i(Error(t))},n.readAsText(e)})})(n.slice(e,o,n.type)).then(function(s){var c=[r.importFileId,s,e+o>n.size];a.push(rc.apply(void 0,[i,t,n8].concat(c)))})},c=0;c<n.size;c+=o)s(c);return Promise.all(a)},getSupportedImportMimeTypes:function(e,t){return rc(e,t,rt)},waitForIdle:function(e,t){return rc(e,t,re)},resize:function(e,t,n){var r=[n,e.editor.configuration.renderingParams.minHeight,e.editor.configuration.renderingParams.minWidth];return rc.apply(void 0,[e,t,n5].concat(r))},zoom:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return rc(e,t,n4,n)},setPenStyle:rp,setPenStyleClasses:rh,setTheme:rf,close:nY}),rm={grabber:P,strokerList:[eC,tr],rendererList:[ex,e7],recognizerList:[nA,rg],events:function(e,t){h.info("emitting ".concat(e," event"),t),this.dispatchEvent(new CustomEvent(e,Object.assign({bubbles:!0,composed:!0},t?{detail:t}:void 0)))},getBehaviorFromConfiguration:function(e,t){var n={};return n.grabber=e.grabber,t&&("REST"===t.recognitionParams.protocol?(n.stroker=eC,n.renderer=ex,n.recognizer=nA):(n.stroker=tr,n.renderer=e7,n.recognizer=rg)),n.events=e.events,n}};function rv(e,t,n,r,i,o){return c.debug("Registering a new editor"),new ny(e,t,n,r,i,o)}}}]);